!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="a5c4c9a6-4671-4dcd-a577-5b09cfeaba1d",e._sentryDebugIdIdentifier="sentry-dbid-a5c4c9a6-4671-4dcd-a577-5b09cfeaba1d")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[40793],{3209:(e,t,a)=>{a.d(t,{I:()=>p,O:()=>u});var s=a(3547);function n(e){return e[Math.floor(Math.random()*e.length)]}var r=a(3683),i=a(20337),l=a(39116),o=a(88382),c=a(65146),d=a(31651);function u(){let{t:e}=(0,c.Bd)("workspace"),{client:t}=(0,i.useStatsigClient)(),a=(0,l.useRouter)(),[s,n]=(0,o.useState)(!1),d=(0,r.M)(e=>e.createWorkspace);return{isPending:s,add:async()=>{n(!0);try{let s=await d({name:e("workspace-default-name","New Project"),icon:p()});return t.logEvent("ws_create",s.workspaceId),a.push("/workspace/".concat(s.workspaceId))}finally{n(!1)}}}}function p(){let e=n(Object.keys(s.Pt)),t=n(s.Tj);return(0,d.K)({icon:e,color:t})}},3547:(e,t,a)=>{a.d(t,{ar:()=>eG,Ln:()=>eU,Tj:()=>ez,Pt:()=>eE});var s=a(79342),n=a(77215),r=a(56751),i=a(34765),l=a(20075),o=a(49942),c=a(92269),d=a(52871),u=a(77660),p=a(83076),x=a(46162),m=a(29531),h=a(30590),g=a(58746),f=a(40075),v=a(8757),j=a(63241),b=a(56297),y=a(53868),w=a(57577),C=a(37929),k=a(85413),N=a(32910),S=a(8541),I=a(4347),_=a(12174),A=a(28919),M=a(70352),P=a(81361),E=a(70913),z=a(87289),L=a(46368),T=a(69580),D=a(19818),H=a(78392),R=a(49592),O=a(68926),B=a(85853),K=a(31905),V=a(57799),F=a(92684),U=a(30452),Z=a(55689),G=a(2947),$=a(27841),W=a(69783),X=a(55804),Y=a(53165),Q=a(95233),q=a(15507),J=a(651),ee=a(20948),et=a(30472),ea=a(47288),es=a(70650),en=a(85368),er=a(11875),ei=a(27707),el=a(34352),eo=a(44397),ec=a(98567),ed=a(48823),eu=a(86508),ep=a(47047),ex=a(84155),em=a(16862),eh=a(3628),eg=a(15748),ef=a(17779),ev=a(89369),ej=a(97259),eb=a(64619),ey=a(12397),ew=a(9227),eC=a(44394),ek=a(48728),eN=a(53708),eS=a(7036),eI=a(22483),e_=a(36512),eA=a(99241),eM=a(68746),eP=a(65146);let eE={flag:n.A,home:r.A,star:i.A,heart:l.A,globe:o.A,unlock:c.A,smile:d.A,shield:u.A,bell:p.A,mail:x.A,phone:m.A,user:h.A,stethoscope:g.A,calendar:f.A,clock:v.A,hourglass:j.A,sun:b.A,moon:y.A,monitor:w.A,umbrella:C.A,leaf:k.A,utensils:N.A,bug:S.A,fish:I.A,bird:_.A,cat:A.A,"flask-conical":M.A,rocket:P.A,plane:E.A,car:z.A,truck:L.A,train:T.A,camera:D.A,video:H.A,music:R.A,headphones:O.A,microscope:B.A,archive:K.A,"book-open":V.A,zap:F.A,wrench:U.A,"sticky-note":Z.A,"cup-soda":G.A,scale:$.A,film:W.A,palette:X.A,cpu:Y.A,calculator:Q.A,laptop:q.A,briefcase:J.A,highlighter:ee.A,"clipboard-list":et.A,component:ea.A,building:es.A,flame:en.A,play:er.A,diamond:ei.A,database:el.A,aperture:eo.A,glasses:ec.A,shirt:ed.A,banana:eu.A,beer:ep.A,apple:ex.A,carrot:em.A,cherry:eh.A,gem:eg.A,gamepad:ef.A,"chef-hat":ev.A,music2:ej.A,"dollar-sign":eb.A,coffee:ey.A,tag:ew.A,sailboat:eC.A,"graduation-cap":ek.A,anchor:eN.A,pin:eS.A,compass:eI.A,code:e_.A,droplet:eA.A,box:eM.A},ez=["gray","red","orange","yellow","lime","teal","green","blue","purple","pink"],eL={flag:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.flag.name",defaults:"Flag"}),home:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.home.name",defaults:"Home"}),star:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.star.name",defaults:"Star"}),heart:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.heart.name",defaults:"Heart"}),globe:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.globe.name",defaults:"Globe"}),unlock:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.unlock.name",defaults:"Unlock"}),smile:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.smile.name",defaults:"Smile"}),shield:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.shield.name",defaults:"Shield"}),bell:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.bell.name",defaults:"Bell"}),mail:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.mail.name",defaults:"Mail"}),phone:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.phone.name",defaults:"Phone"}),user:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.user.name",defaults:"User"}),stethoscope:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.stethoscope.name",defaults:"Stethoscope"}),calendar:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.calendar.name",defaults:"Calendar"}),clock:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.clock.name",defaults:"Clock"}),hourglass:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.hourglass.name",defaults:"Hourglass"}),sun:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.sun.name",defaults:"Sun"}),moon:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.moon.name",defaults:"Moon"}),monitor:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.monitor.name",defaults:"Monitor"}),umbrella:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.umbrella.name",defaults:"Umbrella"}),leaf:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.leaf.name",defaults:"Leaf"}),utensils:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.utensils.name",defaults:"Utensils"}),bug:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.bug.name",defaults:"Bug"}),fish:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.fish.name",defaults:"Fish"}),bird:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.bird.name",defaults:"Bird"}),cat:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.cat.name",defaults:"Cat"}),"flask-conical":(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.flask-conical.name",defaults:"Flask Conical"}),rocket:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.rocket.name",defaults:"Rocket"}),plane:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.plane.name",defaults:"Plane"}),car:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.car.name",defaults:"Car"}),truck:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.truck.name",defaults:"Truck"}),train:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.train.name",defaults:"Train"}),camera:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.camera.name",defaults:"Camera"}),video:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.video.name",defaults:"Video"}),music:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.music.name",defaults:"Music"}),headphones:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.headphones.name",defaults:"Headphones"}),microscope:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.microscope.name",defaults:"Microscope"}),archive:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.archive.name",defaults:"Archive"}),"book-open":(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.book-open.name",defaults:"Book Open"}),zap:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.zap.name",defaults:"Zap"}),wrench:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.wrench.name",defaults:"Wrench"}),"sticky-note":(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.sticky-note.name",defaults:"Sticky Note"}),"cup-soda":(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.cup-soda.name",defaults:"Cup Soda"}),scale:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.scale.name",defaults:"Scale"}),film:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.film.name",defaults:"Film"}),palette:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.palette.name",defaults:"Palette"}),cpu:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.cpu.name",defaults:"CPU"}),calculator:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.calculator.name",defaults:"Calculator"}),laptop:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.laptop-2.name",defaults:"Laptop"}),briefcase:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.briefcase.name",defaults:"Briefcase"}),highlighter:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.highlighter.name",defaults:"Highlighter"}),"clipboard-list":(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.clipboard-list.name",defaults:"Clipboard List"}),component:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.component.name",defaults:"Component"}),building:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.building-2.name",defaults:"Building"}),flame:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.flame.name",defaults:"Flame"}),play:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.play.name",defaults:"Play"}),diamond:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.diamond.name",defaults:"Diamond"}),database:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.database.name",defaults:"Database"}),aperture:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.aperture.name",defaults:"Aperture"}),glasses:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.glasses.name",defaults:"Glasses"}),shirt:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.shirt.name",defaults:"Shirt"}),banana:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.banana.name",defaults:"Banana"}),beer:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.beer.name",defaults:"Beer"}),apple:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.apple.name",defaults:"Apple"}),carrot:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.carrot.name",defaults:"Carrot"}),cherry:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.cherry.name",defaults:"Cherry"}),gem:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.gem.name",defaults:"Gem"}),gamepad:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.gamepad-2.name",defaults:"Gamepad"}),"chef-hat":(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.chef-hat.name",defaults:"Chef Hat"}),music2:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.music-2.name",defaults:"Music Note"}),"dollar-sign":(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.dollar-sign.name",defaults:"Dollar Sign"}),coffee:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.coffee.name",defaults:"Coffee"}),tag:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.tag.name",defaults:"Tag"}),sailboat:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.sailboat.name",defaults:"Sailboat"}),"graduation-cap":(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.graduation-cap.name",defaults:"Graduation Cap"}),anchor:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.anchor.name",defaults:"Anchor"}),pin:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.pin.name",defaults:"Pin"}),compass:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.compass.name",defaults:"Compass"}),code:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.code-2.name",defaults:"Code"}),droplet:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.droplet.name",defaults:"Droplet"}),box:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"icon.box.name",defaults:"Box"})},eT={gray:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"color.gray.name",defaults:"Gray"}),red:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"color.red.name",defaults:"Red"}),orange:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"color.orange.name",defaults:"Orange"}),yellow:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"color.yellow.name",defaults:"Yellow"}),lime:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"color.lime.name",defaults:"Lime"}),teal:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"color.teal.name",defaults:"Teal"}),green:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"color.green.name",defaults:"Green"}),blue:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"color.blue.name",defaults:"Blue"}),purple:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"color.purple.name",defaults:"Purple"}),pink:(0,s.jsx)(eP.x6,{ns:"base",i18nKey:"color.pink.name",defaults:"Pink"})};var eD=a(61312),eH=a(88382),eR=a(56691),eO=a(1826),eB=a(41320),eK=a(16506);let eV={gray:"text-gray-400",red:"text-red-400",orange:"text-orange-400",yellow:"text-yellow-400",lime:"text-lime-400",teal:"text-teal-400",green:"text-green-400",blue:"text-blue-400",purple:"text-purple-400",pink:"text-pink-400"},eF={gray:"text-gray-300",red:"text-red-300",orange:"text-orange-300",yellow:"text-yellow-300",lime:"text-lime-300",teal:"text-teal-300",green:"text-green-300",blue:"text-blue-300",purple:"text-purple-300",pink:"text-pink-300"},eU=(0,eH.memo)(e=>{let{value:t,className:a,size:n}=e,{resolvedTheme:r}=(0,eK.D)(),i="dark"===r,l=eE[t.icon],o=(0,eD.cn)("size-4",i&&eF[t.color],i||eV[t.color],a);return(0,s.jsx)(l,{className:o,size:n})}),eZ=(0,eH.memo)(e=>{let{icon:t,onSelect:a}=e,n=(0,eB.Di)(),[r,i]=(0,eH.useState)(!1),l=eE[t],o=n?"iconMd":"iconSm",c=e=>{i(!1),a({icon:t,color:e})};return(0,s.jsxs)(eO.AM,{modal:!0,open:r,onOpenChange:i,children:[(0,s.jsx)(eO.Wv,{asChild:!0,children:(0,s.jsxs)(eR.$n,{variant:"ghost",size:"iconSm",children:[(0,s.jsx)("label",{className:"sr-only",children:eL[t]}),(0,s.jsx)(l,{className:"size-4"})]})}),(0,s.jsx)(eO.hl,{className:"grid grid-cols-5 p-2",align:"start",alignOffset:-9,children:ez.map(e=>(0,s.jsxs)(eR.$n,{size:o,variant:"ghost",overideIconStyle:!0,onClick:()=>c(e),children:[(0,s.jsx)("label",{className:"sr-only",children:eT[e]}),(0,s.jsx)(eU,{value:{icon:t,color:e}})]},e))})]},t)}),eG=(0,eH.memo)(e=>{let{onSelect:t,className:a}=e,n=(0,eH.useMemo)(()=>Object.keys(eE).sort(),[]),r=(0,eD.cn)("grid grid-cols-9 items-center justify-items-stretch p-2 ",a);return(0,s.jsx)("div",{className:r,children:n.map(e=>(0,s.jsx)("div",{className:"aspect-square flex items-center justify-center",children:(0,s.jsx)(eZ,{icon:e,onSelect:t})},e))})})},3683:(e,t,a)=>{a.d(t,{M:()=>h,_:()=>g});var s=a(79342),n=a(23835),r=a(17703),i=a(40873),l=a(65258),o=a(64389),c=a(81858),d=a(85423),u=a(65146),p=a(14908),x=a(51182);class m{constructor(e,t){this.set=e,this.get=t,this.byId={},this.list=[],this.listStatus="initial",this.listPageToken="",this.loadFirstPage=async()=>{let e=null===n.sessionStoreState||void 0===n.sessionStoreState?void 0:n.sessionStoreState.getState();if((null==e?void 0:e.user)&&"loading"!==this.get().listStatus){this.set(e=>{e.list=[],e.listStatus="loading",e.listPageToken=""});try{var t;let e=await o.Em.workspaceRepositoryListWorkspaces({pageSize:30,orderBy:"ORDER_BY_LAST_USE_TIME"}),a=null!=(t=e.workspaces)?t:[],s=e.nextPageToken||"";this.set(e=>{e.listStatus="ready",e.listPageToken=s,e.list=a.map(t=>{let a=f(t);return e.byId[a.workspaceId]=(0,l.ok)(a),a.workspaceId})})}catch(e){(0,r.vV)("workspace-store.loadFirstPage",e),this.set(e=>{e.listStatus="error"})}}},this.loadNextPage=async()=>{let{listStatus:e,listPageToken:t}=this.get();if("loading"!==e&&t){this.set(e=>{e.listStatus="loading"});try{var a;let e=await o.Em.workspaceRepositoryListWorkspaces({pageSize:30,orderBy:"ORDER_BY_LAST_USE_TIME",pageToken:t}),s=null!=(a=e.workspaces)?a:[],n=e.nextPageToken||"";this.set(e=>{for(let t of(e.listStatus="ready",e.listPageToken=n,s)){let a=f(t);e.byId[a.workspaceId]=(0,l.ok)(a),e.list.includes(a.workspaceId)||e.list.push(a.workspaceId)}})}catch(e){(0,r.vV)("workspace-store.loadNextPage",e),this.set(e=>{e.listStatus="error"})}}},this.loadWorkspace=async e=>{this.set(t=>{t.byId[e]?t.byId[e].status:t.byId[e]={status:"loading",data:null,error:null}});try{let t=await o.Em.workspaceRepositoryGetWorkspace({workspaceId:e}),a=f(t);this.set(t=>{t.byId[e]=(0,l.ok)(a)})}catch(t){(0,r.vV)("workspace-store.loadWorkspace",t),this.set(a=>{a.byId[e]=(0,l._q)(t)})}},this.deleteWorkspace=async e=>{let{list:t}=this.get(),a=t.indexOf(e);this.set(t=>{t.list=c.A([e],t.list)});try{await o.Em.workspaceRepositoryDeleteWorkspace({workspaceId:e}),this.set(t=>{delete t.byId[e]})}catch(t){(0,r.vV)("workspace-store.deleteWorkspace",t),this.set(t=>({list:d.A(a,e,t.list)})),p.oR.error((0,s.jsx)(u.x6,{ns:"workspace",i18nKey:"workspace-store-delete.error",defaults:"Error when deleting workspace"}))}},this.createWorkspace=async e=>{try{let t=await o.Em.workspaceRepositoryCreateWorkspace({body:{name:e.name,icon:e.icon}}),a=f(t);return this.set(e=>{e.byId[a.workspaceId]=(0,l.ok)(a),e.list.unshift(a.workspaceId)}),a}catch(e){throw(0,r.vV)("workspace-store.createWorkspace",e),p.oR.error((0,s.jsx)(u.x6,{ns:"workspace",i18nKey:"workspace-store-delete.error",defaults:"Error when creating workspace"})),e}},this.updateWorkspace=async(e,t)=>{var a;let n=null==(a=this.get().byId[e])?void 0:a.data;this.set(a=>{var s;(null==(s=a.byId[e])?void 0:s.data)&&n&&(a.byId[e].data={...n,...t})});try{let a=await o.Em.workspaceRepositoryUpdateWorkspace({workspaceId:e,body:t}),s=f(a);this.set(t=>{t.byId[e]=(0,l.ok)(s)})}catch(t){(0,r.vV)("workspace-store.updateWorkspace",t),n&&this.set(t=>{t.byId[e]=(0,l.ok)(n)}),p.oR.error((0,s.jsx)(u.x6,{ns:"workspace",i18nKey:"workspace-store-delete.error",defaults:"Error when updating workspace"}))}}}}let h=(0,l.MQ)(m,"useWorkspaceStore"),g=()=>h((0,x.k)(e=>e.list.map(t=>{var a;return null==(a=e.byId[t])?void 0:a.data}).filter(i.O)));function f(e){if(!e.workspaceId)throw Error("Workspace ID is required but was not provided");return e}},10986:(e,t,a)=>{a.d(t,{Ry:()=>g,SidePanelProvider:()=>u,UT:()=>m,ex:()=>x,ps:()=>h,wv:()=>p});var s=a(79342),n=a(88844),r=a(56691),i=a(61312),l=a(42283),o=a(88382),c=a(65146);let d=(0,o.createContext)(null);function u(e){let{children:t}=e,[a,r]=(0,o.useState)(null),i=(0,o.useCallback)(e=>{r(t=>(t&&t.id!==e.id&&t.onOpenChange(!1),e))},[]),l=(0,o.useCallback)(e=>{r(t=>t&&t.id===e?null:t)},[]);return(0,s.jsxs)(d.Provider,{value:{openPanel:i,closePanel:l,activeEntry:a},children:[t,(0,s.jsx)(n.w,{isVisible:null!==a,minWidth:200,maxWidth:800,initialWidth:400,className:"bg-background max-w-[40%] xl:max-w-none",children:null==a?void 0:a.children})]})}function p(e){let{open:t,onOpenChange:a,children:s}=e,n=(0,o.useContext)(d);if(!n)throw Error("SidePanel must be used within a SidePanelProvider");let{openPanel:r,closePanel:i}=n,l=(0,o.useId)();return(0,o.useEffect)(()=>()=>{i(l)},[l,i]),(0,o.useEffect)(()=>{t?r({id:l,children:s,onOpenChange:a}):i(l)},[t,l,s,a,r,i]),null}function x(e){let{className:t,children:a}=e,n=(0,i.cn)("flex-1 truncate text-base font-semibold",t);return(0,s.jsx)("div",{className:n,children:a})}function m(e){let{children:t,onClick:a,...n}=e,{t:i}=(0,c.Bd)("base"),u=(0,o.useContext)(d);if(!u)throw Error("SidePanelCloseButton must be used within a SidePanelProvider");let{activeEntry:p,closePanel:x}=u;return(0,s.jsx)(r.$n,{variant:"ghost",size:"icon","aria-label":i("side-panel-close-button.label","Close side panel"),onClick:e=>{p&&(p.onOpenChange(!1),x(p.id),null==a||a(e))},...n,children:t||(0,s.jsx)(l.A,{className:"h-5 w-5"})})}function h(e){let{children:t,className:a}=e,n=(0,i.cn)("flex z-10 flex-row items-center justify-between flex-shrink-0 w-full px-2 md:px-5 sticky top-0 h-12 md:h-16 via-80%",a);return(0,s.jsx)("div",{className:n,children:t})}function g(e){let{children:t}=e;return(0,s.jsx)("div",{className:"px-4 pb-2",children:t})}},12001:(e,t,a)=>{a.d(t,{A:()=>r});var s=a(79342),n=a(72712);let r=e=>(0,s.jsx)(n.I,{viewBox:"-0.5 -0.5 15 15",...e,children:(0,s.jsx)("path",{d:"M7.23047 1.26183C7.86569 0.082389 9.45799 -0.151271 10.4053 0.796012L13.2041 3.59484C14.1514 4.54211 13.9177 6.1344 12.7383 6.76964L11.1338 7.6339C10.5893 7.9271 10.2112 8.45562 10.1094 9.06554L9.62207 11.9874L8.33301 13.2765L5 9.9425L2.1377 12.8019L1 13.0001L1.19824 11.8614L4.05664 9.00011L0.723633 5.66711L2.0127 4.37804L4.93359 3.89074C5.54368 3.78906 6.07294 3.41087 6.36621 2.86632L7.23047 1.26183Z",fill:"currentColor"})})},12065:(e,t,a)=>{a.d(t,{c:()=>l});var s=a(24734),n=a(49972),r=a(20337),i=a(88382);function l(){let e=(0,s.K)(),{client:t}=(0,r.useStatsigClient)();return{handlePinConversation:(0,i.useCallback)((a,s,r)=>{let{fetchUpdateConversation:i}=n.w.getState();i(a,{starred:s}).catch(t=>{e("app-sidebar:handlePinConversation",t)}),t.logEvent("update_conversation_pinned",a,{location:r})},[e,t])}}},16454:(e,t,a)=>{a.d(t,{_:()=>g});var s=a(79342),n=a(60065),r=a(61312),i=a(58711),l=a(20337),o=a(33846),c=a(74995),d=a(88382),u=a(65146),p=a(42557),x=a(5790),m=a(56691),h=a(38997);let g=e=>{let{className:t}=e,{t:a}=(0,u.Bd)("upsell"),g=(0,i.e)(c.A("setIsUpselling")),f=(0,x.iV)(c.A("setOpen")),v=(0,p.wV)(),{client:j}=(0,l.useStatsigClient)(),b=d.useCallback(()=>{j.logEvent("upsell_card_clicked",v.countryCode,{location:"upsell-card",countryCode:v.countryCode||""}),g(!0),f(!1)},[j,v.countryCode,g,f]);return(0,s.jsxs)(o.P.div,{role:"button",className:(0,r.cn)("relative px-4 py-3.5 w-full items-center bg-black text-xs text-white border cursor-pointer","border-card rounded-3xl group text-left flex gap-4 dark -mb-10 sm:-mb-4 transition-all","duration-300 ease-in-out","hover:scale-[1.01] will-change-transform",t),onClick:b,children:[(0,s.jsx)(n.I,{starDensity:.001,className:"rounded-[23px]"}),(0,s.jsx)("div",{className:"absolute inset-0 flex justify-center top-0 overflow-hidden rounded-[23px]",children:(0,s.jsx)("div",{className:"size-80 bg-red-500 bg-gradient-to-r from-sunset via-breeze to-cobalt aspect-square opacity-10 absolute bottom-4 blur-[32px] rounded-full"})}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 sm:items-center z-10 mb-0.5",children:[(0,s.jsx)(h.jI,{}),(0,s.jsx)("p",{className:"text-muted-foreground ms-1 sm:ms-0 ",children:a("Fewer rate limits, more capabilities","Fewer rate limits, more capabilities")})]}),(0,s.jsx)(m.$n,{variant:"filled",rounded:!0,className:"ms-auto z-10",children:a("Go Super","Go Super")})]})}},19841:(e,t,a)=>{a.d(t,{w:()=>w});var s=a(79342),n=a(92372),r=a(18585),i=a(56691),l=a(75500),o=a(41320),c=a(2376),d=a(87206),u=a(5862),p=a(61312),x=a(83123),m=a(61683),h=a(91807),g=a(82263),f=a(32171),v=a.n(f),j=a(88382),b=a(65146);function y(e){let{conversation:t,onEditStart:a,onDeleteStart:r}=e,{t:l}=(0,b.Bd)("base"),c=(0,o.Di)(),d=(0,j.useCallback)(e=>{e.stopPropagation(),window.open("/chat/".concat(t.conversationId),"_blank")},[t.conversationId]),u=(0,j.useCallback)(e=>{e.stopPropagation(),a(t.conversationId)},[a,t.conversationId]),p=(0,j.useCallback)(e=>{e.stopPropagation(),r(t.conversationId)},[r,t.conversationId]);return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[!c&&(0,s.jsx)(i.gx,{tabIndex:-1,variant:"ghost",size:"iconSm",onClick:d,tooltipContent:l("New Tab","New Tab"),"aria-label":l("New Tab","New Tab"),children:(0,s.jsx)(n.TC,{size:16,className:"text-primary"})}),(0,s.jsx)(i.gx,{tabIndex:-1,variant:"ghost",size:"iconSm",onClick:u,tooltipContent:l("Rename","Rename"),"aria-label":l("Rename","Rename"),children:(0,s.jsx)(n.rZ,{size:16,className:"text-primary"})}),(0,s.jsx)(i.gx,{tabIndex:-1,variant:"ghost",size:"iconSm","aria-label":l("Delete","Delete"),onClick:p,tooltipContent:l("Delete","Delete"),children:(0,s.jsx)(n.uc,{size:16,className:"text-primary"})})]})}let w=(0,j.memo)(e=>{var t;let{conversation:a,highlight:n,matchType:i,matchedWords:d,isEditing:u,isDeleting:x,isSelected:m,isCurrent:g,isHovered:f,newTitle:w,onNewTitleChange:_,onSelect:A,onEditStart:M,onDeleteStart:P,onToggleFavorite:E,onEditSave:z,onDeleteConfirm:L,onCancel:T,className:D}=e,{t:H}=(0,b.Bd)("base"),R=(0,l.h)(),O=(0,o.Di)(),B=(0,j.useMemo)(()=>a.title?a.title:a.createTime?H("conversation-missing-title","Chat on {{date}}",{date:new Date(a.createTime).toLocaleDateString()}):H("Untitled Chat","Untitled Chat"),[a,H]),K=(0,j.useMemo)(()=>"MATCH_MESSAGE"===i&&!!n,[i,n]),V=(0,j.useCallback)(()=>{z(a.conversationId)},[z,a.conversationId]),F=(0,j.useCallback)(e=>{e.stopPropagation(),"Enter"===e.key?V():"Escape"===e.key&&T()},[V,T]),U=(0,j.useCallback)(()=>{L(a.conversationId)},[L,a.conversationId]),{personaById:Z}=(0,c.v5)(),G=(0,j.useMemo)(()=>{if(!(0,c.sS)(a.personaId))return;let e=Z[a.personaId];if(e)return{...e,...(0,r.e8)(e.personaId)}},[a.personaId,Z]),$=(0,j.useCallback)(e=>{A&&(1===e.button||e.ctrlKey||e.metaKey||e.shiftKey||(e.preventDefault(),A(a.conversationId)))},[A,a.conversationId]);return(0,s.jsxs)(s.Fragment,{children:[!u&&(0,s.jsx)(v(),{href:"/chat/".concat(a.conversationId),className:"col-start-1 col-end-2 row-start-1 row-end-2 block z-10",onClick:$}),(0,s.jsxs)("div",{className:(0,p.cn)("flex cursor-pointer items-center gap-2 px-3 col-start-1 col-end-2 row-start-1 row-end-2",D),children:[u?(0,s.jsx)("input",{className:"w-full bg-transparent focus-visible:outline-none",value:w,onKeyDown:F,autoFocus:!0,onChange:e=>{_(e.target.value)}}):(0,s.jsxs)("div",{className:"flex-grow min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[G?(0,s.jsx)("span",{className:(0,p.cn)("[&>svg]:h-4 [&>svg]:w-4",G.colorClassName),children:G.icon}):!!((null==(t=a.mediaTypes)?void 0:t.includes("audio"))&&R.ENABLE_VOICE_MODE)&&(0,s.jsx)(h.A,{className:"text-secondary h-4 w-4 shrink-0"}),(0,s.jsx)("div",{className:"truncate text-primary",children:"MATCH_TITLE"===i?function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t||0===t.length||"string"!=typeof e)return e;let a=t.map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),n=RegExp("(".concat(a,")"),"gi"),r=e.split(n);return 1===r.length?e:r.map((e,t)=>t%2==1?(0,s.jsx)("span",{className:"text-primary font-extrabold",children:e},t):e)}(B,d):B}),g&&(0,s.jsx)(C,{children:H("Current","Current")})]}),K&&(0,s.jsx)(I,{text:n,matchedWords:d||[],className:"text-xs text-secondary mt-0.5 truncate"})]}),(0,s.jsx)("div",{className:"z-20",children:(m&&f||O)&&!u&&!x?(0,s.jsx)(y,{conversation:a,onEditStart:M,onDeleteStart:P,onToggleFavorite:E}):u?(0,s.jsx)(k,{onCancel:T,onSave:V}):x?(0,s.jsx)(N,{onCancel:T,onConfirm:U}):(0,s.jsx)(S,{conversation:a})})]})]})});function C(e){let{children:t}=e;return(0,s.jsx)("span",{className:(0,p.cn)("border border-border-l2 px-2 rounded-full","text-sm text-secondary flex flex-row items-center gap-1 text-nowrap"),children:t})}function k(e){let{onCancel:t,onSave:a}=e,{t:r}=(0,b.Bd)("base");return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.gx,{tabIndex:-1,variant:"ghost",size:"iconSm",onClick:e=>{e.stopPropagation(),t()},tooltipContent:r("Cancel","Cancel"),"aria-label":r("Cancel","Cancel"),children:(0,s.jsx)(n.uv,{size:16,className:"text-fg-primary"})}),(0,s.jsx)(i.gx,{tabIndex:-1,variant:"ghost",size:"iconSm",onClick:e=>{e.stopPropagation(),a()},tooltipContent:r("Save","Save"),"aria-label":r("Save","Save"),children:(0,s.jsx)(g.A,{size:16,className:"text-primary"})})]})}function N(e){let{onCancel:t,onConfirm:a}=e,{t:r}=(0,b.Bd)("base");return(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.gx,{tabIndex:-1,variant:"ghost",size:"iconSm",onClick:e=>{e.stopPropagation(),t()},tooltipContent:r("Cancel","Cancel"),"aria-label":r("Cancel","Cancel"),children:(0,s.jsx)(n.uv,{size:16,className:"text-fg-primary"})}),(0,s.jsx)(i.gx,{tabIndex:-1,variant:"ghost",size:"iconSm",onClick:e=>{e.stopPropagation(),a()},tooltipContent:r("Delete","Delete"),"aria-label":r("Delete","Delete"),children:(0,s.jsx)(n.uc,{size:16,className:"text-red-400"})})]})}function S(e){let{conversation:t}=e,a=(0,j.useMemo)(()=>(0,u.JU)(t.modifyTime),[t.modifyTime]),n=(0,j.useMemo)(()=>{if(t.modifyTime||t.createTime)return function(e,t){let a=new Date(e);if("this-year"===t)return a.toLocaleDateString(m.Ay.language,{day:"numeric",month:"short"});{if("older"===t)return a.toLocaleDateString(m.Ay.language,{day:"numeric",month:"short",year:"numeric"});let s=(0,x.a)(e,new Date,{unit:"day",locale:"en"}),n="day";return"today"===s&&(n=void 0),"yesterday"===s&&(n="hour"),(0,d.B)((0,x.a)(e,new Date,{unit:n,locale:m.Ay.language}))}}(t.modifyTime||t.createTime,a||"older")},[t.modifyTime,t.createTime,a]);return n?(0,s.jsx)("span",{className:(0,p.cn)("text-secondary whitespace-nowrap ml-2 hidden text-sm","md:inline md:group-hover/item:hidden","md:group-focus/item:hidden md:group-active/item:hidden"),children:n}):null}function I(e){let{text:t,matchedWords:a,className:n}=e;if(!t||!(null==a?void 0:a.length))return(0,s.jsx)(s.Fragment,{children:t});let r=a.map(e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),i=RegExp("(".concat(r,")"),"gi"),l=t.split(i);return(0,s.jsx)("div",{className:n,children:l.map((e,t)=>a.some(t=>t.toLowerCase()===e.toLowerCase())?(0,s.jsx)("span",{className:(0,p.cn)("text-primary font-bold"),children:e},t):(0,s.jsx)(j.Fragment,{children:e},t))})}},26676:(e,t,a)=>{a.d(t,{n:()=>g});var s=a(79342),n=a(3547),r=a(92372),i=a(56691),l=a(34500),o=a(1826),c=a(41320),d=a(61312),u=a(42283),p=a(88382),x=a(65146),m=a(31651),h=a(47095);let g=(0,p.memo)(e=>{let{icon:t,sizeClass:a="size-6",rounded:g=!1,buttonSize:f="iconMd",onChange:v,disabled:j=!1}=e,{t:b}=(0,x.Bd)("workspace"),[y,w]=(0,p.useState)(!1),C=(0,c.Di)();(0,p.useEffect)(()=>{w(!1)},[t]);let k=(0,p.useCallback)(e=>{w(!1),null==v||v((0,m.K)(e))},[v]),N=(0,s.jsx)(i.$n,{variant:"ghost",size:f,rounded:g,overideIconStyle:!0,className:"text-2xl","aria-label":b("workspace-icon.change","Change icon"),children:(0,s.jsx)(h.O,{icon:t,className:a})});return j?(0,s.jsx)("div",{className:(0,d.cn)((0,i.ru)({size:f,rounded:g})),children:(0,s.jsx)(h.O,{icon:t,className:a})}):C?(0,s.jsxs)(l._s,{open:y,onOpenChange:w,children:[(0,s.jsx)(l.Uz,{asChild:!0,children:N}),(0,s.jsxs)(l.zj,{className:"p-1 max-h-[70dvh]",children:[(0,s.jsxs)(l.BE,{className:"text-left flex justify-between items-center ",children:[(0,s.jsxs)(l.gk,{className:"flex gap-2",children:[(0,s.jsx)(r.XR,{size:16,className:"text-secondary"}),b("workspace-icon-drawer.title","Pick new icon")]}),(0,s.jsx)(i.$n,{variant:"ghostSecondary","aria-label":b("close","Close"),onClick:()=>w(!1),children:(0,s.jsx)(u.A,{size:16})})]}),(0,s.jsx)(n.ar,{onSelect:k})]})]}):(0,s.jsxs)(o.AM,{open:y,onOpenChange:w,children:[(0,s.jsx)(o.Wv,{asChild:!0,children:N}),(0,s.jsx)(o.hl,{className:"p-0 border",align:"start",children:(0,s.jsx)(n.ar,{onSelect:k})})]})})},31651:(e,t,a)=>{a.d(t,{K:()=>n,c:()=>r});var s=a(3547);function n(e){return"l:".concat(e.icon,":").concat(e.color)}function r(e){let t=RegExp("^l:(?<icon>[^:]+):(?<color>[^:]+)$"),a=e.match(t);if(null==a?void 0:a.groups){let{color:e,icon:t}=a.groups;if(s.Tj.includes(e)&&s.Pt[t])return{color:e,icon:t}}return null}},35692:(e,t,a)=>{a.d(t,{x:()=>r});var s=a(79342),n=a(61312);function r(e){let{className:t,variant:a="reg"}=e;return(0,s.jsx)("div",{className:(0,n.cn)("h-2 w-2 rounded-full bg-blue-400",{"h-1.5 w-1.5":"sm"===a},t)})}},38997:(e,t,a)=>{a.d(t,{L8:()=>r,iM:()=>n,jI:()=>i});var s=a(79342);let n=e=>{let{className:t,isDark:a}=e;return(0,s.jsxs)("svg",{width:"248",height:"65",viewBox:"0 0 248 65",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,s.jsx)("g",{filter:"url(#filter0_i_3682_180386)",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M43.7186 27.4612L25.9882 40.5653L51.387 15.0223V15.0451L58.7231 7.7002C58.5911 7.88701 58.4591 8.06926 58.3271 8.25152C52.7522 15.9381 50.0308 19.6971 52.2152 29.1015L52.2016 29.0878C53.7079 35.4895 52.0969 42.5884 46.8952 47.7963C40.3373 54.3666 29.8428 55.8292 21.2006 49.915L27.226 47.122C32.7418 49.2908 38.7763 48.3385 43.1134 43.9963C47.4504 39.6541 48.4243 33.3298 46.2444 28.0672C45.8303 27.0694 44.5879 26.8188 43.7186 27.4612ZM22.4885 23.3422C17.1958 28.6367 16.1263 37.8178 22.3292 43.7502L22.3247 43.7548L5.39062 58.9002C6.45033 57.4391 7.76256 56.0579 9.0738 54.6777L9.07384 54.6777L9.12695 54.6218L9.13789 54.6102C12.8842 50.6683 16.5974 46.7612 14.3287 41.2397C11.2886 33.8447 13.059 25.1785 18.6885 19.5422C24.541 13.6873 33.1605 12.211 40.36 15.1772C41.9529 15.7695 43.3409 16.6125 44.424 17.3962L38.4122 20.1756C32.8146 17.8245 26.4023 19.4238 22.4885 23.3422ZM175.307 45.9806C167.498 45.9806 162.841 40.357 162.841 32.6888C162.841 24.9484 167.664 19.1882 175.459 19.1882C181.551 19.1882 186.01 22.2843 187.062 28.0446H182.385C181.696 24.7685 178.94 22.9325 175.459 22.9325C169.839 22.9325 167.374 27.7565 167.374 32.6888C167.374 37.621 169.839 42.4091 175.459 42.4091C180.826 42.4091 183.182 38.5569 183.364 35.3529H175.278V31.6251H187.497L187.477 33.5741C187.477 40.8163 184.501 45.9806 175.307 45.9806ZM224.19 45.5062V19.8012H228.287V36.7656V45.5062H224.19ZM228.287 36.7656L236.953 26.8935H241.92L234.125 35.3539L241.993 45.5062H237.098L230.725 36.7828L228.287 36.7656ZM211.769 45.9364C205.678 45.9364 202.378 41.6523 202.378 36.18C202.378 30.6718 205.678 26.4237 211.769 26.4237C217.897 26.4237 221.16 30.6718 221.16 36.18C221.16 41.6523 217.897 45.9364 211.769 45.9364ZM206.657 36.18C206.657 40.4282 208.977 42.5524 211.769 42.5524C214.597 42.5524 216.881 40.4282 216.881 36.18C216.881 31.932 214.597 29.7719 211.769 29.7719C208.977 29.7719 206.657 31.932 206.657 36.18ZM190.976 29.8442V45.5049H195.073V30.3483H201.745V26.8922H194.421L190.976 29.8442ZM65.3359 37.8292C65.687 42.4631 69.2327 46.1843 76.0432 46.1843C81.9409 46.1843 86.1887 43.3407 86.1887 38.6366C86.1887 34.4941 83.3803 32.5633 78.5006 31.475L74.6389 30.5623C71.7954 29.9304 70.2507 28.9123 70.2507 27.0868C70.2507 24.84 72.3922 23.4007 75.5166 23.4007C78.5357 23.4007 80.7473 24.7347 81.0984 28.14H85.4164C85.1356 23.1199 81.2388 19.855 75.5166 19.855C69.8646 19.855 66.0029 22.9092 66.0029 27.3677C66.0029 32.142 70.0752 33.6165 73.7262 34.459L77.5527 35.3015C80.6069 36.0037 81.8356 37.2675 81.8356 38.9174C81.8356 41.4801 79.2729 42.6035 76.0432 42.6035C72.6379 42.6035 70.2507 41.3046 69.7242 37.8292H65.3359ZM95.8831 45.9386C91.2141 45.9386 89.6343 43.2003 89.6343 39.3387V27.3677H93.6012V39.1281C93.6012 41.1993 94.7948 42.5684 96.9012 42.5684C100.096 42.5684 101.676 40.1812 101.676 37.127V27.3677H105.642V45.5173H101.851V42.428H101.781C100.517 44.8503 98.516 45.9386 95.8831 45.9386ZM109.433 27.3677V52.4682H113.4V43.0599H113.506C114.769 45.1662 117.227 45.9386 119.087 45.9386C124.423 45.9386 127.267 41.5855 127.267 36.4249C127.267 31.2644 124.423 26.9113 119.087 26.9113C117.227 26.9113 114.769 27.6836 113.506 29.7899H113.4V27.3677H109.433ZM118.21 42.6386C114.734 42.6386 113.295 39.5493 113.295 36.4249C113.295 33.1952 114.734 30.1761 118.21 30.1761C121.755 30.1761 123.125 33.1952 123.125 36.4249C123.125 39.5493 121.755 42.6386 118.21 42.6386ZM138.266 45.9386C132.579 45.9386 129.349 41.9365 129.349 36.4249C129.349 30.7729 132.579 26.9113 137.95 26.9113C143.181 26.9113 146.375 30.457 146.551 35.9334L144.831 37.5483H133.386C133.702 40.778 135.422 42.7088 138.266 42.7088C140.337 42.7088 141.811 41.6206 142.549 39.6195H146.481C145.568 43.7971 142.479 45.9386 138.266 45.9386ZM133.491 34.7047H142.619C142.198 31.6154 140.407 30.0357 137.95 30.0357C135.703 30.0357 133.983 31.7559 133.491 34.7047ZM149.472 30.2463V45.5173H153.439V30.7378H159.899V27.3677H152.807L149.472 30.2463Z",fill:a?"white":"black"})}),(0,s.jsx)("defs",{children:(0,s.jsxs)("filter",{id:"filter0_i_3682_180386",x:"5.39062",y:"7.7002",width:"236.602",height:"51.2",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,s.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,s.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,s.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,s.jsx)("feOffset",{dy:"0.655766"}),(0,s.jsx)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,s.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.2 0"}),(0,s.jsx)("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_3682_180386"})]})})]})},r=e=>{let{className:t,isDark:a}=e;return a?(0,s.jsxs)("svg",{width:"92",height:"18",viewBox:"0 0 92 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,s.jsxs)("g",{filter:"url(#filter0_i_3682_180418)",children:[(0,s.jsx)("path",{d:"M82.7365 14.0405V0.652524H84.8705V9.48811L89.3839 4.34643H91.971L87.9108 8.75288L92.0088 14.0405H89.4594L86.1402 9.49707L84.8705 9.48811V14.0405H82.7365Z",fill:"url(#paint0_linear_3682_180418)"}),(0,s.jsx)("path",{d:"M82.7365 14.0405V0.652524H84.8705V9.48811L89.3839 4.34643H91.971L87.9108 8.75288L92.0088 14.0405H89.4594L86.1402 9.49707L84.8705 9.48811V14.0405H82.7365Z",fill:"white",fillOpacity:"0.2"}),(0,s.jsx)("path",{d:"M76.2673 14.2646C73.0947 14.2646 71.3762 12.0333 71.3762 9.18315C71.3762 6.31429 73.0947 4.1017 76.2673 4.1017C79.4588 4.1017 81.1583 6.31429 81.1583 9.18315C81.1583 12.0333 79.4588 14.2646 76.2673 14.2646ZM73.6045 9.18315C73.6045 11.3957 74.8132 12.5021 76.2673 12.5021C77.7402 12.5021 78.93 11.3957 78.93 9.18315C78.93 6.97064 77.7402 5.84556 76.2673 5.84556C74.8132 5.84556 73.6045 6.97064 73.6045 9.18315Z",fill:"url(#paint1_linear_3682_180418)"}),(0,s.jsx)("path",{d:"M76.2673 14.2646C73.0947 14.2646 71.3762 12.0333 71.3762 9.18315C71.3762 6.31429 73.0947 4.1017 76.2673 4.1017C79.4588 4.1017 81.1583 6.31429 81.1583 9.18315C81.1583 12.0333 79.4588 14.2646 76.2673 14.2646ZM73.6045 9.18315C73.6045 11.3957 74.8132 12.5021 76.2673 12.5021C77.7402 12.5021 78.93 11.3957 78.93 9.18315C78.93 6.97064 77.7402 5.84556 76.2673 5.84556C74.8132 5.84556 73.6045 6.97064 73.6045 9.18315Z",fill:"white",fillOpacity:"0.2"}),(0,s.jsx)("path",{d:"M65.4377 14.0398V5.88326L67.2317 4.34574H71.0464V6.14581H67.5716V14.0398H65.4377Z",fill:"url(#paint2_linear_3682_180418)"}),(0,s.jsx)("path",{d:"M65.4377 14.0398V5.88326L67.2317 4.34574H71.0464V6.14581H67.5716V14.0398H65.4377Z",fill:"white","fill-opacity":"0.2"}),(0,s.jsx)("path",{d:"M57.2766 14.2876C53.2092 14.2876 50.7841 11.3587 50.7841 7.36482C50.7841 3.33333 53.2958 0.333252 57.3559 0.333252C60.5285 0.333252 62.8513 1.94581 63.3989 4.94596H60.9629C60.604 3.23965 59.1688 2.28337 57.3559 2.28337C54.4288 2.28337 53.1447 4.79591 53.1447 7.36482C53.1447 9.93365 54.4288 12.4275 57.3559 12.4275C60.1508 12.4275 61.3783 10.4211 61.4727 8.75237H57.2615V6.81079H63.6256L63.6152 7.82591C63.6152 11.5979 62.0651 14.2876 57.2766 14.2876Z",fill:"url(#paint3_linear_3682_180418)"}),(0,s.jsx)("path",{d:"M57.2766 14.2876C53.2092 14.2876 50.7841 11.3587 50.7841 7.36482C50.7841 3.33333 53.2958 0.333252 57.3559 0.333252C60.5285 0.333252 62.8513 1.94581 63.3989 4.94596H60.9629C60.604 3.23965 59.1688 2.28337 57.3559 2.28337C54.4288 2.28337 53.1447 4.79591 53.1447 7.36482C53.1447 9.93365 54.4288 12.4275 57.3559 12.4275C60.1508 12.4275 61.3783 10.4211 61.4727 8.75237H57.2615V6.81079H63.6256L63.6152 7.82591C63.6152 11.5979 62.0651 14.2876 57.2766 14.2876Z",fill:"white","fill-opacity":"0.2"}),(0,s.jsx)("path",{d:"M5.57669 14.3937C2.02955 14.3937 0.182842 12.4556 0 10.0421H2.28553C2.55979 11.8522 3.80312 12.5287 5.57669 12.5287C7.25883 12.5287 8.59358 11.9436 8.59358 10.6089C8.59358 9.74952 7.95363 9.09128 6.36291 8.7256L4.36993 8.28678C2.46837 7.84796 0.3474 7.08002 0.3474 4.59337C0.3474 2.27127 2.35866 0.680545 5.30242 0.680545C8.28275 0.680545 10.3123 2.38098 10.4586 4.99562H8.20961C8.02677 3.22205 6.87487 2.52725 5.30242 2.52725C3.67513 2.52725 2.55979 3.2769 2.55979 4.44709C2.55979 5.39787 3.3643 5.92812 4.84532 6.25723L6.85658 6.73262C9.39809 7.29943 10.8608 8.30506 10.8608 10.4626C10.8608 12.9127 8.64843 14.3937 5.57669 14.3937Z",fill:"url(#paint4_linear_3682_180418)"}),(0,s.jsx)("path",{d:"M5.57669 14.3937C2.02955 14.3937 0.182842 12.4556 0 10.0421H2.28553C2.55979 11.8522 3.80312 12.5287 5.57669 12.5287C7.25883 12.5287 8.59358 11.9436 8.59358 10.6089C8.59358 9.74952 7.95363 9.09128 6.36291 8.7256L4.36993 8.28678C2.46837 7.84796 0.3474 7.08002 0.3474 4.59337C0.3474 2.27127 2.35866 0.680545 5.30242 0.680545C8.28275 0.680545 10.3123 2.38098 10.4586 4.99562H8.20961C8.02677 3.22205 6.87487 2.52725 5.30242 2.52725C3.67513 2.52725 2.55979 3.2769 2.55979 4.44709C2.55979 5.39787 3.3643 5.92812 4.84532 6.25723L6.85658 6.73262C9.39809 7.29943 10.8608 8.30506 10.8608 10.4626C10.8608 12.9127 8.64843 14.3937 5.57669 14.3937Z",fill:"white","fill-opacity":"0.2"}),(0,s.jsx)("path",{d:"M15.91 14.2657C13.4782 14.2657 12.6554 12.8396 12.6554 10.8283V4.59337H14.7215V10.7186C14.7215 11.7973 15.3432 12.5104 16.4402 12.5104C18.1041 12.5104 18.9269 11.2671 18.9269 9.67638V4.59337H20.993V14.0463H19.0183V12.4373H18.9817C18.3235 13.6989 17.2813 14.2657 15.91 14.2657Z",fill:"url(#paint5_linear_3682_180418)"}),(0,s.jsx)("path",{d:"M15.91 14.2657C13.4782 14.2657 12.6554 12.8396 12.6554 10.8283V4.59337H14.7215V10.7186C14.7215 11.7973 15.3432 12.5104 16.4402 12.5104C18.1041 12.5104 18.9269 11.2671 18.9269 9.67638V4.59337H20.993V14.0463H19.0183V12.4373H18.9817C18.3235 13.6989 17.2813 14.2657 15.91 14.2657Z",fill:"white","fill-opacity":"0.2"}),(0,s.jsx)("path",{d:"M22.9674 17.6666V4.59337H25.0335V5.85498H25.0884C25.7466 4.75793 27.0265 4.35567 27.9956 4.35567C30.7748 4.35567 32.2558 6.62292 32.2558 9.3107C32.2558 11.9985 30.7748 14.2657 27.9956 14.2657C27.0265 14.2657 25.7466 13.8635 25.0884 12.7664H25.0335V17.6666H22.9674ZM24.9787 9.3107C24.9787 10.938 25.7283 12.547 27.5385 12.547C29.3852 12.547 30.0983 10.938 30.0983 9.3107C30.0983 7.62855 29.3852 6.05611 27.5385 6.05611C25.7283 6.05611 24.9787 7.62855 24.9787 9.3107Z",fill:"url(#paint6_linear_3682_180418)"}),(0,s.jsx)("path",{d:"M22.9674 17.6666V4.59337H25.0335V5.85498H25.0884C25.7466 4.75793 27.0265 4.35567 27.9956 4.35567C30.7748 4.35567 32.2558 6.62292 32.2558 9.3107C32.2558 11.9985 30.7748 14.2657 27.9956 14.2657C27.0265 14.2657 25.7466 13.8635 25.0884 12.7664H25.0335V17.6666H22.9674ZM24.9787 9.3107C24.9787 10.938 25.7283 12.547 27.5385 12.547C29.3852 12.547 30.0983 10.938 30.0983 9.3107C30.0983 7.62855 29.3852 6.05611 27.5385 6.05611C25.7283 6.05611 24.9787 7.62855 24.9787 9.3107Z",fill:"white","fill-opacity":"0.2"}),(0,s.jsx)("path",{d:"M37.9843 14.2657C35.0223 14.2657 33.3401 12.1813 33.3401 9.3107C33.3401 6.36694 35.0223 4.35567 37.8198 4.35567C40.5441 4.35567 42.208 6.20238 42.2994 9.05472L41.4035 9.89579H35.4428C35.6074 11.5779 36.5033 12.5836 37.9843 12.5836C39.0631 12.5836 39.831 12.0168 40.215 10.9746H42.2628C41.7874 13.1504 40.1784 14.2657 37.9843 14.2657ZM35.4977 8.41477H40.2516C40.0322 6.80576 39.0997 5.98297 37.8198 5.98297C36.6496 5.98297 35.7536 6.87889 35.4977 8.41477Z",fill:"url(#paint7_linear_3682_180418)"}),(0,s.jsx)("path",{d:"M37.9843 14.2657C35.0223 14.2657 33.3401 12.1813 33.3401 9.3107C33.3401 6.36694 35.0223 4.35567 37.8198 4.35567C40.5441 4.35567 42.208 6.20238 42.2994 9.05472L41.4035 9.89579H35.4428C35.6074 11.5779 36.5033 12.5836 37.9843 12.5836C39.0631 12.5836 39.831 12.0168 40.215 10.9746H42.2628C41.7874 13.1504 40.1784 14.2657 37.9843 14.2657ZM35.4977 8.41477H40.2516C40.0322 6.80576 39.0997 5.98297 37.8198 5.98297C36.6496 5.98297 35.7536 6.87889 35.4977 8.41477Z",fill:"white","fill-opacity":"0.2"}),(0,s.jsx)("path",{d:"M43.821 14.0463V6.09267L45.558 4.59337H49.2514V6.34865H45.8871V14.0463H43.821Z",fill:"url(#paint8_linear_3682_180418)"}),(0,s.jsx)("path",{d:"M43.821 14.0463V6.09267L45.558 4.59337H49.2514V6.34865H45.8871V14.0463H43.821Z",fill:"white","fill-opacity":"0.2"})]}),(0,s.jsxs)("defs",{children:[(0,s.jsxs)("filter",{id:"filter0_i_3682_180418",x:"0",y:"0.333252",width:"92.0078",height:"17.3333",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,s.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,s.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,s.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,s.jsx)("feOffset",{dy:"0.833333"}),(0,s.jsx)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,s.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.2 0"}),(0,s.jsx)("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_3682_180418"})]}),(0,s.jsxs)("linearGradient",{id:"paint0_linear_3682_180418",x1:"46.0044",y1:"0.333252",x2:"46.0044",y2:"17.6666",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"white",stopOpacity:"0.9"}),(0,s.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.5"})]}),(0,s.jsxs)("linearGradient",{id:"paint1_linear_3682_180418",x1:"46.0044",y1:"0.333252",x2:"46.0044",y2:"17.6666",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"white",stopOpacity:"0.9"}),(0,s.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.5"})]}),(0,s.jsxs)("linearGradient",{id:"paint2_linear_3682_180418",x1:"46.0044",y1:"0.333252",x2:"46.0044",y2:"17.6666",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"white",stopOpacity:"0.9"}),(0,s.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.5"})]}),(0,s.jsxs)("linearGradient",{id:"paint3_linear_3682_180418",x1:"46.0044",y1:"0.333252",x2:"46.0044",y2:"17.6666",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"white",stopOpacity:"0.9"}),(0,s.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.5"})]}),(0,s.jsxs)("linearGradient",{id:"paint4_linear_3682_180418",x1:"46.0044",y1:"0.333252",x2:"46.0044",y2:"17.6666",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"white",stopOpacity:"0.9"}),(0,s.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.5"})]}),(0,s.jsxs)("linearGradient",{id:"paint5_linear_3682_180418",x1:"46.0044",y1:"0.333252",x2:"46.0044",y2:"17.6666",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"white",stopOpacity:"0.9"}),(0,s.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.5"})]}),(0,s.jsxs)("linearGradient",{id:"paint6_linear_3682_180418",x1:"46.0044",y1:"0.333252",x2:"46.0044",y2:"17.6666",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"white",stopOpacity:"0.9"}),(0,s.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.5"})]}),(0,s.jsxs)("linearGradient",{id:"paint7_linear_3682_180418",x1:"46.0044",y1:"0.333252",x2:"46.0044",y2:"17.6666",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"white",stopOpacity:"0.9"}),(0,s.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.5"})]}),(0,s.jsxs)("linearGradient",{id:"paint8_linear_3682_180418",x1:"46.0044",y1:"0.333252",x2:"46.0044",y2:"17.6666",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"white",stopOpacity:"0.9"}),(0,s.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.5"})]})]})]}):(0,s.jsxs)("svg",{width:"92",height:"18",viewBox:"0 0 92 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,s.jsxs)("g",{filter:"url(#filter0_i_4415_172742)",children:[(0,s.jsx)("path",{d:"M82.7365 14.0405V0.652524H84.8705V9.48811L89.3839 4.34643H91.971L87.9108 8.75288L92.0088 14.0405H89.4594L86.1402 9.49707L84.8705 9.48811V14.0405H82.7365Z",fill:"#141414"}),(0,s.jsx)("path",{d:"M76.2673 14.2646C73.0947 14.2646 71.3762 12.0333 71.3762 9.18315C71.3762 6.31429 73.0947 4.1017 76.2673 4.1017C79.4588 4.1017 81.1583 6.31429 81.1583 9.18315C81.1583 12.0333 79.4588 14.2646 76.2673 14.2646ZM73.6045 9.18315C73.6045 11.3957 74.8132 12.5021 76.2673 12.5021C77.7402 12.5021 78.93 11.3957 78.93 9.18315C78.93 6.97064 77.7402 5.84556 76.2673 5.84556C74.8132 5.84556 73.6045 6.97064 73.6045 9.18315Z",fill:"#141414"}),(0,s.jsx)("path",{d:"M65.4377 14.0398V5.88326L67.2317 4.34574H71.0464V6.14581H67.5716V14.0398H65.4377Z",fill:"#141414"}),(0,s.jsx)("path",{d:"M57.2766 14.2876C53.2092 14.2876 50.7841 11.3587 50.7841 7.36482C50.7841 3.33333 53.2958 0.333252 57.3559 0.333252C60.5285 0.333252 62.8513 1.94581 63.3989 4.94596H60.9629C60.604 3.23965 59.1688 2.28337 57.3559 2.28337C54.4288 2.28337 53.1447 4.79591 53.1447 7.36482C53.1447 9.93365 54.4288 12.4275 57.3559 12.4275C60.1508 12.4275 61.3783 10.4211 61.4727 8.75237H57.2615V6.81079H63.6256L63.6152 7.82591C63.6152 11.5979 62.0651 14.2876 57.2766 14.2876Z",fill:"#141414"}),(0,s.jsx)("path",{d:"M5.57669 14.3937C2.02955 14.3937 0.182842 12.4556 0 10.0421H2.28553C2.55979 11.8522 3.80312 12.5287 5.57669 12.5287C7.25883 12.5287 8.59358 11.9436 8.59358 10.6089C8.59358 9.74952 7.95363 9.09128 6.36291 8.7256L4.36993 8.28678C2.46837 7.84796 0.3474 7.08002 0.3474 4.59337C0.3474 2.27127 2.35866 0.680545 5.30242 0.680545C8.28275 0.680545 10.3123 2.38098 10.4586 4.99562H8.20961C8.02677 3.22205 6.87487 2.52725 5.30242 2.52725C3.67513 2.52725 2.55979 3.2769 2.55979 4.44709C2.55979 5.39787 3.3643 5.92812 4.84532 6.25723L6.85658 6.73262C9.39809 7.29943 10.8608 8.30506 10.8608 10.4626C10.8608 12.9127 8.64843 14.3937 5.57669 14.3937Z",fill:"#141414"}),(0,s.jsx)("path",{d:"M15.91 14.2657C13.4782 14.2657 12.6554 12.8396 12.6554 10.8283V4.59337H14.7215V10.7186C14.7215 11.7973 15.3432 12.5104 16.4402 12.5104C18.1041 12.5104 18.9269 11.2671 18.9269 9.67638V4.59337H20.993V14.0463H19.0183V12.4373H18.9817C18.3235 13.6989 17.2813 14.2657 15.91 14.2657Z",fill:"#141414"}),(0,s.jsx)("path",{d:"M22.9674 17.6666V4.59337H25.0335V5.85498H25.0884C25.7466 4.75793 27.0265 4.35567 27.9956 4.35567C30.7748 4.35567 32.2558 6.62292 32.2558 9.3107C32.2558 11.9985 30.7748 14.2657 27.9956 14.2657C27.0265 14.2657 25.7466 13.8635 25.0884 12.7664H25.0335V17.6666H22.9674ZM24.9787 9.3107C24.9787 10.938 25.7283 12.547 27.5385 12.547C29.3852 12.547 30.0983 10.938 30.0983 9.3107C30.0983 7.62855 29.3852 6.05611 27.5385 6.05611C25.7283 6.05611 24.9787 7.62855 24.9787 9.3107Z",fill:"#141414"}),(0,s.jsx)("path",{d:"M37.9843 14.2657C35.0223 14.2657 33.3401 12.1813 33.3401 9.3107C33.3401 6.36694 35.0223 4.35567 37.8198 4.35567C40.5441 4.35567 42.208 6.20238 42.2994 9.05472L41.4035 9.89579H35.4428C35.6074 11.5779 36.5033 12.5836 37.9843 12.5836C39.0631 12.5836 39.831 12.0168 40.215 10.9746H42.2628C41.7874 13.1504 40.1784 14.2657 37.9843 14.2657ZM35.4977 8.41477H40.2516C40.0322 6.80576 39.0997 5.98297 37.8198 5.98297C36.6496 5.98297 35.7536 6.87889 35.4977 8.41477Z",fill:"#141414"}),(0,s.jsx)("path",{d:"M43.821 14.0463V6.09267L45.558 4.59337H49.2514V6.34865H45.8871V14.0463H43.821Z",fill:"#141414"})]}),(0,s.jsx)("defs",{children:(0,s.jsxs)("filter",{id:"filter0_i_4415_172742",x:"0",y:"0.333252",width:"92.0078",height:"17.3334",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,s.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,s.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,s.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,s.jsx)("feOffset",{dy:"0.655766"}),(0,s.jsx)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,s.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.2 0"}),(0,s.jsx)("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_4415_172742"})]})})]})},i=e=>{let{className:t}=e;return(0,s.jsxs)("svg",{height:32,width:124,viewBox:"0 0 124 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,s.jsx)("g",{filter:"url(#filter0_i_3927_275932)",children:(0,s.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.8593 13.4806L12.9941 20.0327L25.6935 7.26115V7.27254L29.3615 3.6001C29.2955 3.6935 29.2296 3.78463 29.1636 3.87576C26.3761 7.71906 25.0154 9.59857 26.1076 14.3007L26.1008 14.2939C26.854 17.4948 26.0485 21.0442 23.4476 23.6482C20.1686 26.9333 14.9214 27.6646 10.6003 24.7075L13.613 23.311C16.3709 24.3954 19.3882 23.9193 21.5567 21.7481C23.7252 19.577 24.2122 16.4149 23.1222 13.7836C22.9151 13.2847 22.2939 13.1594 21.8593 13.4806ZM11.2443 11.4211C8.59788 14.0684 8.06314 18.6589 11.1646 21.6251L11.1623 21.6274L2.69531 29.2001C3.22516 28.4696 3.88128 27.7789 4.5369 27.0889L4.53692 27.0888L4.56347 27.0609L4.56894 27.0551C6.44208 25.0842 8.29869 23.1306 7.16433 20.3698C5.64432 16.6723 6.52948 12.3392 9.34423 9.52111C12.2705 6.59364 16.5802 5.8555 20.18 7.3386C20.9764 7.63477 21.6705 8.05623 22.212 8.44808L19.2061 9.83778C16.4073 8.66223 13.2012 9.46188 11.2443 11.4211ZM87.6548 22.7404C83.7501 22.7404 81.422 19.9286 81.422 16.0945C81.422 12.2243 83.8332 9.34424 87.731 9.34424C90.7766 9.34424 93.0065 10.8923 93.5322 13.7724H91.1936C90.8491 12.1344 89.4713 11.2164 87.731 11.2164C84.9209 11.2164 83.6882 13.6284 83.6882 16.0945C83.6882 18.5606 84.9209 20.9547 87.731 20.9547C90.4141 20.9547 91.5924 19.0286 91.6831 17.4266H87.6403V15.5627H93.7498L93.7399 16.5372C93.7399 20.1583 92.2518 22.7404 87.6548 22.7404ZM112.096 22.5032V9.65074H114.145V18.1329V22.5032H112.096ZM114.145 18.1329L118.478 13.1969H120.961L117.064 17.4271L120.998 22.5032H118.55L115.364 18.1415L114.145 18.1329ZM105.886 22.7183C102.84 22.7183 101.19 20.5763 101.19 17.8401C101.19 15.086 102.84 12.9619 105.886 12.9619C108.95 12.9619 110.581 15.086 110.581 17.8401C110.581 20.5763 108.95 22.7183 105.886 22.7183ZM103.33 17.8401C103.33 19.9642 104.49 21.0263 105.886 21.0263C107.3 21.0263 108.442 19.9642 108.442 17.8401C108.442 15.7161 107.3 14.6361 105.886 14.6361C104.49 14.6361 103.33 15.7161 103.33 17.8401ZM95.4894 14.6722V22.5026H97.538V14.9243H100.874V13.1962H97.2117L95.4894 14.6722ZM32.6693 18.6647C32.8448 20.9817 34.6176 22.8423 38.0229 22.8423C40.9718 22.8423 43.0957 21.4205 43.0957 19.0684C43.0957 16.9972 41.6914 16.0318 39.2516 15.4876L37.3208 15.0313C35.899 14.7153 35.1267 14.2063 35.1267 13.2935C35.1267 12.1701 36.1974 11.4505 37.7596 11.4505C39.2691 11.4505 40.375 12.1175 40.5505 13.8201H42.7095C42.5691 11.3101 40.6207 9.67764 37.7596 9.67764C34.9336 9.67764 33.0028 11.2047 33.0028 13.4339C33.0028 15.8211 35.0389 16.5584 36.8644 16.9796L38.7777 17.4009C40.3048 17.752 40.9191 18.3839 40.9191 19.2088C40.9191 20.4902 39.6378 21.0519 38.0229 21.0519C36.3203 21.0519 35.1267 20.4024 34.8634 18.6647H32.6693ZM47.9429 22.7194C45.6083 22.7194 44.8185 21.3503 44.8185 19.4195V13.4339H46.8019V19.3142C46.8019 20.3498 47.3987 21.0343 48.4519 21.0343C50.0492 21.0343 50.8391 19.8407 50.8391 18.3136V13.4339H52.8225V22.5088H50.9268V20.9641H50.8917C50.2598 22.1753 49.2593 22.7194 47.9429 22.7194ZM54.718 13.4339V25.9842H56.7015V21.2801H56.7541C57.386 22.3332 58.6147 22.7194 59.545 22.7194C62.213 22.7194 63.6348 20.5429 63.6348 17.9626C63.6348 15.3823 62.213 13.2058 59.545 13.2058C58.6147 13.2058 57.386 13.5919 56.7541 14.6451H56.7015V13.4339H54.718ZM59.1062 21.0694C57.3685 21.0694 56.6488 19.5248 56.6488 17.9626C56.6488 16.3477 57.3685 14.8382 59.1062 14.8382C60.879 14.8382 61.5636 16.3477 61.5636 17.9626C61.5636 19.5248 60.879 21.0694 59.1062 21.0694ZM69.1342 22.7194C66.2907 22.7194 64.6758 20.7184 64.6758 17.9626C64.6758 15.1366 66.2907 13.2058 68.9762 13.2058C71.5916 13.2058 73.1889 14.9786 73.2767 17.7168L72.4166 18.5243H66.6944C66.8523 20.1391 67.7124 21.1045 69.1342 21.1045C70.1698 21.1045 70.9071 20.5604 71.2757 19.5599H73.2416C72.7852 21.6487 71.2406 22.7194 69.1342 22.7194ZM66.747 17.1025H71.3108C71.1001 15.5578 70.2049 14.768 68.9762 14.768C67.8529 14.768 66.9928 15.6281 66.747 17.1025ZM74.7374 14.8733V22.5088H76.7209V15.119H79.9506V13.4339H76.4049L74.7374 14.8733Z",fill:"url(#paint0_linear_3927_275932)"})}),(0,s.jsxs)("defs",{children:[(0,s.jsxs)("filter",{id:"filter0_i_3927_275932",x:"2.69531",y:"3.6001",width:"118.301",height:"25.6001",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,s.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,s.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,s.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,s.jsx)("feOffset",{dy:"0.416667"}),(0,s.jsx)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,s.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.2 0"}),(0,s.jsx)("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_3927_275932"})]}),(0,s.jsxs)("linearGradient",{id:"paint0_linear_3927_275932",x1:"61.8465",y1:"3.6001",x2:"61.8465",y2:"29.2001",gradientUnits:"userSpaceOnUse",children:[(0,s.jsx)("stop",{stopColor:"white",stopOpacity:"0.9"}),(0,s.jsx)("stop",{offset:"1",stopColor:"white",stopOpacity:"0.5"})]})]})]})}},40873:(e,t,a)=>{function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";throw Error(e)}function n(e){return null!=e}a.d(t,{O:()=>n,Z:()=>s})},40945:(e,t,a)=>{a.d(t,{Yp:()=>E,Oh:()=>x.O,w8:()=>eT,TP:()=>eZ});var s=a(72359),n=a(88382),r=a(79342),i=a(56691),l=a(39729),o=a(84499),c=a(61312),d=a(20337),u=a(22406),p=a(65146),x=a(47095),m=a(73772),h=a(75500),g=a(67383),f=a(23032),v=a(74445),j=a(24994),b=a(3683),y=a(42283),w=a(82263),C=a(69973),k=a(33846),N=a(14908);let S={initial:{opacity:1,scale:1},copied:{opacity:0,scale:.8,transition:{duration:.2}}};function I(e){let{t}=(0,p.Bd)("workspace"),[a,s]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(a){let e=setTimeout(()=>{s(!1)},2e3);return()=>clearTimeout(e)}},[a]),(0,r.jsxs)(i.$n,{size:"md",variant:"outline",onClick:()=>{navigator.clipboard.writeText(e.text).then(()=>{s(!0)}).catch(e=>{N.oR.error(t("workspace-copy-link-button.error","Failed to copy link")),console.error("Failed to copy: ",e)})},className:"flex items-center gap-2",children:[(0,r.jsx)(k.P.div,{variants:S,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1,transition:{duration:.2,delay:0}},className:"flex items-center",children:a?(0,r.jsx)(w.A,{className:"size-4 text-fg-positive"}):(0,r.jsx)(C.A,{className:"size-4 text-fg-secondary"})},a?"check":"link"),(0,r.jsx)("span",{children:a?t("workspace-copy-link-button.copied","Copied!"):t("workspace-copy-link-button.label","Copy Link")})]})}function _(e){var t;let{open:a,onOpenChange:s,workspace:n}=e,{t:l}=(0,p.Bd)("workspace"),d=(0,b.M)(e=>e.updateWorkspace),u=(0,o.KQ)({page:"workspace",workspaceId:null!=(t=n.workspaceId)?t:"",tab:"attachments"},window.location.origin);return(0,r.jsx)(j.R,{open:a,setOpen:s,contentClassName:(0,c.cn)("focus:outline-0 focus-within:outline-0 gap-2","bg-background rounded-3xl","sm:min-w-[340px]","flex flex-col","md:overflow-hidden","px-6 py-6"),titleClassName:"flex justify-between items-center",title:(0,r.jsxs)(r.Fragment,{children:[n.isPublic?l("share-form-title-shared","Project is public"):l("workspace-share.title","Share Project"),(0,r.jsx)(i.$n,{className:"-mt-2 -mr-2",variant:"ghost",size:"icon","aria-label":l("workspace-instructions-close.label","Close"),onClick:()=>s(!1),tabIndex:-1,children:(0,r.jsx)(y.A,{size:18,className:"text-secondary"})})]}),footerClassName:"sm:justify-start pt-1",children:n.isPublic?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-secondary mb-4",children:l("project-share.shared.subtitle","This project is accessible to everyone in read-only mode.")}),(0,r.jsx)(I,{text:u})]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"flex flex-col mb-4",children:(0,r.jsx)("span",{className:"text-secondary",children:l("project-share.not-shared.subtitle","This project is only accessible to you. Share it to make it available to everyone in read-only mode.")})}),(0,r.jsx)(i.$n,{variant:"primary",onClick:()=>{var e;d(null!=(e=n.workspaceId)?e:"",{isPublic:!0})},children:l("project-share.share-button.label","Share Project")})]})})}var A=a(92372);let M=(0,n.memo)(e=>{let{workspaceId:t,open:a,onOpenChange:s,onDeleteStarted:n}=e,l=(0,b.M)(e=>e.deleteWorkspace),{t:o}=(0,p.Bd)("workspace");return a?(0,r.jsx)(j.R,{open:a,setOpen:s,contentClassName:(0,c.cn)("focus:outline-0 focus-within:outline-0 gap-2","bg-background rounded-3xl","w-full md:w-5/6 lg:w-3/5 max-w-3xl","flex flex-col","md:overflow-hidden","px-6 py-6"),titleClassName:"flex justify-between",title:(0,r.jsxs)(r.Fragment,{children:[o("workspace-detetion.title","Are you sure?"),(0,r.jsx)(i.$n,{className:"-mt-2 -mr-2",variant:"ghost",size:"icon","aria-label":o("workspace-instructions-close.label","Close"),onClick:()=>s(!1),tabIndex:-1,children:(0,r.jsx)(A.uv,{size:18,className:"text-secondary"})})]}),description:o("workspace-deletion.description","This action cannot be undone. Project will be lost forever."),footerClassName:"sm:justify-end pt-1 flex flex-col-reverse md:flex-row",footer:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.$n,{onClick:()=>{s(!1)},variant:"ghost",size:"md",className:"text-secondary",children:o("workspace-deletion-cancel.label","Cancel")}),(0,r.jsxs)(i.$n,{onClick:()=>{null==n||n(),t&&l(t)},variant:"outline",size:"md",className:"shadow-none text-primary",children:[(0,r.jsx)(v.A,{className:"size-4 text-fg-danger"}),o("workspace-deletion-confirm.label","Delete project")]})]})}):null});function P(e){let{workspace:t,className:a,iconSize:s,onDeleteStarted:l,onEditStarted:o,children:d}=e,{ENABLE_WORKSPACE_SHARING:x}=(0,h.h)(),{t:j}=(0,p.Bd)("workspace"),{workspaceId:b}=t,[y,w]=(0,n.useState)(!1),[C,k]=(0,n.useState)(!1),N=(0,n.useCallback)(()=>{setTimeout(()=>{w(!0)},1)},[]),S=(0,n.useCallback)(()=>{setTimeout(()=>{k(!0)},1)},[]),I=(0,c.cn)(a);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(m.rI,{children:[(0,r.jsx)(m.ty,{asChild:!0,children:d||(0,r.jsx)(i.$n,{variant:"ghostSecondary",rounded:!0,size:"iconMd",className:I,"aria-label":j("workspace-menu.label","Open menu"),children:(0,r.jsx)(u.A,{size:null!=s?s:14})})}),(0,r.jsxs)(m.SQ,{onCloseAutoFocus:e=>e.preventDefault(),side:"bottom",align:"end",sideOffset:6,alignOffset:-5,className:"flex flex-col shadow-sm shadow-black/5 border-border-l1 min-w-40",children:[x&&(0,r.jsxs)(m._2,{onClick:S,children:[(0,r.jsx)(g.A,{size:16,className:"me-2"}),j("share-workspace-button.label","Share")]}),o&&(0,r.jsxs)(m._2,{onClick:o,children:[(0,r.jsx)(f.A,{size:16,className:"me-2"}),j("workspace-menu.rename.label","Rename")]}),(0,r.jsxs)(m._2,{onClick:N,children:[(0,r.jsx)(v.A,{size:16,className:"text-fg-danger me-2"}),j("remove-workspace-button.label","Remove")]})]})]}),(0,r.jsx)(M,{workspaceId:b,open:y,onOpenChange:w,onDeleteStarted:l}),(0,r.jsx)(_,{open:C,onOpenChange:k,workspace:t})]})}function E(e){let{workspace:t,onClick:a,className:s}=e,{name:n,icon:m,workspaceId:h}=t,{client:g}=(0,d.useStatsigClient)(),{t:f}=(0,p.Bd)("workspace"),v=(0,c.cn)("group relative",s);return(0,r.jsxs)("div",{className:v,children:[(0,r.jsx)(o.N_,{route:{page:"workspace",workspaceId:null!=h?h:"",tab:"attachments"},onClick:a,children:(0,r.jsxs)(l.Zp,{className:"flex flex-row items-center @sm:flex-col @sm:items-stretch gap-2 px-5 py-4 pe-12 @sm:pe-5 max-w-4/5 rounded-3xl hover:bg-surface-l1 shadow-none h-full overflow-hidden bg-none bg-transparent",children:[(0,r.jsx)(x.O,{icon:m,className:"size-4"}),(0,r.jsx)("div",{className:"text-sm font-medium truncate",children:n})]})}),(0,r.jsx)(P,{workspace:t,onDeleteStarted:()=>{g.logEvent("ws_delete_click",void 0,{location:"workspaces"})},children:(0,r.jsx)(i.$n,{variant:"ghostSecondary",className:"visible @sm:invisible @sm:group-hover:visible absolute right-3 top-2 @sm:top-3",rounded:!0,size:"iconXs","aria-label":f("workspace-menu.label","Open menu"),children:(0,r.jsx)(u.A,{size:12})})})]})}var z=a(69358),L=a(82591),T=a(28503),D=a(80226),H=a(46748),R=a(63209),O=a(81745);function B(e){let{children:t,className:a}=e;return(0,r.jsxs)("div",{className:(0,c.cn)("h-dvh w-full relative selection:bg-highlight",a),children:[(0,r.jsx)(R.hx,{hideIncognito:!0}),(0,r.jsx)("div",{className:"max-w-[50rem] px-2 pt-16 @sm:pt-18 mx-auto w-full flex-col h-full relative items-center",children:t}),(0,r.jsx)(O.CommandMenu,{})]})}var K=a(1637),V=a(52371),F=a(68332),U=a(24734),Z=a(7658),G=a(17703),$=a(44347),W=a(74995),X=a(97325),Y=a(54344),Q=a(91623),q=a(37469);function J(e){let{icon:t,title:a,subtitle:s,className:n}=e,i=(0,c.cn)("flex-1 flex flex-col items-center justify-center p-4 gap-4 mb-4",n);return(0,r.jsxs)(l.Zp,{variant:"ghost",className:i,children:[(0,r.jsx)("div",{className:"bg-surface-l1 flex flex-col items-center rounded-full p-4",children:(0,r.jsx)("span",{className:"text-fg-tertiary",children:t})}),(0,r.jsxs)("div",{className:"flex flex-col gap-1 items-center text-center",children:[(0,r.jsx)("h3",{className:"font-semibold text-lg",children:a}),(0,r.jsx)("span",{className:"text-secondary max-w-md",children:s})]})]})}function ee(e){let{assets:t,uploadingFiles:a,onRemoveAsset:s,workspaceId:n}=e,i=(0,Z.P9)(n);return t.length+a.length+i.length===0?(0,r.jsx)(et,{}):(0,r.jsxs)("div",{className:"flex-1 flex flex-col gap-1 @sm:grid @sm:grid-cols-2 @sm:auto-rows-max",children:[a.map((e,t)=>(0,r.jsx)(k.P.div,{className:"max-w-full",initial:{opacity:0,translateY:-10},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:-10},children:(0,r.jsx)(Q.t,{file:e,onRemoveFile:()=>{},metadata:void 0})},"file"+t)),i.map((e,t)=>(0,r.jsx)(k.P.div,{className:"max-w-full",initial:{opacity:0,translateY:-10},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:-10},children:(0,r.jsx)(Q.t,{file:new File([e.thirdPartyFileId],e.name),onRemoveFile:()=>{},metadata:{fileMimeType:e.mimeType,fileName:e.name,thirdPartyFileId:e.thirdPartyFileId}})},"file"+t)),t.map((e,t)=>{var a;return(0,r.jsx)(k.P.div,{className:"max-w-full",initial:{opacity:0,translateY:-10},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:-10},children:(0,r.jsx)(q.u,{asset:e,onRemoveAsset:s,labelClassName:"sm:max-w-full flex-1",hideEdit:!0})},null!=(a=e.assetId)?a:t)})]})}function et(){let{t:e}=(0,p.Bd)("workspace");return(0,r.jsx)("div",{children:(0,r.jsx)(J,{icon:(0,r.jsx)(A.XR,{size:24,strokeWidth:1.5}),title:e("workspace-assets-empty.title","Welcome"),subtitle:e("workspace-assets-empty.text","Start by attaching files to your project. They will be used in all chats in this project.")})})}function ea(e){var t,a;let{workspace:s}=e,n=null!=(t=s.workspaceId)?t:"",{data:i,isPending:l,isError:o,refetch:c}=(0,Z.UL)(n),d=(0,Z.Ch)(n),{mutate:u,error:p}=(0,Z.Ep)(n);if((0,U.Y)("assets-section:removeAsset",p),l)return(0,r.jsx)(es,{});if(o)return(0,r.jsx)(er,{onRefetch:c});let x=null!=(a=i.assets)?a:[];return(0,r.jsx)("section",{className:"flex-1 w-full h-full flex flex-col gap-2 relative",children:(0,r.jsx)(Y.D,{fadeSize:"md",className:"py-2",children:(0,r.jsx)(ee,{workspaceId:n,uploadingFiles:d,assets:x,onRemoveAsset:e=>{e.assetId&&u(e.assetId)}})})})}function es(){return(0,r.jsx)(z.P,{children:(0,r.jsxs)("div",{"aria-busy":"true",className:"flex flex-col gap-2 @sm:grid @sm:grid-cols-2 @sm:auto-rows-max",children:[(0,r.jsx)(en,{}),(0,r.jsx)(en,{}),(0,r.jsx)(en,{}),(0,r.jsx)(en,{})]})})}function en(){return(0,r.jsx)(D.E,{className:"bg-warm-gray-100 dark:bg-gray-900 h-10"})}function er(e){let{onRefetch:t}=e,{t:a}=(0,p.Bd)("workspace");return(0,r.jsxs)(l.Zp,{className:"flex flex-col items-center px-8 py-4",variant:"ghost",children:[a("assets-loading-error.title","Unable to load assets"),(0,r.jsx)(i.$n,{variant:"outline",size:"md",onClick:t,children:a("assets-loading-error.cta","Retry")})]})}var ei=a(82451),el=a(70526),eo=a(44566);function ec(e){var t;let{workspaceId:a,onFileAddStarted:s}=e,{t:i}=(0,p.Bd)("workspace"),{client:l}=(0,d.useStatsigClient)(),{data:o}=(0,Z.UL)(a),c=(0,n.useMemo)(()=>{var e;return null!=(e=null==o?void 0:o.assets)?e:[]},[null==o?void 0:o.assets]),u=(0,n.useRef)(null),x=(0,n.useCallback)(()=>{var e;null==(e=u.current)||e.click()},[]),m=(0,eo.x)(a),{mutate:h,error:g}=(0,Z.Iv)(a);(0,U.Y)("attach-dropdown:upload",g);let{mutate:f,error:v}=(0,Z.PQ)(a);(0,U.Y)("attach-dropdown:uploadThirdParty",v);let{mutate:j,error:b}=(0,Z.mT)(a);(0,U.Y)("attach-dropdown:attachAsset",b);let y=(0,n.useCallback)(e=>{if(null==s||s(),c.length+e.length>el.aD){m(),l.logEvent("ws_max_files_alert",void 0,{location:"file-upload"});return}e.forEach(e=>h(e))},[s,c.length,m,l,h]),w=(0,n.useCallback)(e=>{e.target.files&&(null==s||s(),y(Array.from(e.target.files)))},[s,y]),C=(0,n.useCallback)(()=>(0,r.jsx)("input",{ref:u,className:"hidden",type:"file",onChange:w,multiple:!0,"data-testid":"file-input"}),[w]),{data:k}=(0,Z.qN)(),N=null!=(t=null==k?void 0:k.assets)?t:[];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ei.z,{label:i("workspace-assets.attach","Attach"),inlineLabel:!0,handleClickUpload:x,onAttachAsset:e=>{if(e&&(null==s||s(),!c.some(t=>t.assetId===e.assetId))){if(c.length+1>el.aD){m(),l.logEvent("ws_max_files_alert",void 0,{location:"attach-asset"});return}j(e)}},assets:N,handleUploadThirdParty:(e,t,a,s)=>{if(!c.some(e=>e.thirdPartyFileId===s)){if(c.length+1>el.aD){m(),l.logEvent("ws_max_files_alert",void 0,{location:"attach-3rd-party"});return}f({name:e,mimeType:t,fileSource:a,thirdPartyFileId:s})}},className:"w-auto me-[1px]",attachFiles:y}),C()]})}var ed=a(83638),eu=a(98868),ep=a(19841);function ex(e){var t,a;let{client:s}=(0,d.useStatsigClient)(),{conversation:i,action:l,onActionRequest:o}=e,c=null!=(t=i.conversationId)?t:"",[u,p]=(0,n.useState)(!1),[x,m]=(0,n.useState)(null!=(a=i.title)?a:""),[h,g]=(0,n.useState)(!1),[f,v]=(0,n.useState)(""),{routeToConversation:j}=(0,F.o)();(0,n.useEffect)(()=>{var e;m(null!=(e=i.title)?e:"")},[l]);let{mutate:b,error:y}=(0,Z.Fx)(c);(0,U.Y)("list-item:delete",y),(0,n.useEffect)(()=>{y&&g(!1)},[y]);let{mutate:w,error:C}=(0,Z.jT)(c);(0,U.Y)("list-item:update",C),(0,n.useEffect)(()=>{C&&v("")},[C]);let k=(0,n.useCallback)(e=>{j(e)},[j]);if(h)return null;let N=f?{...i,title:f}:i;return(0,r.jsx)("div",{className:"h-[48px] rounded-2xl grid grid-cols-1 grid-rows-1 hover:bg-button-ghost-hover",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),children:(0,r.jsx)(ep.w,{isCurrent:!1,isSelected:u,isHovered:u,isDeleting:"delete"===l,isEditing:"edit"===l,newTitle:x,onNewTitleChange:m,conversation:N,className:"p-4 rounded-2xl ",onDeleteStart:()=>o(c,"delete"),onEditStart:()=>o(c,"edit"),onDeleteConfirm:()=>{s.logEvent("delete_conversation",c,{location:"workspace"}),o(c,null),g(!0),b()},onCancel:()=>o(c,null),onEditSave:()=>{s.logEvent("update_conversation",c,{location:"workspace"}),o(c,null);let e=x.trim();v(e),w({title:e})},onSelect:k})})}function em(e){let{conversations:t}=e,{t:a}=(0,p.Bd)("workspace"),[s,i]=(0,n.useState)(null),[l,o]=(0,n.useState)(null),c=(0,n.useCallback)((e,t)=>{i(t),o(e)},[]);return 0===t.length?(0,r.jsx)(J,{icon:(0,r.jsx)(eu.A,{size:24,strokeWidth:1.5}),title:a("workspace-conversations-list.empty.label","No conversations yet"),subtitle:a("workspace-conversations-list.empty.cta","Start a new conversation in this project by typing in the input box at the top.")}):(0,r.jsx)("div",{children:t.map(e=>{let t=e.conversationId;return(0,r.jsx)(ex,{conversation:e,action:l===t?s:null,onActionRequest:c},t)})})}function eh(e){var t;let{t:a}=(0,p.Bd)("workspace"),{workspace:s}=e,{workspaceId:i}=s,{data:l,isPending:o,isError:c,fetchNextPage:d,hasNextPage:u,isFetchingNextPage:x,refetch:m}=(0,Z.fY)(null!=i?i:""),h=(0,n.useCallback)(()=>{u&&!x&&d()},[u,x,d]),g=(0,ed.B)(h);if(o)return(0,r.jsx)(ef,{});let f=null!=(t=null==l?void 0:l.pages.flatMap(e=>{var t;return null!=(t=e.conversations)?t:[]}))?t:[];return(0,r.jsxs)(Y.D,{fadeSize:"md",className:"py-2",children:[(0,r.jsx)(em,{conversations:f}),u&&!c&&(0,r.jsx)("div",{ref:g,className:"h-10 flex items-center justify-center",children:x?a("workspace-conversations-loading-more","Loading more"):a("workspace-conversations-scroll-to-load","Scroll to load more")}),c&&(0,r.jsx)(eg,{onRefetch:m})]})}function eg(e){let{onRefetch:t}=e,{t:a}=(0,p.Bd)("workspace");return(0,r.jsxs)(l.Zp,{className:"flex flex-col items-center px-8 py-4",variant:"ghost",children:[a("conversations-loading-error.title","Unable to load conversations"),(0,r.jsx)(i.$n,{variant:"outline",onClick:t,children:a("conversations-loading-error.cta","Retry")})]})}function ef(){return(0,r.jsx)(z.P,{children:(0,r.jsxs)("div",{role:"status","aria-busy":"true",className:"flex flex-col gap-1",children:[(0,r.jsx)(D.E,{className:"w-full h-10"}),(0,r.jsx)(D.E,{className:"w-full h-10"}),(0,r.jsx)(D.E,{className:"w-full h-10"})]})})}var ev=a(99667),ej=a(10986),eb=a(34500),ey=a(41320),ew=a(14267);function eC(e){var t;let{workspace:a,className:s}=e,{t:l}=(0,p.Bd)("workspace"),{client:o}=(0,d.useStatsigClient)(),[u,x]=(0,n.useState)(!1),m=(0,c.cn)("group flex flex-col h-auto items-start rounded-2xl text-start p-4 bg-surface-l1 border-l1 dark:hover:bg-surface-l2 hover:bg-surface-l4-hover",s),h=null!=(t=a.customPersonality)?t:"",[g,f]=(0,n.useState)(h);(0,n.useEffect)(()=>{f(h)},[h]);let v=(0,n.useId)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.$n,{variant:"outline",className:m,onClick:()=>{x(e=>!e),o.logEvent("ws_instructions_click",void 0,{location:"section"})},children:[(0,r.jsxs)("div",{className:"flex gap-2 font-bold items-center",children:[(0,r.jsx)(ew.A,{size:16,className:"text-fg-secondary group-hover:text-fg-primary transition-colors duration-100"}),l("workspace-intruction-button.label","Instructions")]}),(0,r.jsx)("div",{className:"text-fg-secondary w-full truncate",children:a.customPersonality||(0,r.jsx)("span",{className:"italic",children:l("workspace-intruction-button.empty","Set up instructions for Grok in this project")})})]}),(0,r.jsxs)(ek,{open:u,onOpenChange:x,children:[(0,r.jsx)("label",{className:"sr-only",htmlFor:v,children:l("workspace-instruction.title","Custom instructions")}),(0,r.jsx)(ev.q,{value:g,onChange:f,isDirty:h!==g,onSave:e=>{var t;f(e);let{updateWorkspace:s}=b.M.getState();s(null!=(t=a.workspaceId)?t:"",{customPersonality:e}),x(!1)},onReset:()=>{f(h),x(!1)},disabled:!1,textareaId:v,minRows:8,maxRows:16,autoFocus:!1})]})]})}function ek(e){let{open:t,onOpenChange:a,children:s}=e,n=(0,ey.Di)(),{t:l}=(0,p.Bd)("workspace");return n?(0,r.jsx)(eb._s,{open:t,onOpenChange:a,children:(0,r.jsxs)(eb.zj,{className:(0,c.cn)("focus:outline-0 focus-within:outline-0 gap-2","bg-background rounded-3xl","w-full md:w-5/6 lg:w-3/5 max-w-3xl","flex flex-col","md:overflow-hidden","px-6 py-6"),"aria-describedby":void 0,children:[(0,r.jsx)(eb.BE,{children:(0,r.jsxs)(eb.gk,{className:"flex h-10 items-center justify-between",children:[l("workspace-instructions-modal.title","Project Instructions"),(0,r.jsx)(i.$n,{variant:"ghost",size:"icon","aria-label":l("workspace-instructions-close.label","Close"),onClick:()=>a(!1),tabIndex:-1,children:(0,r.jsx)(y.A,{size:18,className:"text-secondary"})})]})}),s]})}):(0,r.jsxs)(ej.wv,{open:t,onOpenChange:a,children:[(0,r.jsxs)(ej.ps,{children:[(0,r.jsx)(ej.ex,{children:l("workspace-instructions-modal.title","Project Instructions")}),(0,r.jsx)(ej.UT,{})]}),(0,r.jsx)(ej.Ry,{children:s})]})}function eN(e){var t;let{open:a,onOpenChange:s,workspace:l}=e,{t:o}=(0,p.Bd)("workspace"),d=null!=(t=l.customPersonality)?t:"",[u,x]=(0,n.useState)(d);(0,n.useEffect)(()=>{x(d)},[d,a]);let m=(0,n.useId)();return(0,r.jsxs)(j.R,{open:a,setOpen:s,contentClassName:(0,c.cn)("focus:outline-0 focus-within:outline-0 gap-2","bg-background rounded-3xl","w-full md:w-5/6 lg:w-3/5 max-w-3xl","flex flex-col","md:overflow-hidden","px-6 py-6"),titleClassName:"flex justify-between text-lg",title:(0,r.jsxs)(r.Fragment,{children:[o("workspace-instructions-modal.title","Project Instructions"),(0,r.jsx)(i.$n,{className:"-mt-2 -mr-2",variant:"ghost",size:"icon","aria-label":o("workspace-instructions-close.label","Close"),onClick:()=>s(!1),tabIndex:-1,children:(0,r.jsx)(A.uv,{size:18,className:"text-secondary"})})]}),description:o("workspace-instruction.description","Grok will follow the instructions for all conversations in this project."),children:[(0,r.jsx)("label",{className:"sr-only",htmlFor:m,children:o("workspace-instruction.title","Custom instructions")}),(0,r.jsx)(ev.q,{value:u,onChange:x,isDirty:d!==u,onSave:e=>{var t;x(e);let{updateWorkspace:a}=b.M.getState();a(null!=(t=l.workspaceId)?t:"",{customPersonality:e}),s(!1)},onReset:()=>{x(d),s(!1)},disabled:!1,textareaId:m})]})}function eS(e){let{workspace:t,className:a}=e,{t:s}=(0,p.Bd)("workspace"),{client:l}=(0,d.useStatsigClient)(),[o,u]=(0,n.useState)(!1),x=(0,c.cn)("group flex flex-col h-auto items-start rounded-2xl text-start p-4 bg-surface-l1 border-l1 dark:hover:bg-surface-l2 hover:bg-surface-l4-hover",a);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i.$n,{variant:"outline",className:x,onClick:()=>{u(!0),l.logEvent("ws_instructions_click",void 0,{location:"section"})},children:[(0,r.jsxs)("div",{className:"flex gap-2 font-bold items-center",children:[(0,r.jsx)(ew.A,{size:16,className:"text-fg-secondary group-hover:text-fg-primary transition-colors duration-100"}),s("workspace-intruction-button.label","Instructions")]}),(0,r.jsx)("div",{className:"text-fg-secondary w-full truncate",children:t.customPersonality||(0,r.jsx)("span",{className:"italic",children:s("workspace-intruction-button.empty","Set up instructions for Grok in this project")})})]}),(0,r.jsx)(eN,{workspace:t,open:o,onOpenChange:u})]})}var eI=a(52553),e_=a(92437);function eA(e){let{onDrop:t,className:a}=e,{t:s}=(0,p.Bd)("workspace"),{client:i}=(0,d.useStatsigClient)(),{attachFiles:l}=(0,eI.S)(),o=(0,n.useRef)(null),c=(0,n.useCallback)(e=>{null==t||t(),l(e),e.forEach(e=>{i.logEvent("upload_file",e.name,{location:"workspace-query-file-drop",mimeType:e.type})})},[l,t,i]),u=(0,e_.t)({ref:o,onDrop:c});return(0,r.jsx)(e_.u,{ref:o,dragState:u,title:s("workspace-query-dropzone.title","Attach to message"),subtitle:s("workspace-query-dropzone.description","Drop here to add files to your message"),className:a})}var eM=a(26676);let eP=(0,n.memo)(e=>{var t;let{workspace:a,editing:s,onEditingChange:l}=e,{t:o}=(0,p.Bd)("workspace"),c=(0,n.useRef)(null);!function(e,t){(0,n.useEffect)(()=>{if(!e||!t.current)return;if("none"!==document.body.style.pointerEvents){var a;null==(a=t.current)||a.select();return}let s=setTimeout(()=>{var e;null==(e=t.current)||e.select()},200);return()=>clearTimeout(s)},[e,t])}(s,c);let[d,u]=(0,n.useState)(null!=(t=a.name)?t:"");(0,n.useEffect)(()=>{a.name&&u(a.name)},[a.name]);let x=(0,n.useCallback)(e=>{var t;let{updateWorkspace:s}=b.M.getState();s(null!=(t=a.workspaceId)?t:"",{name:e})},[a.workspaceId]),m=()=>{x(d),l(!1)},h=(0,n.useId)();return s?(0,r.jsxs)("form",{className:"flex-1 flex gap-2 justify-between items-center min-w-0",onSubmit:e=>{e.preventDefault(),m()},children:[(0,r.jsx)("div",{"aria-live":"polite",className:"sr-only",children:o("workspace-name-save.announce","Editing project name")}),(0,r.jsx)("input",{"aria-label":o("workspace-name-input.label","Project name"),type:"text",value:d,onChange:e=>{u(e.target.value)},onKeyDown:e=>{if("Escape"===e.key){var t;l(!1),u(null!=(t=a.name)?t:"")}},onBlur:()=>{},className:"flex-1 px-1 @sm:px-2 text-2xl focus-visible:outline-none bg-input-background py-1 rounded-xl",id:h,ref:c,autoFocus:!0}),(0,r.jsx)(i.$n,{variant:"ghostSecondary",size:"iconMd",rounded:!0,"aria-label":o("workspace-name-save.label","Save"),type:"submit",disabled:!d,children:(0,r.jsx)(w.A,{size:16})})]}):(0,r.jsxs)("h1",{role:"button",tabIndex:0,"aria-expanded":"false",onClick:()=>{l(!0)},className:"ms-1 @sm:ms-2 flex-1 bg-transparent text-2xl focus-visible:outline-none border-b-secondary min-w-0 truncate group",children:[d,(0,r.jsx)(f.A,{size:16,className:"hidden @sm:inline ms-1 @sm:ms-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-fg-secondary"})]})}),eE=(0,n.memo)(function(e){let{workspace:t}=e,{push:a}=(0,o.wK)(),[s,i]=(0,n.useState)(!1),l=(0,n.useCallback)(e=>{var a;let{updateWorkspace:s}=b.M.getState();s(null!=(a=t.workspaceId)?a:"",{icon:e})},[t.workspaceId]);return(0,r.jsx)("div",{className:"flex flex-col @sm:flex-row items-start @sm:items-center gap-6 @sm:gap-2 w-full",children:(0,r.jsxs)("div",{className:"flex-1 flex items-center justify-start min-w-0 w-full",children:[(0,r.jsx)(eM.n,{icon:t.icon,onChange:l}),(0,r.jsx)(eP,{workspace:t,editing:s,onEditingChange:i}),(0,r.jsx)(P,{workspace:t,className:"m-[1px] ms-1 @sm:ms-2",iconSize:16,onDeleteStarted:()=>{a({page:"workspaces"})},onEditStarted:()=>{i(!0)}})]})})});function ez(e){var t;let{onDrop:a,className:s,workspaceId:i}=e,{t:l}=(0,p.Bd)("workspace"),{client:o}=(0,d.useStatsigClient)(),{mutate:c,error:u}=(0,Z.Iv)(i);(0,U.Y)("workspace-drop-zone:upload",u);let x=(0,eo.x)(i),{data:m}=(0,Z.UL)(i),h=null!=(t=null==m?void 0:m.assets)?t:[],g=(0,n.useRef)(null),f=(0,n.useCallback)(e=>{if(null==a||a(),h.length+e.length>el.aD){x(),o.logEvent("ws_max_files_alert",void 0,{location:"workspace-file-drop"});return}e.forEach(e=>(o.logEvent("upload_file",e.name,{location:"workspace-file-drop",mimeType:e.type}),c(e)))},[h.length,a,x,o,c]),v=(0,e_.t)({ref:g,onDrop:f});return(0,r.jsx)(e_.u,{ref:g,dragState:v,title:l("workspace-dropzone.title","Attach to project"),subtitle:l("workspace-dropzone.description","Drop here to add files to project"),className:s})}function eL(e){var t;let{workspace:a}=e,{t:s}=(0,p.Bd)("chat"),{client:i}=(0,d.useStatsigClient)(),l=(0,h.h)(),c=null!=(t=a.workspaceId)?t:"",u=(0,F.o)(),x=function(){let{client:e}=(0,d.useStatsigClient)();return t=>e.logEvent("create_workspace_convo",t)}(),{route:m,replace:g}=(0,o.wK)(),f="workspace"===m.page&&m.tab||"conversations",{mutate:v,error:j}=(0,Z.tX)({onSuccess:x});(0,U.Y)("workspace",j);let b=(0,n.useCallback)(e=>{v({conversationId:e.conversationId,workspaceId:c}),u.routeToConversation(e.conversationId),i.logEvent("ws_start_convo")},[v,u,i,c]),y=function(e,t){let a=(0,X.aP)(W.A("establishNewConversation")),s=(0,$.C$)(W.A("isIncognito")),r=(0,h.h)();return(0,n.useCallback)(async(n,i,l,o,c,d,u)=>{let p;if(!n)return!1;r.WORKSPACE_AGENT&&(p={agenticWorkspace:{workspaceId:e}});let x=await a({message:n,fileAttachmentIds:l,webpageUrls:o,toolOverrides:c,temporary:s,isPreset:d,persona:u,enableRetries:r.ENABLE_AUTO_STREAM_RETRY,workspaceIds:[e],responseMetadata:p,ff:r}).catch(e=>{(0,G.vV)("workspace:establishNewConversation",e)});return!!x&&(t(x),!0)},[r,s,a,e,t])}(c,b);if(!c)return;let w=()=>{g({page:"workspace",workspaceId:c,tab:"attachments"})};return(0,r.jsxs)("div",{className:"flex-1 flex gap-6 h-full flex-col justify-between items-stretch overflow-hidden",children:[(0,r.jsx)(eE,{workspace:a}),(0,r.jsxs)("div",{className:"flex-1 overflow-auto flex gap-5 flex-col @sm:flex-col-reverse",children:[(0,r.jsxs)(V.tU,{value:f,className:"flex-1 overflow-hidden flex flex-col relative pt-1",children:[l.WORKSPACE_INSTRUCTION_SIDE_PANEL?(0,r.jsx)(eC,{workspace:a,className:"mb-5"}):(0,r.jsx)(eS,{workspace:a,className:"mb-5"}),(0,r.jsxs)("div",{className:"flex justify-between sm:ms-1",children:[(0,r.jsxs)(V.j7,{className:"place-self-start !bg-transparent bg-none border-none",children:[(0,r.jsx)(V.Xi,{variant:"underline",value:"attachments",asChild:!0,children:(0,r.jsx)(o.N_,{route:{page:"workspace",workspaceId:c,tab:"attachments"},children:s("workspace-tab.attachments","Attachments")})}),(0,r.jsx)(V.Xi,{variant:"underline",value:"conversations",children:(0,r.jsx)(o.N_,{route:{page:"workspace",workspaceId:c,tab:"conversations"},children:s("workspace-tab.conversations","Conversations")})})]}),(0,r.jsx)(ec,{workspaceId:c,onFileAddStarted:w})]}),(0,r.jsx)(V.av,{value:"conversations",className:"overflow-auto pb-5",children:(0,r.jsx)(eh,{workspace:a})}),(0,r.jsx)(V.av,{value:"attachments",className:"overflow-hidden flex-1 pb-5",children:(0,r.jsx)(ea,{workspace:a})}),(0,r.jsx)(ez,{workspaceId:c,onDrop:w})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(K.s,{className:"",textAreaClassName:"min-h-14 pt-5 my-0 mb-5",placeholder:s("workspace-query-placeholder","Start a conversation in this project"),onQuery:y,isIncognito:!1,onFrontPage:!1,expandable:!1},"query-bar"),(0,r.jsx)(eA,{className:"z-20"})]})]})]})}function eT(e){let{workspaceId:t}=e,{t:a}=(0,p.Bd)("chat"),i=(0,b.M)(e=>e.loadWorkspace),l=(0,b.M)(e=>e.byId[t]),o=null==l?void 0:l.data;(0,H.r)(null==o?void 0:o.name),(0,n.useEffect)(()=>{l||i(t)},[l,i,t]);let[,c]=function(){let[e,t]=(0,s.Mj)("recent-workspaces",[]);return[e,(0,n.useCallback)(e=>{t(t=>t[0]===e?t:[e,...t.filter(t=>t!==e)].slice(0,4))},[t])]}();return((0,n.useEffect)(()=>{(null==o?void 0:o.workspaceId)&&c(null==o?void 0:o.workspaceId)},[o]),l&&(null==l?void 0:l.status)!=="loading")?(null==l?void 0:l.error)||!o?(0,r.jsx)(B,{children:(0,r.jsx)(T.J,{title:a("workspace-error.title","Error"),description:a("workspace-error.description","There was an issue finding ID {{workspaceId}}",{workspaceId:t}),cta:a("workspace-error.cta","Go Home")})}):(0,r.jsx)(B,{children:(0,r.jsxs)(L.t,{fallbackRender:()=>(0,r.jsx)(T.J,{title:a("workspace-error.title","Error"),description:a("workspace-unexpected-error.description","Something went wrong"),cta:a("workspace-error.cta","Go Home")}),children:[(0,r.jsx)(eL,{workspace:o}),";"]})}):(0,r.jsx)(B,{children:(0,r.jsx)(z.P,{children:(0,r.jsxs)("div",{className:"gap-2 flex flex-col",children:[(0,r.jsx)(D.E,{className:"h-10 w-full"}),(0,r.jsx)(D.E,{className:"h-10 w-full"}),(0,r.jsx)(D.E,{className:"h-10 w-full"})]})})})}var eD=a(57402),eH=a(19717),eR=a(3209);function eO(e){let{variant:t,onClick:a,className:s}=e,{t:n}=(0,p.Bd)("workspace"),{add:l,isPending:o}=(0,eR.O)(),d="square"===t,u=(0,c.cn)(s);return(0,r.jsxs)(i.$n,{variant:"outline",size:d?"iconMd":"md",className:u,onClick:()=>{null==a||a(),l()},"aria-busy":o,"aria-label":o?n("add-workspace-button.pending","Creating project"):n("add-workspace-button.description","Add new project"),children:[o?(0,r.jsx)(eD.A,{className:"animate-spin",size:16,"aria-hidden":!0}):(0,r.jsx)(eH.A,{size:16,"aria-hidden":!0}),(0,r.jsx)("span",{className:"hidden sm:block",children:d||n("add-workspace-button.label","Add")})]})}var eB=a(40938);function eK(e){let{className:t}=e,{client:a}=(0,d.useStatsigClient)(),{t:s}=(0,p.Bd)("workspace"),i=(0,b._)(),o=(0,b.M)(e=>e.loadFirstPage),u=(0,b.M)(e=>e.listPageToken);(0,n.useEffect)(()=>{0===i.length&&o()},[o,i.length]);let x=(0,b.M)(e=>e.listStatus),m=(0,b.M)(e=>e.loadNextPage),h=(0,n.useCallback)(()=>{u&&"loading"!==x&&m()},[u,x,m]),g=(0,ed.B)(h);if("loading"===x&&0===i.length)return(0,r.jsx)(eF,{});if("error"===x)return(0,r.jsx)(eV,{onRetry:o});let f=(0,c.cn)("pb-8",t);if(0===i.length)return(0,r.jsxs)(l.Zp,{variant:"ghost",className:"p-6 flex flex-col items-center",children:[(0,r.jsx)(A.XR,{size:16,className:"text-secondary"}),(0,r.jsx)("div",{children:s("workspace-list-empty.title","No projects yet")}),(0,r.jsx)("div",{className:"text-secondary",children:s("workspace-list-empty.subtitle","Create a new project")})]});let v=()=>{a.logEvent("ws_nav_click",void 0,{location:"workspaces"})};return(0,r.jsxs)("div",{"data-testid":"workspaces-list",className:f,children:[(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:i.map(e=>(0,r.jsx)(E,{workspace:e,onClick:v},e.workspaceId))}),u&&(0,r.jsx)("div",{ref:g,className:"text-center mt-8",children:"loading"===x?s("workspaces-loading.label","Loading more"):s("workspaces-scrollto.label","Scroll to load more")})]})}function eV(e){let{onRetry:t}=e,{t:a}=(0,p.Bd)("workspace");return(0,r.jsxs)(l.Zp,{variant:"ghost",className:"p-8 flex flex-col gap-4 items-center text-center",children:[(0,r.jsx)(eB.A,{className:"size-4"}),a("workspaces-error.description","An issue occurred when loading your projects"),(0,r.jsx)(i.$n,{variant:"outline",className:"shadow-none",onClick:t,children:a("workspaces-error.cta","Try again")})]})}function eF(){return(0,r.jsx)(z.P,{children:(0,r.jsxs)("div",{className:"flex flex-col @sm:flex-row gap-3",children:[(0,r.jsx)(eU,{}),(0,r.jsx)(eU,{}),(0,r.jsx)(eU,{})]})})}function eU(){return(0,r.jsxs)(l.Zp,{variant:"ghost",className:"flex-1 rounded-xl p-4 flex @sm:flex-col items-center  @sm:items-start gap-4",children:[(0,r.jsx)(D.E,{className:"bg-surface-l1 w-8 h-8 rounded-full"}),(0,r.jsx)(D.E,{className:"bg-surface-l1 w-32 h-4"})]})}function eZ(){let{client:e}=(0,d.useStatsigClient)(),{t}=(0,p.Bd)("workspace");return(0,H.r)(t("workspaces-page-title","Projects")),(0,r.jsx)(B,{children:(0,r.jsxs)("main",{className:"w-full h-full flex flex-col",children:[(0,r.jsx)("div",{children:(0,r.jsxs)("div",{className:"flex justify-between align-center my-6 min-h-[42px]",children:[(0,r.jsx)("h1",{className:"text-2xl flex gap-2 items-center font-semibold",children:t("workspaces-page.title","Projects")}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(eO,{onClick:()=>{e.logEvent("ws_create_click",void 0,{location:"workspaces"})}})})]})}),(0,r.jsx)(Y.D,{children:(0,r.jsx)(eK,{})})]})})}},41284:(e,t,a)=>{a.d(t,{e:()=>d});var s=a(79342),n=a(61312),r=a(61389),i=a(88382);let l=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(r.bL,{ref:t,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full border border-border hover:opacity-75 transition-[opacity,width,height] duration-150",a),...i})});l.displayName=r.bL.displayName;let o=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(r._V,{ref:t,className:(0,n.cn)("aspect-square h-full w-full",a),...i})});o.displayName=r._V.displayName;let c=i.forwardRef((e,t)=>{let{className:a,...i}=e;return(0,s.jsx)(r.H4,{ref:t,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full",a),...i})});c.displayName=r.H4.displayName;let d=e=>{let{className:t,textClassName:a,user:r}=e,d=(0,i.useMemo)(()=>[null==r?void 0:r.givenName,null==r?void 0:r.familyName].map(e=>null==e?void 0:e[0]).join("").substring(0,2),[r]);return(0,s.jsxs)(l,{className:t,children:[(0,s.jsx)(o,{src:null==r?void 0:r.profileImageUrl,alt:"pfp"}),(0,s.jsx)(c,{className:(0,n.cn)("bg-surface-l4 text-fg-primary shadow-sm dark:shadow-none border-border-l1",a),children:d})]})}},44566:(e,t,a)=>{a.d(t,{x:()=>l});var s=a(70526),n=a(20337),r=a(65146),i=a(14908);function l(e){let{t}=(0,r.Bd)("workspace"),{client:a}=(0,n.useStatsigClient)();return()=>{i.oR.error(t("files-limit-error","Max number of files allowed is {{maxNumberOfFiles}}",{maxNumberOfFiles:s.aD})),a.logEvent("workspace_file_limit_exceeded",e,{maxFiles:s.aD.toString(10)})}}},46748:(e,t,a)=>{a.d(t,{r:()=>r});var s=a(88382),n=a(65146);function r(e){let{t}=(0,n.Bd)("base");(0,s.useEffect)(()=>{document.title=e?t("browser-page-title",{defaultValue:"{{pageTitle}} - Grok",pageTitle:e}):"Grok"},[e,t])}},47095:(e,t,a)=>{a.d(t,{O:()=>l});var s=a(79342),n=a(3547),r=a(92372),i=a(31651);function l(e){let{icon:t,className:a,size:l}=e;if(!t)return(0,s.jsx)(r.XR,{className:a,size:l});let o=(0,i.c)(t);return o?(0,s.jsx)(n.Ln,{value:o,className:a,size:l}):(0,s.jsx)(r.XR,{className:a,size:l})}},51789:(e,t,a)=>{a.d(t,{q:()=>ec,C:()=>em});var s=a(79342),n=a(97325),r=a(63209),i=a(1826),l=a(97225),o=a(80354),c=a(84969),d=a(33846),u=a(88382);let p=(0,u.createContext)({collapsed:!1,setCollapsed:e=>{}}),x=()=>(0,u.useContext)(p);function m(e){let{trigger:t,content:a,hasContent:n,onClick:r}=e,{open:x}=(0,l.cL)(),[m,h]=(0,u.useState)(!1);(0,u.useEffect)(()=>{h(!1)},[n]);let g=u.cloneElement(t,{onClick:e=>{r&&r(),e.stopPropagation()}}),f=(0,u.useCallback)(()=>{h(!0)},[]);return(0,s.jsxs)(p.Provider,{value:{collapsed:m,setCollapsed:h},children:[!x&&(0,s.jsxs)(i.AM,{children:[g,(0,s.jsx)(i.hl,{className:"p-1.5 rounded-2xl flex flex-col gap-0.5 w-60 z-[50]",side:"right",align:"start",hoverOpen:!0,sideOffset:3,closeOnClick:!0,onClick:o.Y,children:a})]}),x&&g,(0,s.jsx)(c.N,{children:x&&!m&&n&&(0,s.jsx)(d.P.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.1,ease:"easeInOut"},style:{overflow:"hidden"},children:(0,s.jsx)(l.G,{onClickIndent:f,children:a})},"drawer-content")})]})}var h=a(92372),g=a(56691),f=a(4295),v=a(61312);function j(e){let{Icon:t}=e,{open:a}=(0,l.cL)(),{collapsed:n,setCollapsed:r}=x(),i=(0,f.c)(),o=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),a?r(!n):r(!1)},[a,n,r]);return a?(0,s.jsxs)(g.$n,{variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:o,"aria-label":"Toggle Menu",children:[(0,s.jsx)(t,{className:(0,v.cn)("group-hover/menu-item:hidden",i&&"hidden"),size:18}),(0,s.jsx)(h.vK,{className:(0,v.cn)("hidden group-hover/menu-item:block transition-[transform] duration-100",i&&"block",!n&&"rotate-90"),size:14})]}):(0,s.jsx)(t,{size:18})}var b=a(41320),y=a(84499);function w(e){let{icon:t,text:a,tooltip:n,route:r,onClick:o,children:c,action:p,canPopover:x,highlighted:m}=e,{open:h,setOpen:g}=(0,l.cL)(),f=(0,b.Di)(),j=(0,u.useCallback)(e=>{e.stopPropagation(),null==o||o(e),r&&f&&g(!1)},[o,f,g,r]),w=r?(0,s.jsxs)(y.N_,{className:(0,v.cn)("w-full flex flex-row gap-1",l.jy,"text-sm text-secondary",m?"bg-button-ghost-hover":"border-transparent"),route:r,onClick:j,children:[(0,s.jsx)(l.CP,{children:t}),h&&(0,s.jsx)(d.P.span,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.1,ease:"easeInOut"},children:a}),c]}):(0,s.jsxs)("div",{role:"button",tabIndex:0,"aria-label":a,className:(0,v.cn)("w-full flex flex-row justify-start gap-1 bg-background text-secondary text-sm rounded-xl",l.jy),onClick:o,children:[(0,s.jsx)(l.CP,{children:t}),h&&(0,s.jsx)(d.P.span,{initial:{opacity:1},exit:{opacity:0},transition:{duration:.1,ease:"easeInOut"},children:a}),c]}),C=!h&&x?(0,s.jsx)(i.Wv,{asChild:!0,hoverOpen:!0,tabIndex:-1,children:w}):w;return(0,s.jsxs)(l.FX,{className:"relative",children:[(0,s.jsx)(l.Uj,{className:(0,v.cn)(r||!h?"":"hover:bg-transparent active:bg-transparent cursor-default hover:text-fg-secondary"),tooltip:n,safeArea:!0,asChild:!0,children:C}),h&&p&&(0,s.jsx)("span",{className:"absolute top-1/2 right-1.5 -translate-y-1/2",children:p})]})}var C=a(65258);class k{constructor(e,t){this.set=e,this.get=t,this.setCurrentAction=(0,C.kp)(this.set,"currentAction")}}let N=(0,C.y$)(k,"useAppSidebarStore");var S=a(92207),I=a(72712);let _=e=>(0,s.jsx)(I.I,{...e,children:(0,s.jsx)("path",{d:"M4 20L8.5 15.5M14 20L4 10L5 9L9.06551 8.32242C10.2858 8.11904 11.3433 7.36248 11.9298 6.27324L13.2256 3.86676C13.8608 2.68717 15.4534 2.45342 16.4007 3.40075L20.5993 7.59926C21.5466 8.54658 21.3128 10.1392 20.1332 10.7744L17.7268 12.0702C16.6375 12.6567 15.881 13.7142 15.6776 14.9345L15 19L14 20Z",stroke:"currentColor",strokeLinecap:"square"})});var A=a(12001),M=a(42557),P=a(35692),E=a(73772),z=a(3209),L=a(26676),T=a(75500),D=a(91102),H=a(12065),R=a(35181),O=a(24734),B=a(2280),K=a(27636),V=a(17703),F=a(40873),U=a(13027),Z=a(49972),G=a(87891),$=a(73304),W=a(3683),X=a(20337),Y=a(28205),Q=a(80864),q=a(51234),J=a(21185),ee=a(84810),et=a(38541),ea=a.n(et),es=a(19717),en=a(82263),er=a(66347),ei=a(74995),el=a(65146),eo=a(51182);function ec(){let{t:e}=(0,el.Bd)("base"),{open:t,setOpen:a,toggleSidebar:i}=(0,l.cL)(),p=(0,T.h)(),{client:x}=(0,X.useStatsigClient)(),f=!!(0,M.wV)().user,{commandPrefix:C}=(0,D.c)(),k=(0,b.Di)();(0,u.useEffect)(()=>{k&&a(!1)},[k]);let N=(0,Z.w)(e=>e.fetchListConversations);(0,R.v)(N()),(0,R.v)(N({filterIsStarred:!0}));let I=(0,Z.w)(e=>e.byId),_=(0,u.useMemo)(()=>Object.values(I).map(e=>e.conversationId),[I]),A=(0,Z.w)(e=>e.fetchGetManyConversations),P=(0,u.useMemo)(()=>A(_),[_]),{data:E}=(0,R.v)(P,{preserveValue:!0}),L=(0,u.useMemo)(()=>{if(!E)return[];let e=E.filter(e=>!e.temporary).filter(e=>0===e.workspaces.length).filter(e=>!e.taskResultId);return ea().sortBy(e,e=>-new Date(e.modifyTime).getTime())},[E]),{sortedBuckets:H,bucketedConversations:O}=(0,u.useMemo)(()=>{let e=ea().groupBy(L,e=>{let t=e.modifyTime;return e.starred?"Pinned":(0,Y.c)(t)?"Today":(0,Q.P)(t)?"Yesterday":(0,q.x)(t)?"This Week":(0,J.e)(t)?(0,ee.GP)(t,"MMMM"):(0,ee.GP)(t,"yyyy")}),t={Pinned:0,Today:1,Yesterday:2,"This Week":3,"This Month":4},a=ea().sortBy(Object.keys(e),a=>{var s,n;let r=t[a];return null!=r?r:new Date(null==(n=e[a])||null==(s=n[0])?void 0:s.modifyTime).getTime()}),s=10,n=a.reduce((t,a)=>{var n,r,i;if(s<=0)return t;let l=null!=(r=null==(n=e[a])?void 0:n.length)?r:0;return l&&("Pinned"!==a&&(s-=l),s<=0?t[a]=null==(i=e[a])?void 0:i.slice(0,l+s):t[a]=e[a]),t},{});return{sortedBuckets:a,bucketedConversations:n}},[L]),{push:K}=(0,y.wK)(),U=(0,W.M)(e=>e.loadFirstPage);(0,u.useEffect)(()=>{U().catch((0,V.HX)("app-sidebar:load-workspaces"))},[U]);let $=(0,W.M)((0,eo.k)(e=>e.list.map(t=>{var a;return null==(a=e.byId[t])?void 0:a.data}).filter(F.O))),{route:et}=(0,y.wK)(),en=(0,u.useCallback)(e=>{if("chat"===et.page){let{setOptimisticConversationId:e,setConversationId:t,setSidePanelContent:a}=n.aP.getState();e(void 0),t(void 0),a(void 0)}},[et.page]),er=(0,n.aP)(e=>e.conversationId),ei=(0,Z.w)(e=>{var t;return!!er&&(null==(t=e.byId[er])?void 0:t.temporary)}),ec=(0,u.useMemo)(()=>"chat"===et.page||"files"===et.page?{page:"main"}:{page:"chat",conversationId:null!=er?er:null,temporary:ei},[er,ei,et.page]),eu=(0,u.useCallback)(()=>{let{setSidePanelContent:e}=n.aP.getState();e(void 0)},[]),eh=(0,u.useRef)(null),eg=(0,B.tg)({ref:eh}),{add:ef}=(0,z.O)(),ev=(0,u.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),ef().catch((0,V.HX)("app-sidebar:create-workspace"))},[ef]),ej=(0,u.useCallback)(e=>{k&&a(!1)},[k,a]),eb=(0,u.useCallback)(()=>a(!1),[a]),ey=(0,u.useCallback)(()=>a(!0),[a]),[ew,eC]=(0,u.useState)(null);(0,u.useEffect)(()=>{if("files"===et.page){var e;eC(null!=(e=et.fileId)?e:null)}},[et]);let ek=(0,G.R)(e=>{var t,a,s;if(!ew||"files"===et.page&&et.fileId)return null;let n=e.currentVersion[ew];return null!=(s=null==(a=e.assetsById[n])||null==(t=a.data)?void 0:t.assetId)?s:null});return(0,s.jsxs)(l.Bx,{className:(0,v.cn)("z-20 bg-surface-base border-r border-border-l1",t?"cursor-w-resize":"cursor-e-resize"),collapsible:k?"offcanvas":"icon",variant:k?"floating":"sidebar",onClick:i,children:[(0,s.jsx)(l.Gh,{className:(0,v.cn)("mb-2 mt-1 pt-3 pe-2 cursor-default",l.y$),onClick:o.Y,children:(0,s.jsxs)("div",{className:(0,v.cn)("relative flex flex-row"),children:[(0,s.jsx)(r.C9,{alwaysSmall:!0,className:"relative z-10 bg-surface-base block w-fit",onClick:ej}),t&&(0,s.jsx)("div",{className:"grow cursor-w-resize",onClick:eb})]})}),(0,s.jsxs)(l.Yv,{ref:eh,className:(0,v.cn)("relative overflow-x-hidden",t&&"scrollbar-gutter-stable-single"),style:{...eg},children:[(0,s.jsx)(l.Cn,{className:"my-1",children:(0,s.jsxs)(l.Uj,{"aria-label":e("sidebar-search","Search"),className:(0,v.cn)("py-2.5","ps-[10px] pe-[10px]","rounded-full border border-border-l1","bg-surface-l1 justify-start","text-secondary",l.b,l.hV),onClick:e=>{e.preventDefault(),e.stopPropagation(),S.H0.getState().openMenu(),x.logEvent("opened_command_menu",void 0,{location:"app-sidebar:search"})},children:[(0,s.jsx)(h.WI,{size:18}),(0,s.jsx)(c.N,{children:t&&(0,s.jsxs)(d.P.span,{className:"space-x-1 align-baseline",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1,easing:"easeInOut"},children:[(0,s.jsx)("span",{children:e("sidebar-search","Search")}),!k&&(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:C?"".concat(C,"K"):""})]})})]})}),(0,s.jsx)(l.Cn,{children:(0,s.jsx)(l.wZ,{children:(0,s.jsx)(w,{icon:(0,s.jsx)(h.cJ,{size:18}),text:e("sidebar-chat-nav","Chat"),route:ec,onClick:en,tooltip:e("sidebar-chat-nav","Chat"),highlighted:"chat"===et.page&&!et.conversationId||"main"===et.page})})}),p.ENABLE_FILES_PAGE&&(0,s.jsx)(l.Cn,{children:(0,s.jsx)(l.wZ,{children:(0,s.jsx)(w,{icon:(0,s.jsx)(h.py,{size:18}),text:e("sidebar-files-nav","Files"),route:{page:"files",fileId:ek},onClick:eu,tooltip:e("sidebar-files-nav","Files"),highlighted:"files"===et.page})})}),p.ENABLE_GROK_TASKS&&f&&(0,s.jsx)(l.Cn,{className:(0,v.cn)(""),children:(0,s.jsx)(l.wZ,{children:(0,s.jsx)(ed,{open:t,highlighted:"tasks"===et.page})})}),p.ENABLE_IMAGE_TAB&&(0,s.jsx)(l.Cn,{children:(0,s.jsx)(l.wZ,{children:(0,s.jsx)(w,{icon:(0,s.jsx)(h.xf,{size:18}),text:e("sidebar-images-nav","Images"),route:{page:"images",tab:"explore"},tooltip:e("sidebar-images-nav","Images"),highlighted:"images"===et.page})})}),(0,s.jsx)(l.Cn,{className:(0,v.cn)(""),children:(0,s.jsx)(l.wZ,{children:(0,s.jsx)(m,{trigger:(0,s.jsx)(w,{icon:(null==$?void 0:$.length)?(0,s.jsx)(j,{Icon:h.XR}):(0,s.jsx)(h.XR,{size:18}),action:(0,s.jsx)(g.$n,{className:"ms-auto opacity-0 group-hover/menu-item:opacity-100 transition-opacity duration-100",variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:ev,"aria-label":e("sidebar-create-workspace-button.label","Create new project"),children:(0,s.jsx)(es.A,{size:14})}),text:e("sidebar-workspaces-nav","Projects"),route:{page:"workspaces"},canPopover:!0,highlighted:"workspaces"===et.page}),hasContent:!!(null==$?void 0:$.length),content:(0,s.jsxs)(s.Fragment,{children:[!t&&(0,s.jsxs)("div",{className:"w-full flex justify-between items-center gap-1 pl-3 pr-1.5 py-1 text-sm text-secondary font-semibold sticky top-0",children:[(0,s.jsx)("div",{className:(0,v.cn)(""),children:e("sidebar-workspaces-nav","Projects")}),(0,s.jsx)(g.$n,{variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:ev,"aria-label":e("Create Project","Create Project"),children:(0,s.jsx)(es.A,{size:14})})]}),!t&&!(null==$?void 0:$.length)&&(0,s.jsx)(em,{content:e("No projects yet","No projects yet"),ctaText:e("Create Project","Create Project"),onClickCta:ev},"no-workspaces"),!!(null==$?void 0:$.length)&&$.slice(0,5).map(e=>(0,s.jsx)(ex,{workspaceId:e.workspaceId,showActions:t},e.workspaceId)),$.length>0&&(0,s.jsx)(g.$n,{tabIndex:-1,variant:"textSecondary",size:"none",className:"w-full justify-start px-3 text-xs font-semibold no-wrap pb-2 mt-1",onClick:()=>{K({page:"workspaces"}),x.logEvent("opened_command_menu",void 0,{location:"app-sidebar:recent-chats"})},children:e("See all","See all")})]}),collapsible:!0})})}),(0,s.jsx)(l.Cn,{className:(0,v.cn)(""),children:(0,s.jsx)(l.wZ,{children:(0,s.jsx)(m,{hasContent:!!H.length,trigger:(0,s.jsx)(w,{icon:(null==H?void 0:H.length)?(0,s.jsx)(j,{Icon:h.HG}):(0,s.jsx)(h.HG,{size:18}),text:e("History","History"),canPopover:!0}),content:(0,s.jsxs)(s.Fragment,{children:[!t&&(0,s.jsx)("div",{className:(0,v.cn)("py-1 pl-3 text-sm text-secondary font-semibold sticky top-0"),children:e("History","History")}),!t&&0===H.length&&(0,s.jsx)(em,{content:e("No chats","No chats")},"no-recent-chats"),H.length>0&&H.map(e=>{let a=O[e]||[];if(0===a.length)return null;let n=ea().orderBy(a,[e=>e.createTime],["desc"]);return(0,s.jsxs)(u.Fragment,{children:[(0,s.jsx)("div",{className:(0,v.cn)("py-1 pl-3 text-xs text-fg-primary sticky top-0 z-20 text-nowrap"),children:e}),n.map(e=>(0,s.jsx)(ep,{conversation:e,showActions:t},e.conversationId))]},e)}),H.length>0&&(0,s.jsx)(g.$n,{tabIndex:-1,variant:"textSecondary",size:"none",className:"w-full justify-start px-3 text-xs font-semibold no-wrap pb-2 mt-1",onClick:()=>{S.H0.getState().openMenu(),x.logEvent("opened_command_menu",void 0,{location:"app-sidebar:recent-chats"})},children:e("See all","See all")})]}),collapsible:!0,onClick:t?void 0:ey})})})]}),(0,s.jsxs)(l.CG,{className:(0,v.cn)("relative shrink-0",t?"h-[56px]":"h-[96px]"),children:[(0,s.jsx)("div",{className:(0,v.cn)("absolute bottom-3",l.vd),style:{transform:t?"translateY(0)":"translateY(-44px)",transitionProperty:"transform",transitionDuration:"300ms"},children:(0,s.jsx)(r.IO,{})}),(0,s.jsx)(l.x2,{className:(0,v.cn)("absolute end-2 bottom-3"),iconSize:18})]})]})}function ed(e){var t,a;let{open:n,highlighted:r}=e,{t:i}=(0,el.Bd)("base"),l=(0,T.h)(),o=(0,$.d)(ei.A("handleSetCreateDialog")),{client:c}=(0,X.useStatsigClient)(),{push:p}=(0,y.wK)(),{getUserTasksQuery:x}=(0,K.ek)(),{data:f}=x,b=(0,u.useMemo)(()=>{var e,t;return null!=(t=null==f||null==(e=f.unreadResults)?void 0:e.filter(e=>!e.isRead&&e.status===U.cn.TaskResultSuccess).slice(0,3))?t:[]},[null==f?void 0:f.unreadResults]),C=(null==f||null==(a=f.unreadResults)||null==(t=a.at(0))?void 0:t.isRead)===!1&&f.unreadResults.length>0,k=(0,u.useCallback)(()=>{c.logEvent("clicked_add_new_task",void 0,{location:"tasks-nav-button"}),o(!0)},[o,c]);return(0,s.jsx)(m,{collapsible:!0,trigger:(0,s.jsx)(w,{icon:b.length&&l.SHOW_SIDEBAR_TASK_CHATS?(0,s.jsx)(j,{Icon:h.HE}):(0,s.jsx)(h.HE,{size:18}),text:i("sidebar-tasks-label","Tasks"),route:{page:"tasks",taskId:null,tab:null},action:(0,s.jsx)(g.$n,{className:"ms-auto opacity-0 group-hover/menu-item:opacity-100 transition-opacity duration-100",variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:k,"aria-label":i("create-task","Create task"),children:(0,s.jsx)(es.A,{size:14})}),canPopover:!0,highlighted:r,children:C&&(0,s.jsx)(d.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.2},children:(0,s.jsx)(P.x,{variant:"sm",className:(0,v.cn)("absolute",n?"top-[50%] -translate-y-1/2":"right-[6px] top-[6px]")})})}),hasContent:b.length>0&&l.SHOW_SIDEBAR_TASK_CHATS,content:(0,s.jsxs)(s.Fragment,{children:[!n&&(0,s.jsxs)("div",{className:"w-full flex justify-between items-center gap-1 pl-3 pr-1.5 py-1 text-sm text-secondary font-semibold sticky top-0",children:[(0,s.jsx)("div",{className:(0,v.cn)(""),children:i("sidebar-tasks-nav","Tasks")}),(0,s.jsx)(g.$n,{variant:"ghostSecondary",size:"iconXs",rounded:!0,onClick:k,"aria-label":i("create-task","Create task"),children:(0,s.jsx)(es.A,{size:14})})]}),!n&&!(null==b?void 0:b.length)&&(0,s.jsx)(em,{content:i("No unread task results","No unread task results")},"no-workspaces"),(0,s.jsx)("div",{className:"w-full flex flex-col gap-1",children:(null==b?void 0:b.length)>0&&b.map(e=>(0,s.jsx)(eu,{taskResult:e},e.taskResultId))}),n&&(null==f?void 0:f.tasks)&&f.tasks.length>0&&(0,s.jsx)(g.$n,{tabIndex:-1,variant:"textSecondary",size:"none",className:"w-full justify-start px-3 text-xs font-semibold no-wrap pb-2 mt-1",onClick:()=>{p({page:"tasks",taskId:null,tab:null})},children:i("See all","See all")})]})})}function eu(e){var t;let{taskResult:a}=e,{t:n}=(0,el.Bd)("base"),{client:r}=(0,X.useStatsigClient)(),i=(0,u.useCallback)(()=>{r.logEvent("clicked_task_result",void 0,{location:"tasks-nav-button"})},[r]),c=(0,b.Di)(),{setOpen:d}=(0,l.cL)(),p=(0,u.useCallback)(e=>{c&&d(!1),(0,o.Y)(e)},[c,d]),x=(0,u.useMemo)(()=>a.title?a.title:a.createTime?n("Task result on date","Task result on {{date}}",{date:new Date(a.createTime).toLocaleDateString()}):n("New task result","New task result"),[a.createTime,a.title,n]);return(0,s.jsx)(l.Uj,{asChild:!0,heightClassName:l.Zr,onClick:i,children:(0,s.jsxs)(y.N_,{className:(0,v.cn)("group/task-item pl-3 pr-4 py-1 text-sm","w-full flex  gap-3 text-fg-primary"),route:{page:"chat",conversationId:null!=(t=a.conversationId)?t:null,temporary:!1},onClick:p,tooltip:x,tooltipContentProps:{side:"right",sideOffset:8},children:[(0,s.jsx)("span",{className:(0,v.cn)("flex-1 select-none text-nowrap max-w-full overflow-hidden inline-block"),style:{maskImage:B.uU,WebkitMaskImage:B.uU},children:x}),(0,s.jsx)(P.x,{variant:"sm"})]})})}function ep(e){let{conversation:t,showActions:a=!0}=e,{t:r}=(0,el.Bd)("base"),{client:i}=(0,X.useStatsigClient)(),{handlePinConversation:p}=(0,H.c)(),x=(0,O.K)(),m=(0,u.useMemo)(()=>t.title?t.title:t.createTime?r("Chat on date","Chat on {{date}}",{date:new Date(t.createTime).toLocaleDateString()}):r("Untitled Chat","Untitled Chat"),[t.createTime,t.title,r]),[f,j]=(0,u.useState)(m),w=N(e=>e.currentAction),C=(null==w?void 0:w.type)==="edit-conversation"&&w.conversationId===t.conversationId,k=(0,u.useCallback)(()=>{let{setCurrentAction:e}=N.getState();e(void 0)},[]),S=(0,u.useCallback)((e,t,a)=>{let{fetchUpdateConversation:s}=Z.w.getState();s(e,{title:t,starred:a}).catch(e=>{x("app-sidebar:handleUpdateConversation",e)})},[x]),{route:I,push:M}=(0,y.wK)(),P=(0,n.aP)(ei.A("conversationId")),z="chat"===I.page&&P===t.conversationId,L=(0,u.useCallback)(()=>{let{fetchSoftDeleteConversation:e}=Z.w.getState();e(t.conversationId).catch(e=>{x("app-sidebar:handleDeleteConversation",e)}),z&&M({page:"main"})},[t.conversationId,x,z,M]),T=(0,u.useCallback)(()=>{let{setCurrentAction:e}=N.getState();e({type:"edit-conversation",conversationId:t.conversationId}),G(!1)},[t.conversationId]),D=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),("click"===e.type||e instanceof KeyboardEvent&&"Enter"===e.key)&&S(t.conversationId,f.trim(),t.starred);let{setCurrentAction:a}=N.getState();a(void 0),i.logEvent("update_conversation_name",t.conversationId,{location:"app-sidebar"})},[S,t.conversationId,f,t.starred,i]),R=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),j(e.target.value)},[]),K=(0,u.useCallback)(e=>{if("Enter"===e.key){let{setCurrentAction:e}=N.getState();S(t.conversationId,f.trim(),t.starred),e(void 0),i.logEvent("update_conversation_name",t.conversationId,{location:"app-sidebar"})}else"Escape"===e.key&&k()},[k,S,t.conversationId,f,t.starred,i]),V=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),k()},[k]),F=(0,u.useCallback)(()=>{p(t.conversationId,!t.starred,"app-sidebar")},[t.conversationId,t.starred,p]),[U,G]=(0,u.useState)(!1),$=(0,b.Di)(),{setOpen:W}=(0,l.cL)(),Y=(0,u.useCallback)(e=>{$&&W(!1),(0,o.Y)(e)},[$,W]),Q=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault()},[]),q=(0,u.useCallback)(e=>{C&&(e.stopPropagation(),e.preventDefault())},[C]),J=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),k()},[k]);return(0,s.jsx)(c.N,{children:(0,s.jsx)(d.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:(0,s.jsx)(l.Uj,{asChild:!0,highlighted:z,allowActive:!C,heightClassName:l.Zr,children:(0,s.jsxs)(y.N_,{className:(0,v.cn)("group/conversation-item pl-3 pr-1.5 py-1 text-sm","w-full flex flex-row gap-2 text-secondary"),route:{page:"chat",conversationId:t.conversationId,temporary:t.temporary},onClick:Y,tooltip:m,tooltipContentProps:{side:"right",sideOffset:8},showTooltip:!C&&!U,onDragStart:q,children:[C?(0,s.jsx)("input",{className:"w-full bg-transparent focus-visible:outline-none",value:f,onKeyDown:K,onChange:R,onClick:Q,onBlur:J,autoFocus:!0}):(0,s.jsx)("span",{className:(0,v.cn)("flex-1 select-none text-nowrap max-w-full overflow-hidden inline-block"),style:{maskImage:B.uU,WebkitMaskImage:B.uU},children:m}),a&&(C?(0,s.jsxs)("div",{className:(0,v.cn)("flex","items-center justify-end gap-0.5"),children:[(0,s.jsx)(g.gx,{variant:"ghost",size:"iconXs",rounded:!0,onClick:V,tooltipContent:r("Cancel","Cancel"),tooltipContentProps:{hideWhenDetached:!0},children:(0,s.jsx)(h.uv,{size:14,className:"text-fg-primary"})}),(0,s.jsx)(g.gx,{variant:"ghost",size:"iconXs",rounded:!0,onClick:D,tooltipContent:r("Save","Save"),tooltipContentProps:{hideWhenDetached:!0},children:(0,s.jsx)(en.A,{size:14,className:"text-fg-primary"})})]}):(0,s.jsxs)(E.rI,{onOpenChange:G,children:[(0,s.jsx)(E.ty,{asChild:!0,children:(0,s.jsx)(g.$n,{variant:"ghost",size:"iconXs",className:(0,v.cn)("hidden group-hover/conversation-item:flex text-fg-secondary",U&&"flex"),rounded:!0,children:(0,s.jsx)(er.A,{size:14})})}),(0,s.jsxs)(E.SQ,{side:"right",align:"start",sideOffset:6,alignOffset:-8,className:"min-w-36 space-y-0.5",onClick:o.Y,children:[(0,s.jsxs)(E._2,{className:(0,v.cn)("text-fg-secondary"),onClick:T,children:[(0,s.jsx)(h.rZ,{size:16,className:"me-2"}),r("Rename","Rename")]}),(0,s.jsxs)(E._2,{className:(0,v.cn)("text-fg-secondary"),onClick:F,children:[t.starred?(0,s.jsx)(A.A,{size:16,className:"me-2"}):(0,s.jsx)(_,{size:16,className:"me-2"}),t.starred?r("Unpin","Unpin"):r("Pin","Pin")]}),(0,s.jsxs)(E._2,{className:(0,v.cn)("text-fg-secondary"),onClick:L,children:[(0,s.jsx)(h.uc,{size:16,className:"me-2"}),r("Delete","Delete")]})]})]}))]})})},t.conversationId)})}function ex(e){let{workspaceId:t,showActions:a=!0}=e,{route:n,push:r}=(0,y.wK)(),{t:i}=(0,el.Bd)("base"),{client:c}=(0,X.useStatsigClient)(),d=(0,W.M)(e=>{var a;return null==(a=e.byId[t])?void 0:a.data}),[p,x]=(0,u.useState)((null==d?void 0:d.name)||"");(0,u.useEffect)(()=>{var e;x(null!=(e=null==d?void 0:d.name)?e:"")},[null==d?void 0:d.name]);let m=N(e=>e.currentAction),f=(null==m?void 0:m.type)==="edit-workspace"&&m.workspaceId===t,j="workspace"===n.page&&n.workspaceId===t,w=(0,u.useCallback)(()=>{let{setCurrentAction:e}=N.getState();e(void 0);let a=p.trim();if(""===a)return;c.logEvent("update_workspace_name",t,{location:"app-sidebar"});let{updateWorkspace:s}=W.M.getState();s(t,{name:a})},[p,c,t]),C=(0,u.useCallback)(()=>{let{setCurrentAction:e}=N.getState();e(void 0)},[]),k=(0,u.useCallback)(()=>{let{setCurrentAction:e}=N.getState();e({type:"edit-workspace",workspaceId:t}),T(!1)},[t]),S=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),("click"===e.type||e instanceof KeyboardEvent&&"Enter"===e.key)&&w()},[w]),I=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),x(e.target.value)},[]),_=(0,u.useCallback)(e=>{"Enter"===e.key?w():"Escape"===e.key&&C()},[C,w]),A=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),C()},[C]),M=(0,u.useCallback)(e=>{let{updateWorkspace:a}=W.M.getState();a(t,{icon:e})},[t]),P=(0,u.useCallback)(()=>{t&&(W.M.getState().deleteWorkspace(t),"workspace"===n.page&&n.workspaceId===t&&r({page:"workspaces"}))},[t,n,r]),[z,T]=(0,u.useState)(!1),D=(0,b.Di)(),{setOpen:H}=(0,l.cL)(),R=(0,u.useCallback)(e=>{D&&H(!1),(0,o.Y)(e)},[D,H]),O=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault()},[]),K=(0,u.useCallback)(e=>{f&&(e.stopPropagation(),e.preventDefault())},[f]),V=(0,u.useCallback)(e=>{e.stopPropagation(),e.preventDefault(),C()},[C]);return(0,s.jsx)(l.Uj,{asChild:!0,highlighted:j,allowActive:!f,heightClassName:l.Zr,children:(0,s.jsxs)(y.N_,{className:(0,v.cn)("group/conversation-item pl-2 pr-1.5 py-1 text-sm","w-full flex flex-row !gap-1 text-primary"),route:{page:"workspace",workspaceId:t,tab:"conversations"},onClick:R,onDragStart:K,children:[(0,s.jsx)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation()},children:(0,s.jsx)(L.n,{icon:null==d?void 0:d.icon,sizeClass:"size-4",onChange:M,rounded:!0,buttonSize:"iconXs",disabled:!a})}),f?(0,s.jsx)("input",{className:"w-full bg-transparent focus-visible:outline-none",value:p,onKeyDown:_,onChange:I,onClick:O,onBlur:V,autoFocus:!0}):(0,s.jsx)("span",{className:(0,v.cn)("flex-1 select-none text-nowrap max-w-full overflow-hidden inline-block"),style:{maskImage:B.uU,WebkitMaskImage:B.uU},children:p}),a&&(f?(0,s.jsxs)("div",{className:(0,v.cn)("flex","items-center justify-end gap-0.5"),children:[(0,s.jsx)(g.gx,{variant:"ghost",size:"iconXs",rounded:!0,onClick:A,tooltipContent:i("Cancel","Cancel"),tooltipContentProps:{hideWhenDetached:!0},children:(0,s.jsx)(h.uv,{size:14,className:"text-fg-primary"})}),(0,s.jsx)(g.gx,{variant:"ghost",size:"iconXs",rounded:!0,onClick:S,tooltipContent:i("Save","Save"),tooltipContentProps:{hideWhenDetached:!0},children:(0,s.jsx)(en.A,{size:14,className:"text-fg-primary"})})]}):(0,s.jsxs)(E.rI,{onOpenChange:T,children:[(0,s.jsx)(E.ty,{asChild:!0,children:(0,s.jsx)(g.$n,{variant:"ghost",size:"iconXs",rounded:!0,"aria-label":i("sidebar-workspace-menu-open.label","Show project menu"),className:(0,v.cn)("hidden group-hover/conversation-item:flex",z&&"flex"),children:(0,s.jsx)(er.A,{size:14})})}),(0,s.jsxs)(E.SQ,{side:"right",align:"start",sideOffset:6,alignOffset:-8,className:"min-w-36 space-y-0.5",onClick:o.Y,children:[(0,s.jsxs)(E._2,{className:(0,v.cn)("text-fg-secondary"),onClick:k,children:[(0,s.jsx)(h.rZ,{size:16,className:"me-2"}),i("Rename","Rename")]}),(0,s.jsxs)(E._2,{className:(0,v.cn)("text-fg-secondary"),onClick:P,children:[(0,s.jsx)(h.uc,{size:14,className:"me-2"}),i("Delete","Delete")]})]})]}))]})})}function em(e){let{content:t,ctaText:a,onClickCta:n}=e;return(0,s.jsxs)("div",{className:(0,v.cn)("h-[140px] flex flex-col gap-2 items-center justify-center","-mt-8"),children:[(0,s.jsx)("span",{className:"text-xs text-secondary",children:t}),a&&n&&(0,s.jsx)(g.$n,{variant:"outline",size:"sm",className:"rounded-xl",onClick:n,children:a})]})}},54344:(e,t,a)=>{a.d(t,{D:()=>r});var s=a(79342),n=a(61312);function r(e){let{children:t,className:a="",fadeSize:r="sm",role:i}=e;return(0,s.jsx)("div",{className:(0,n.cn)("flex-1 flex flex-col gap-1 h-full overflow-y-auto py-1",{sm:"[mask-image:linear-gradient(to_bottom,transparent,black_4px,black_calc(100%_-_4px),transparent)] [-webkit-mask-image:linear-gradient(to_bottom,transparent,black_4px,black_calc(100%_-_4px),transparent)]",md:"[mask-image:linear-gradient(to_bottom,transparent,black_8px,black_calc(100%_-_8px),transparent)] [-webkit-mask-image:linear-gradient(to_bottom,transparent,black_8px,black_calc(100%_-_8px),transparent)]",lg:"[mask-image:linear-gradient(to_bottom,transparent,black_16px,black_calc(100%_-_16px),transparent)] [-webkit-mask-image:linear-gradient(to_bottom,transparent,black_16px,black_calc(100%_-_16px),transparent)]"}[r],a),tabIndex:-1,role:i,children:t})}},58655:(e,t,a)=>{a.d(t,{C:()=>x});var s=a(79342),n=a(41320),r=a(61312),i=a(65146),l=a(24994),o=a(74366),c=a(26067),d=a(82263);function u(e){let{locale:t,onChange:a}=e,{t:n}=(0,i.Bd)();return(0,s.jsxs)(o.uB,{children:[(0,s.jsx)(o.G7,{placeholder:n("Search language","Search language")}),(0,s.jsx)(o.oI,{children:c.O4.map(e=>(0,s.jsx)(p,{locale:e,selected:t===e,onSelect:a},e))})]})}function p(e){let{locale:t,selected:a,onSelect:n}=e,{name:r,nativeName:i}=c.IB[t];return(0,s.jsxs)(o.h_,{value:t,keywords:[i,r],onSelect:()=>n(t),className:"justify-between cursor-pointer",children:[i,a?(0,s.jsx)(d.A,{className:"size-4","data-testid":"check-icon"}):(0,s.jsx)("span",{className:"text-muted-foreground",children:r})]})}function x(e){let{open:t,onOpenChange:a,locale:o,onLocaleChange:c}=e,{t:d}=(0,i.Bd)(),p=(0,n.Di)(),x=(0,r.cn)("bg-background rounded-2xl outline-none h-[calc(100dvh-64px-128px)] w-full md:w-[400px] max-w-3xl flex flex-col md:h-[min(500px,90dvh)]",{"rounded-b-none":p});return(0,s.jsx)(l.R,{open:t,setOpen:a,contentClassName:x,"aria-labelledby":"language-selector-title",titleClassName:"sr-only",title:d("Language Selector","Language Selector"),children:(0,s.jsx)(u,{locale:o,onChange:c})})}},63209:(e,t,a)=>{a.d(t,{IO:()=>eN,hx:()=>ek,C9:()=>eA,oE:()=>eC});var s=a(79342),n=a(10953),r=a(42557),i=a(41284),l=a(56691),o=a(51789),c=a(92207),d=a(39489),u=a(92372),p=a(12001),x=a(72712);let m=e=>(0,s.jsxs)(x.I,{viewBox:"2 2 21 21",...e,children:[(0,s.jsx)("path",{d:"M3 5L19 5",stroke:"currentColor",strokeLinecap:"square",strokeLinejoin:"round"}),(0,s.jsx)("path",{d:"M3 12H7",stroke:"currentColor",strokeLinecap:"square",strokeLinejoin:"round"}),(0,s.jsx)("circle",{cx:"16",cy:"15",r:"4",stroke:"currentColor"}),(0,s.jsx)("path",{d:"M19 18L21 20",stroke:"currentColor",strokeLinecap:"square"}),(0,s.jsx)("path",{d:"M3 19H7",stroke:"currentColor",strokeLinecap:"square",strokeLinejoin:"round"})]});var h=a(58655),g=a(18585),f=a(67153),v=a(92618),j=a(5790),b=a(35692),y=a(88119),w=a(34500),C=a(73772),k=a(47127),N=a(97225),S=a(3209),I=a(26676),_=a(5663),A=a(68332),M=a(21782),P=a(75500),E=a(33231),z=a(41320),L=a(91102),T=a(2376),D=a(12065),H=a(35181),R=a(24734),O=a(2280),B=a(24429),K=a(27636),V=a(7658),F=a(83626),U=a(17703),Z=a(84499),G=a(61312),$=a(64389),W=a(49972),X=a(93436),Y=a(44347),Q=a(58711),q=a(3683),J=a(20337),ee=a(17014),et=a(7036),ea=a(22406),es=a(10684),en=a(23827),er=a(57402),ei=a(8512),el=a(30590),eo=a(603),ec=a(33846),ed=a(32171),eu=a.n(ed),ep=a(39116),ex=a(74995),em=a(88382),eh=a(65146),eg=a(17517),ef=a(97325),ev=a(23856),ej=a(40945);let eb=(0,em.memo)(e=>{let{conversation:t}=e,{client:a}=(0,J.useStatsigClient)(),{conversationId:n}=t,{data:r,error:i}=(0,V.$1)(n);(0,R.Y)("conversation-workspace-pill",i);let l=null==r?void 0:r[0];if(!l)return null;let{name:o,icon:c,workspaceId:d}=l;return(0,s.jsx)(eu(),{className:"overflow-hidden",href:"/workspace/".concat(d),onClick:()=>{a.logEvent("ws_pill_click",void 0)},children:(0,s.jsxs)(ec.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:(0,G.cn)("border border-border-l2 px-3 py-1 rounded-full","text-sm text-secondary flex flex-row items-center gap-1","ml-2 mt-0.5"),children:[(0,s.jsx)("span",{className:(0,G.cn)("[&>svg]:h-3.5 [&>svg]:w-3.5"),children:(0,s.jsx)(ej.Oh,{icon:c})}),(0,s.jsx)("span",{className:(0,G.cn)("max-w-[0px] @[340px]/nav:max-w-[75px] @[375px]/nav:max-w-[100px] @[430px]/nav:max-w-[150px] @[500px]/nav:max-w-[200px] truncate"),children:o})]})})}),ey={size:20,strokeWidth:2};function ew(e){let{hash:t,isIncognito:a,showLabel:n,onLinkClick:r}=e,{t:i}=(0,eh.Bd)("chat"),{commandPrefix:o}=(0,L.c)(),c=a?i("Switch to Default Chat","Switch to Default Chat"):i("Switch to Private Chat","Switch to Private Chat"),d=a?"".concat(o,"J"):"".concat(o,"J");return(0,s.jsx)(l.gx,{rounded:!0,variant:"ghost",size:n?"md":"iconMd",overideIconStyle:!0,"aria-label":c,stayOpenOnClick:!0,tooltipAsChild:!0,tooltipContent:(0,s.jsxs)("div",{className:"flex flex-row gap-1",children:[c,o&&(0,s.jsx)("span",{className:"text-secondary",children:d})]}),tooltipContentProps:{side:"bottom"},asChild:!0,className:a?"text-purple-400 dark:text-purple-300":"text-secondary",children:(0,s.jsxs)(eu(),{href:"/chat".concat(a?"":t),onClick:r,children:[a?(0,s.jsx)(u.fz,{...ey,"data-testid":"pi-ghost-fill"}):(0,s.jsx)(u.FE,{...ey,"data-testid":"pi-ghost"}),n&&(0,s.jsx)("span",{className:"font-semibold",children:i("private","Private")})]})})}let eC="#private";function ek(e){var t;let{title:a,conversationIsLoading:n,conversation:i,label:o,shared:d,isOptimisticConversation:x,hideIncognito:h,showTasks:v}=e,{t:j}=(0,eh.Bd)("base"),{routeToConversation:y}=(0,A.o)(),[w,N]=(0,eg.Q)(),S=(0,r.wV)(),I=S.user,{push:M}=(0,Z.wK)(),{commandPrefix:H,os:O}=(0,L.c)(),{client:B}=(0,J.useStatsigClient)(),F=(0,em.useRef)(null),$=(0,ef.aP)(ex.A("setReasoningMode")),X=(0,ef.aP)(ex.A("establishNewConversation")),Q=(0,Y.C$)(ex.A("isIncognito")),q=(0,Y.C$)(ex.A("setIsIncognito")),{handlePinConversation:ee}=(0,D.c)(),{fetchDeleteConversation:en}=(0,W.w)(),er=(0,R.K)(),ei=(0,z.Di)(),el=(0,P.h)(),eo=(0,f.L)(),ec=(0,ef.aP)(ex.A("lastMessageId"));(0,em.useEffect)(()=>{w===eC&&(q(!0),N(""))},[w]);let{data:ed}=(0,V.$1)(null!=(t=null==i?void 0:i.conversationId)?t:""),eu=null==ed?void 0:ed[0],ep=null==eu?void 0:eu.workspaceId,ej=(0,em.useCallback)(()=>{B.logEvent("new_chat_action",void 0,{insideWorkspace:"false"});let{setOptimisticConversationId:e,setSidePanelContent:t}=ef.aP.getState();e(void 0),t(void 0),q(!1),y(void 0)},[B,q,y]),eb=(0,em.useCallback)(e=>{e.ctrlKey||e.metaKey||ej()},[ej]);(0,E.v)(_.Ib,e=>{e.preventDefault(),e.stopPropagation(),B.logEvent("pressed_cmd_j",void 0,{insideWorkspace:String(!!eu)}),ej()},[ej,B]);let ey=(0,em.useCallback)(()=>{q(!0),y(void 0)},[q,y]),ek=!!S.user&&!h;(0,E.v)(_.Xo,e=>{ek&&(e.preventDefault(),e.stopPropagation(),B.logEvent("pressed_cmd_shift_j"),ey())},[ek,ey,B]);let eS=(0,em.useCallback)(e=>{if(!e.ctrlKey&&!e.metaKey){e.preventDefault();let t=!Q;q(t),B.logEvent("toggle_incognito",String(t),{location:"chat-top-nav"})}},[Q,q,B]),eI=(0,c.H0)(ex.A("openMenu")),eA=x?Q:i?!!I&&i.temporary:Q,{getPersonaForConversation:eM}=(0,T.v5)(),ez=eM(i),eL=(0,em.useCallback)(()=>{B.logEvent("clicked_tasks",void 0,{location:"chat-top-nav"}),M({page:"tasks",taskId:null,tab:"active"})},[M,B]),eT=(0,em.useCallback)(async()=>{if(!ez)return;$("none");let{initialQuery:e,toolOverrides:t}=(0,g.pL)(ez.personaId,j);B.logEvent("click_persona",ez.personaId,{location:"chat-top-nav"}),B.logEvent("new_persona_chat",e,{location:"chat-top-nav",toolOverrides:JSON.stringify(t)}),await eo(),await X({message:e,toolOverrides:t,persona:ez,enableRetries:el.ENABLE_AUTO_STREAM_RETRY,ff:el}).catch((0,U.HX)("chat-top-nav:establishNewConversation"))},[ez,$,j,B,eo,X,el]),eD=(0,em.useCallback)(()=>{i&&ee(i.conversationId,!i.starred,"chat-top-nav")},[i,ee]),eH=(0,em.useCallback)(()=>{i&&en(i.conversationId).then(()=>{M({page:"main"})}).catch(e=>er("chat-top-nav:handleDeleteClick",e))},[i,en,M,er]),eR=function(){var e,t;let{getUserTasksQuery:a}=(0,K.ek)(),{data:s}=a;return(null==s||null==(t=s.unreadResults)||null==(e=t.at(0))?void 0:e.isRead)===!1&&s.unreadResults.length>0}(),eO=el.ENABLE_EXPANDED_SHARE_BUTTON&&!ei,[eB,eK]=(0,em.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{ref:F,className:"w-full relative @container/nav z-[25] flex-shrink-0",children:[a&&(0,s.jsx)("div",{className:"h-full",children:a}),(0,s.jsxs)("div",{className:(0,G.cn)("h-16 top-0 @[80rem]/nav:h-0 @[80rem]/nav:top-8","absolute z-10 flex flex-row items-center justify-center w-full bg-gradient-to-b","from-background via-background via-80% to-transparent @[80rem]/nav:from-transparent @[80rem]/nav:via-transparent"),children:[(0,s.jsx)("div",{className:"absolute start-1",children:(0,s.jsx)(e_,{shared:d})}),(0,s.jsx)("div",{className:(0,G.cn)("grow justify-center hidden max-w-[50%] @[640px]/nav:flex"),children:o?(0,s.jsx)("div",{className:"text-muted-foreground",children:o}):null}),(0,s.jsxs)("div",{className:"absolute flex flex-row items-center gap-0.5 ms-auto end-3",children:[ez&&!n&&i&&(0,s.jsx)(k.p,{children:(0,s.jsx)(l.gx,{className:(0,G.cn)("rounded-full",(0,g.e8)(ez.personaId).colorClassName),variant:"ghost",size:"icon",tooltipContent:(0,s.jsxs)("p",{children:[j("New Persona Chat","New Persona Chat",{ns:"chat"}),H&&(0,s.jsxs)("span",{className:"ms-1 text-secondary",children:[H,"J"]})]}),tooltipContentProps:{side:"bottom"},onClick:eT,asChild:!0,children:(0,s.jsx)("div",{onClick:eT,children:(0,s.jsx)(u.cJ,{size:20,strokeWidth:2})})})},"new-persona-chat-button"),!ez&&(!n&&i||d)&&(0,s.jsx)(k.p,{children:(0,s.jsx)(l.gx,{className:"rounded-full",variant:"ghost",size:"icon",tooltipContent:(0,s.jsxs)("p",{children:[eu?j("top-nav-new-chat.tooltip","New chat in project",{ns:"chat"}):j("start new chat","New Chat",{ns:"chat"}),H&&(0,s.jsxs)("span",{className:"ms-1 text-secondary",children:[H,"J"]})]}),tooltipContentProps:{side:"bottom"},asChild:!0,children:ep?(0,s.jsx)(Z.N_,{route:{page:"workspace",workspaceId:ep,tab:"attachments"},onClick:()=>{B.logEvent("new_chat_action",void 0,{insideWorkspace:"true"})},children:(0,s.jsx)(u.cJ,{size:20,strokeWidth:2})}):(0,s.jsx)(Z.N_,{route:{page:"main"},onClick:eb,children:(0,s.jsx)(u.cJ,{size:20,strokeWidth:2})})})},"new-chat-button"),el.USE_APP_SIDEBAR_V2&&i&&!n&&!d&&!eA&&(0,s.jsx)(l.gx,{className:"rounded-full",variant:"ghost",size:"icon","aria-label":i.starred?j("Unpin","Unpin"):j("Pin","Pin"),onClick:eD,tooltipContent:i.starred?j("Unpin","Unpin"):j("Pin","Pin"),children:(0,s.jsx)(k.p,{children:i.starred?(0,s.jsx)(p.A,{size:18}):(0,s.jsx)(et.A,{size:18})},i.starred?"pinned":"unpinned")}),!eO&&i&&ec&&!d&&!eA&&(0,s.jsx)(ev.w,{variant:"ghost",size:"icon",conversationId:i.conversationId,responseId:ec,iconProps:{size:20,strokeWidth:2}}),el.USE_APP_SIDEBAR_V2&&el.ENABLE_CONVERSATION_PAGE_ACTIONS&&i&&!n&&!d&&!eA&&(0,s.jsxs)(C.rI,{children:[(0,s.jsx)(C.ty,{asChild:!0,children:(0,s.jsx)(l.gx,{className:"rounded-full",variant:"ghost",size:"icon","aria-label":j("chat-top-nav.more","More"),onClick:eD,tooltipContent:j("chat-top-nav.more","More"),children:(0,s.jsx)(ea.A,{size:20})})}),(0,s.jsxs)(C.SQ,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5",children:[(0,s.jsx)(eE,{conversation:i,setDrawerOpen:eK}),(0,s.jsxs)(C._2,{onClick:eH,children:[(0,s.jsx)(u.uc,{className:"size-4 me-2"}),j("chat-top-nav.delete-chat","Delete Chat")]})]})]}),el.USE_APP_SIDEBAR_V2?null:el.ENABLE_GROK_TASKS&&!!I&&v&&(0,s.jsx)(k.p,{children:(0,s.jsx)(l.gx,{variant:"ghost",size:"icon",className:"rounded-full","aria-label":j("Top-nav-tasks-label","Tasks",{ns:"tasks"}),onClick:eL,tooltipContent:(0,s.jsx)("div",{className:"flex flex-row gap-1",children:j("Top-nav-tasks-label","Tasks",{ns:"tasks"})}),children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(es.A,{size:20}),eR&&(0,s.jsx)(b.x,{variant:"sm",className:"absolute top-[50%] translate-y-[-50%] -left-2"})]})})},"tasks-nav-button"),ek&&!n&&!i&&!d&&(0,s.jsx)(k.p,{children:(0,s.jsx)(ew,{hash:eC,isIncognito:Q,onLinkClick:eS,showLabel:!ei})},"incognito-nav-button"),el.USE_APP_SIDEBAR_V2?null:(0,s.jsx)(l.gx,{variant:"ghost",size:"icon",className:"rounded-full","aria-label":j("History","History",{ns:"chat"}),onClick:()=>{B.logEvent("opened_command_menu",void 0,{location:"chat-top-nav:button"}),eI()},tooltipContent:(0,s.jsxs)("div",{className:"flex flex-row gap-1",children:[j("History","History",{ns:"chat"}),H&&(0,s.jsxs)("span",{className:"text-secondary",children:["macos"===O?H:"".concat(H,""),"K"]})]}),children:(0,s.jsx)(m,{size:20})}),eO&&i&&ec&&!d&&!eA&&(0,s.jsx)(ev.w,{variant:"outline",size:"md",rounded:!0,showLabel:!0,conversationId:i.conversationId,responseId:ec,iconProps:{size:20,strokeWidth:2}}),el.USE_APP_SIDEBAR_V2?null:(0,s.jsx)(eN,{})]})]})]}),i&&(0,s.jsx)(eP,{conversation:i,drawerOpen:eB,setDrawerOpen:eK})]})}function eN(){let{t:e}=(0,eh.Bd)("base"),{SUPPORT_URL:t}=(0,d.v)(),a=(0,ep.useRouter)(),n=(0,r.wV)(),o=(0,j.iV)(ex.A("toggleOpen")),c=(0,X.P)(ex.A("setReportDialogIsOpen")),p=(0,em.useCallback)(e=>{e.stopPropagation(),c(!0)},[c]),{isSuperGrokUser:x,data:m}=(0,B.Q2)(),h=(0,Q.e)(ex.A("setIsUpselling")),g=(0,em.useCallback)(e=>{e.stopPropagation(),a.push("/sign-out")},[a]),f=(0,M.f)(),v=(0,em.useCallback)(e=>{e.stopPropagation(),o()},[o]),b=(0,em.useCallback)(e=>{e.stopPropagation(),h(!0)},[h]);return n.user?(0,s.jsxs)(C.rI,{children:[(0,s.jsx)(C.ty,{asChild:!0,children:(0,s.jsx)(l.$n,{variant:"ghost",size:"icon",className:"p-1 rounded-full",children:(0,s.jsx)(i.e,{className:"w-8 h-8",user:n.user})})}),(0,s.jsxs)(C.SQ,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5",children:[(0,s.jsxs)(C._2,{onClick:v,children:[(0,s.jsx)(u.DP,{className:"size-4 me-2"}),e("user-dropdown.settings","Settings")]}),(0,s.jsxs)(C._2,{onClick:p,children:[(0,s.jsx)(ee.VAL,{className:"size-4 me-2"}),e("user-dropdown.report-issue","Report Issue")]}),(0,s.jsx)(C._2,{asChild:!0,children:(0,s.jsxs)(eu(),{href:t,target:"_blank",children:[(0,s.jsx)(en.A,{height:16,width:16,className:"text-neutral-400 me-2"}),e("user-dropdown.community","Community")]})}),x?(0,s.jsx)(eS,{subscriptions:null==m?void 0:m.subscriptions}):(0,s.jsxs)(C._2,{onClick:b,children:[(0,s.jsx)(ee.Qtr,{className:"size-4 me-2"}),e("user-dropdown.upgrade","Upgrade plan")]}),(0,s.jsxs)(C._2,{onClick:g,children:[(0,s.jsx)(u.Jm,{className:"size-4 me-2"}),e("user-dropdown.sign-out","Sign Out")]})]})]}):(0,s.jsx)(eI,{currentLanguage:f})}function eS(e){let{subscriptions:t}=e,{t:a}=(0,eh.Bd)("base"),[n,r]=(0,em.useState)(!1),i=null==t?void 0:t[0];return i?(0,s.jsxs)(C._2,{onClick:e=>{e.preventDefault(),e.stopPropagation(),i.stripe?(r(!0),$.$W.subscriptionsCreateBillingPortalSession({body:{returnUrl:window.location.href}}).then(e=>{window.open(e.url,"_blank")}).catch((0,U.HX)("chat-top-nav:manage-subscription")).finally(()=>{r(!1)})):window.open((0,v.M)(i),"_blank")},children:[n?(0,s.jsx)(er.A,{height:16,width:16,className:"text-neutral-400 animate-spin !duration-1000 me-2"}):(0,s.jsx)(ei.A,{height:16,width:16,className:"text-neutral-400 me-2"}),a("user-dropdown.manage-subscription","Manage Subscription")]}):null}function eI(e){let{currentLanguage:t}=e,a=(0,ep.useRouter)(),{t:n,i18n:r}=(0,eh.Bd)("base"),{client:i}=(0,J.useStatsigClient)(),[o,c]=(0,em.useState)(!1),d=(0,em.useCallback)(()=>{i.logEvent("sign_in_redirect",void 0,{location:"chat-top-nav"}),a.push("/sign-in")},[a,i]),p=(0,em.useCallback)(()=>{i.logEvent("sign_up_redirect",void 0,{location:"chat-top-nav"}),a.push("/sign-up")},[a,i]),x=(0,em.useCallback)(e=>{r.changeLanguage(e).then(()=>{Y.C$.getState().setSelectedLanguage(e),c(!1)}).catch((0,U.HX)("settings-account"))},[r]);return(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,s.jsxs)(C.rI,{children:[(0,s.jsx)(C.ty,{asChild:!0,children:(0,s.jsx)(l.gx,{variant:"ghost",size:"icon",className:"rounded-full hidden @sm:flex",tooltipContent:n("Settings","Settings"),children:(0,s.jsx)(u.DP,{size:20})})}),(0,s.jsxs)(C.SQ,{side:"bottom",align:"end",sideOffset:6,className:"min-w-36 space-y-0.5",children:[(0,s.jsx)(y.Uk,{}),(0,s.jsx)(C._2,{onClick:()=>c(!0),children:n("Language","Language")})]})]}),(0,s.jsxs)(l.$n,{size:"pill",variant:"primary",className:"h-8 px-3 text-sm",onClick:p,children:[(0,s.jsx)(el.A,{size:16,strokeWidth:2}),(0,s.jsx)("div",{children:n("Sign up","Sign up")})]}),(0,s.jsx)(l.$n,{size:"pill",variant:"none",className:(0,G.cn)("hidden @sm:flex","h-8 px-3 text-sm text-primary bg-transparent ring-1 ring-inset ring-toggle-border","hover:bg-button-secondary-hover hover:border-text-secondary"),onClick:d,children:(0,s.jsx)("div",{children:n("Sign in","Sign in")})}),(0,s.jsx)(h.C,{locale:t,open:o,onLocaleChange:x,onOpenChange:c})]})}function e_(e){let{shared:t}=e,a=(0,P.h)(),n=(0,W.w)(ex.A("fetchGetConversation")),r=(0,ef.aP)(ex.A("conversationId")),{data:i}=(0,H.v)((0,F.F)(r,n)),{toggleSidebar:o}=(0,N.cL)(),{t:c}=(0,eh.Bd)("base"),d=(0,z.Di)(),{route:u}=(0,Z.wK)();return(0,s.jsxs)("div",{className:"flex flex-row items-center",children:[a.USE_APP_SIDEBAR_V2?d&&(0,s.jsx)(l.$n,{"aria-label":c("side-nav-toggle-button","Toggle sidebar"),className:"ms-2",variant:"ghost",size:"iconMd",rounded:!0,onClick:o,children:(0,s.jsx)(eo.A,{})}):(0,s.jsx)(eA,{}),(0,s.jsx)(eM,{conversation:i}),!t&&i&&["main","chat"].includes(u.page)&&(0,s.jsx)(eb,{conversation:i})]})}function eA(e){var t;let{alwaysSmall:a,className:r,onClick:i}=e,{t:l}=(0,eh.Bd)("base"),{client:o}=(0,J.useStatsigClient)(),c=(0,M.f)(),{isSuperGrokUser:d,isEnterpriseUser:u}=(0,B.Q2)(),p=a?n.$r:(0,n.a8)(d,u,c),x=(0,ep.usePathname)(),{route:m}=(0,Z.wK)(),h=(0,W.w)(ex.A("fetchGetConversation")),g=(0,ef.aP)(ex.A("conversationId")),{data:f}=(0,H.v)((0,F.F)(g,h)),{data:v}=(0,V.$1)(null!=(t=null==f?void 0:f.conversationId)?t:""),j=null==v?void 0:v[0],b=(0,em.useCallback)(e=>{o.logEvent("clicked_logo",void 0,{location:"chat-top-nav:TopLeftButton",insideWorkspace:String(!!j),fromRoute:m.page}),e.stopPropagation(),null==i||i(e)},[o,j,m.page,i]);return(0,s.jsx)(Z.N_,{route:{page:"main"},"aria-label":l("Home page","Home page",{ns:"chat"}),onClick:b,className:(0,G.cn)("rounded-lg focus:outline-none focus-visible:ring-1 focus-visible:ring-ring",a?"":"ms-2 me-[0.5]",r),children:(0,s.jsx)(p,{className:(0,G.cn)("opacity-90 hover:opacity-100 fill-black dark:fill-white max-w-full","[&>path]:hidden sm:[&>path]:block [&>#mark]:block [&>#furigana]:opacity-60 [&>#subtitle]:opacity-60","/"===x&&!g&&"sm:[&>path]:hidden",a&&N.vu)})})}function eM(e){let{conversation:t}=e,{getPersonaFromId:a}=(0,T.v5)();if(!t)return null;let n=a(t.personaId);if(!n)return null;let{icon:r,colorClassName:i}=(0,g.e8)(n.personaId);return(0,s.jsxs)(ec.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:(0,G.cn)("border border-border-l2 px-3 py-1 rounded-full","text-sm text-secondary flex flex-row items-center gap-1","ml-2 mt-0.5","overflow-hidden"),children:[(0,s.jsx)("span",{className:(0,G.cn)("[&>svg]:h-3.5 [&>svg]:w-3.5",i),children:r}),(0,s.jsx)("span",{className:(0,G.cn)("max-w-[0px] @[340px]/nav:max-w-[75px] @[375px]/nav:max-w-[100px]","@[430px]/nav:max-w-[150px] truncate"),children:n.name})]})}function eP(e){let{conversation:t,drawerOpen:a,setDrawerOpen:n}=e,{t:r}=(0,eh.Bd)("base"),i=(0,q.M)(e=>e.listStatus),l=(0,q.M)(e=>e.loadFirstPage);(0,em.useEffect)(()=>{"ready"!==i&&l()},[i,l]);let c=(0,q._)(),d=(0,q.M)(e=>e.createWorkspace),u=(0,em.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),d({name:r("chat-top-nav.new-project","New Project"),icon:(0,S.I)()}).catch((0,U.HX)("conversation-actions:create-project"))},[d,r]);return(0,s.jsx)(w._s,{open:a,onOpenChange:n,children:(0,s.jsxs)(w.zj,{className:"max-h-[80%]",children:[(0,s.jsx)(w.gk,{className:"px-5 pt-4",children:r("chat-top-nav.move-to-project","Move to Project")}),(0,s.jsx)("div",{className:"overflow-auto p-4",children:(null==c?void 0:c.length)?(0,s.jsx)("div",{className:"flex flex-col gap-2",children:c.map(e=>(0,s.jsx)("div",{className:"py-2 cursor-pointer hover:bg-button-secondary-hover rounded-lg",children:(0,s.jsx)(ez,{projectId:e.workspaceId,conversation:t,onClickPropagationOverride:()=>n(!1)})},e.workspaceId))}):(0,s.jsx)(o.C,{content:r("chat-top-nav.no-projects","No projects yet"),ctaText:r("chat-top-nav.create-project","Create Project"),onClickCta:u},"no-projects")})]})})}function eE(e){let{conversation:t,setDrawerOpen:a}=e,{t:n}=(0,eh.Bd)("base"),r=(0,q.M)(e=>e.listStatus),i=(0,q.M)(e=>e.loadFirstPage),l=(0,z.Di)();(0,em.useEffect)(()=>{"ready"!==r&&i()},[r,i]);let c=(0,q._)(),d=(0,q.M)(e=>e.createWorkspace),p=(0,em.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),d({name:n("chat-top-nav.new-project","New Project"),icon:(0,S.I)()}).catch((0,U.HX)("conversation-actions:create-project"))},[d,n]);return l?(0,s.jsx)(C._2,{onClick:()=>a(!0),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.XR,{size:17}),n("chat-top-nav.move-to-project","Move to Project")]})}):(0,s.jsxs)(C.lv,{children:[(0,s.jsx)(C.nV,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(u.XR,{size:17}),n("chat-top-nav.move-to-project","Move to Project")]})}),(0,s.jsx)(C.dc,{children:(0,s.jsx)(C.M5,{className:"w-[250px]",children:(null==c?void 0:c.length)?(0,s.jsx)(s.Fragment,{children:c.map(e=>(0,s.jsx)(C._2,{children:(0,s.jsx)(ez,{projectId:e.workspaceId,conversation:t},e.workspaceId)},e.workspaceId))}):(0,s.jsx)(o.C,{content:n("chat-top-nav.no-projects","No projects yet"),ctaText:n("chat-top-nav.create-project","Create Project"),onClickCta:p},"no-projects")})})]},"add-to-workspace-button")}let ez=e=>{var t;let{projectId:a,conversation:n,onClickPropagationOverride:r}=e,i=(0,q.M)(e=>{var t;return null==(t=e.byId[a])?void 0:t.data}),{mutate:l,error:o}=(0,V.tX)();(0,R.Y)("chat-top-nav:workspace-item",o);let c=(0,em.useCallback)(e=>{r?r():e.stopPropagation(),l({conversationId:n.conversationId,workspaceId:a})},[l,n.conversationId,a,r]);return(0,s.jsxs)("div",{className:(0,G.cn)("w-full flex flex-row items-center gap-2"),onClick:c,children:[(0,s.jsx)(I.n,{icon:null==i?void 0:i.icon,sizeClass:"size-4",rounded:!0,buttonSize:"iconXs",disabled:!0}),(0,s.jsxs)("span",{className:(0,G.cn)("flex-1 select-none text-nowrap max-w-full overflow-hidden text-left"),style:{maskImage:O.uU,WebkitMaskImage:O.uU},children:[null!=(t=null==i?void 0:i.name)?t:"Unnamed Project"," "]})]})}},74933:(e,t,a)=>{a.d(t,{p:()=>i});var s=a(79342),n=a(88382),r=a(61312);let i=n.forwardRef((e,t)=>{let{className:a,type:n,...i}=e;return(0,s.jsx)("input",{type:n,className:(0,r.cn)("flex h-9 w-full rounded-md border border-input-border bg-transparent px-3 py-1 text-sm shadow-sm file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...i})});i.displayName="Input"},80295:(e,t,a)=>{a.d(t,{s:()=>r});var s=a(88382),n=a(10731);function r(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,[r,i]=(0,s.useState)(e);return(0,s.useEffect)(()=>{i(e)},[e]),(0,n.A)(()=>t(r),a,[r]),[r,i]}},80354:(e,t,a)=>{a.d(t,{Y:()=>s});function s(e){e.stopPropagation()}},81745:(e,t,a)=>{a.d(t,{CommandMenu:()=>eU});var s=a(79342),n=a(39551),r=a(88382),i=a(97325),l=a(5663),o=a(68332),c=a(80295),d=a(75500),u=a(33231),p=a(41320),x=a(98100),m=a(91102),h=a(24734),g=a(7658),f=a(17703),v=a(77232),j=a(84499),b=a(61312),y=a(49972),w=a(44347),C=a(20337),k=a(17014),N=a(97377),S=a(40938),I=a(71766),_=a(43724),A=a(84969),M=a(33846),P=a(16506),E=a(39116),z=a(74995),L=a(65146),T=a(42557),D=a(56691),H=a(24994),R=a(43086),O=a(92207);let B=e=>{let{name:t,value:a,keywords:i,icon:l,children:o,onTrigger:c}=e,d=(0,r.useMemo)(()=>(0,O.Jo)({type:"action",value:a}),[a]);return(0,s.jsx)(n.uB.Item,{keywords:i,value:d,onSelect:c,className:(0,b.cn)("flex cursor-pointer h-[48px] items-center gap-2 rounded-2xl px-3","data-[selected=true]:bg-button-ghost-hover"),children:o||(0,s.jsx)("div",{className:"flex flex-grow items-center justify-between gap-2 min-w-0",children:(0,s.jsxs)("div",{className:"flex flex-grow items-center gap-2 min-w-0",children:[l&&r.createElement(l,{size:16,className:"text-subtle flex-shrink-0 h-4 w-4"}),(0,s.jsx)("div",{className:"truncate",children:t})]})})})};var K=a(17338);let V=e=>{let{heading:t,className:a,children:r}=e;return(0,s.jsx)(n.L$,{heading:(0,s.jsx)("div",{className:(0,K.cx)("text-secondary px-3 pb-1.5 pt-2 text-sm",a),children:t}),children:r})};var F=a(19841);let U=(0,r.memo)(e=>{let{conversation:t,highlight:a,matchType:l}=e,o=(0,i.aP)(z.A("conversationId")),[c,d]=(0,r.useState)(!1),u=(0,r.useMemo)(()=>"MATCH_MESSAGE"===l&&a,[l,a]),p=(0,r.useMemo)(()=>o===t.conversationId,[o,t.conversationId]),x=(0,r.useMemo)(()=>(0,O.Jo)({type:"conversation",conversationId:t.conversationId}),[t.conversationId]);return(0,s.jsx)(n.uB.Item,{value:x,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),className:(0,b.cn)("h-[48px] rounded-2xl grid grid-cols-1 grid-rows-1","data-[selected=true]:bg-button-ghost-hover",u&&"h-[64px]"),children:(0,s.jsx)(F.w,{...e,isHovered:c,isCurrent:p})})});var Z=a(35181),G=a(48992),$=a(43893),W=a(10505),X=a(87906),Y=a(30653),Q=a(21868),q=a(98008),J=a(92372),ee=a(37469),et=a(86822),ea=a(53915),es=a(46815);let en=(0,r.forwardRef)((e,t)=>{var a,n,i,l,o;let{response:c,showMarkdown:d,matchedWords:u}=e,{t:p}=(0,L.Bd)("chat"),x=(0,et.d)(z.A("fetchGetAsset")),m=(0,w.C$)(e=>e.userSettings.preferences.displayUserMessageMarkdown),{sender:h,message:g,cardAttachmentsJson:f,fileAttachments:v,responseId:j}=c,[y,C]=(0,r.useState)({}),k=(0,r.useMemo)(()=>Object.values(y),[y]),N=(0,r.useMemo)(()=>k.filter(e=>!e.isModelGenerated),[k]),S=(0,r.useMemo)(()=>"human"===c.sender,[c.sender]),I=(0,r.useMemo)(()=>!S||(null!=d?d:m),[S,d,m]),_=(0,r.useMemo)(()=>{var e,t;return(null==(e=c.generatedImageUrls)?void 0:e.length)||Object.keys(null!=(t=c.streamingImageById)?t:{}).length},[null==(a=c.generatedImageUrls)?void 0:a.length,c.streamingImageById]),A=(0,r.useMemo)(()=>!S&&!!_,[S,_]),[M,P]=(0,r.useMemo)(()=>{let{webSearchResults:e,xposts:t,steps:a}=c,s=[...t||[],...(a||[]).flatMap(e=>e.xposts||[])],n=[...e||[],...(a||[]).flatMap(e=>e.webSearchResults||[])],r=new Set,i=s.filter(e=>!(!(null==e?void 0:e.postId)||r.has(e.postId))&&(r.add(e.postId),!0)),l=new Set;return[i,n.filter(e=>!(!(null==e?void 0:e.url)||l.has(e.url))&&(l.add(e.url),!0))]},[null==(n=c.xposts)?void 0:n.length,null==(i=c.webSearchResults)?void 0:i.length,null==(l=c.steps)?void 0:l.length]),E=(0,r.useMemo)(()=>g?(0,W.V)(g):g,[g]);return(0,r.useEffect)(()=>{null==v||v.forEach(e=>{x({assetId:e}).then(t=>{C(ea.A(es.A(e),t))}).catch(()=>{})})},[v]),(0,s.jsxs)("div",{ref:t,className:(0,b.cn)("relative group flex flex-col justify-center px-4 pb-2 gap-2",S?"items-end":"items-start"),children:[(0,s.jsxs)(Y.s,{isUser:S,children:[(null==(o=c.steps)?void 0:o.length)?(0,s.jsxs)("div",{className:"text-secondary h-auto flex items-center justify-start gap-1 rounded-xl border-divider py-1",children:[(0,s.jsx)(J.WI,{size:18,className:"text-secondary text-nowrap shrink-0"}),(0,s.jsx)("span",{children:"deeper"===c.deepsearchPreset?p("DeeperSearch Performed","DeeperSearch Performed"):p("DeepSearch Performed","DeepSearch Performed")})]}):c.thinkingTrace?(0,s.jsxs)("div",{className:"text-secondary h-auto flex items-center justify-start gap-1 rounded-xl border-divider py-1",children:[(0,s.jsx)(J.xm,{size:18,className:"text-secondary text-nowrap shrink-0"}),(0,s.jsx)("span",{children:p("Thinking Performed","Thinking Performed")})]}):null,f&&f.length>0&&(0,s.jsx)("div",{className:"flex flex-col space-y-3",children:f.map((e,t)=>(0,s.jsx)(q._,{cardAttachmentJson:e},"".concat(j,"-card-").concat(t)))}),(0,s.jsx)(X.m,{response:c,isStreaming:!1,numImages:_||0,readOnly:!0,disableImageClick:!0}),A?null:I?(0,s.jsx)(Q.Ad,{sender:h||"",webSearchResults:P||er,xposts:M||er,hideCitations:(null!=M?M:[]).length+(null!=P?P:[]).length===0,matchedWords:u,cardAttachmentsJson:f,shouldRenderHtml:!0,children:E||""}):(0,s.jsx)("span",{className:"whitespace-pre-wrap",children:(0,Q.Sw)(E||"",u)})]}),N.length>0&&(0,s.jsx)("div",{className:"flex flex-row flex-wrap justify-end gap-2 mt-2",children:N.map(e=>(0,s.jsx)(ee.u,{asset:e,isPrivate:!1,isDisabled:!0,allowCompact:!0},e.assetId))})]},null==u?void 0:u.join(""))}),er=[],ei=e=>{let{conversationResults:t}=e,{t:a}=(0,L.Bd)("base"),n=(0,$.A3)(z.A("loadPreviewResponses")),i=(0,O.H0)(z.A("selectedItem")),l=(0,r.useMemo)(()=>{if((null==i?void 0:i.type)==="conversation")return i.conversationId},[i]),o=(0,r.useMemo)(()=>l?t.find(e=>e.conversation.conversationId===l):void 0,[l,t]),c=(0,r.useMemo)(()=>{if(l)return n(l,null==o?void 0:o.matchedResponseId)},[l,null==o?void 0:o.matchedResponseId,n]),{data:d={responses:[],hasOlderResponses:!1,hasNewerResponses:!1},isLoading:u,error:p}=(0,Z.v)(c),x=(0,r.useMemo)(()=>{var e;return null==(e=d.responses)?void 0:e.filter(e=>!e.responseId.startsWith("streaming_in_progress")&&(!e.state||"closed"===e.state))},[d.responses]),m=(0,r.useMemo)(()=>{let e=(0,G.Mb)(x),t=(0,G.d7)((null==e?void 0:e.responseId)||"",d.responses);return x.filter(e=>!!t.find(t=>t.responseId===e.responseId))},[x,d.responses]),h=(0,w.C$)(e=>e.userSettings.preferences.displayUserMessageMarkdown);return(0,s.jsxs)("div",{className:"col-span-1 xl:col-span-3 flex items-center justify-center overflow-auto h-full relative py-0.5 @container/preview",children:[(0,s.jsx)("div",{className:"absolute z-10 inset-x-0 bottom-0 h-6 bg-gradient-to-t from-background to-transparent"}),(0,s.jsx)("div",{className:"absolute z-10 inset-x-0 top-0 h-6 bg-gradient-to-b from-background to-transparent"}),(0,s.jsx)(A.N,{mode:"wait",children:l?p?(0,s.jsxs)(M.P.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:1},transition:{duration:.1,ease:"easeIn"},className:"text-secondary flex items-center gap-3",children:[(0,s.jsx)(S.A,{}),a("Error Loading Messages","Error Loading Messages")]},"error"):u?(0,s.jsxs)(M.P.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:1,transition:{duration:.05}},transition:{duration:.1,ease:"easeIn"},className:"text-secondary flex justify-center items-center gap-3",children:[a("Loading Messages","Loading Messages"),(0,s.jsx)(R.y,{size:"sm"})]},"loading"):(0,s.jsx)(el,{hasOlderResponses:d.hasOlderResponses,hasNewerResponses:d.hasNewerResponses,messages:m,showMarkdown:h,matchedResponseId:null==o?void 0:o.matchedResponseId,matchedWords:null==o?void 0:o.matchedWords},l):(0,s.jsx)(M.P.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:1},transition:{duration:.1,ease:"easeIn"},className:"text-secondary flex items-center gap-3",children:a("Select a conversation to preview","Select a conversation to preview")},"no-conversation")})]})},el=e=>{let{messages:t,hasOlderResponses:a,hasNewerResponses:n,showMarkdown:i,matchedResponseId:l,matchedWords:o}=e,c=(0,r.useRef)(null),d=(0,r.useRef)(null),{t:u}=(0,L.Bd)("base");return(0,r.useEffect)(()=>{if(c.current)if(l&&d.current){var e;null==(e=d.current)||e.scrollIntoView({behavior:"smooth",block:"center"})}else c.current.scrollTop=c.current.scrollHeight},[l,t]),(0,s.jsxs)(M.P.div,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:1,transition:{duration:.05}},transition:{duration:.1,ease:"easeIn"},className:"h-full w-full overflow-auto flex flex-col gap-3 py-6 px-3",ref:c,children:[a&&(0,s.jsx)("div",{className:"text-secondary text-center mb-4",children:u("Open the conversation to see older messages","Open the conversation to see older messages")}),t.map(e=>(0,s.jsx)(en,{ref:l===e.responseId?d:void 0,response:e,matchedWords:l===e.responseId?o:void 0,showMarkdown:"human"===e.sender?i:void 0},e.responseId)),n&&(0,s.jsx)("div",{className:"text-secondary text-center mt-4",children:u("Open the conversation to see newer messages","Open the conversation to see newer messages")})]})},eo=e=>{let{label:t,variant:a,shortcut:n,onTrigger:r}=e;return(0,s.jsxs)(D.$n,{variant:"ghost",size:"sm",className:"pr-1.5 last-of-type:rounded-br-2xl group",onClick:r,children:[(0,s.jsx)("span",{className:(0,b.cn)("whitespace-nowrap",{"text-red-400":"destructive"===a,"text-primary":"default"===a}),children:t}),n&&(0,s.jsx)("span",{className:"text-secondary border border-border px-1.5 rounded-md group-last-of-type:group-hover:rounded-br-xl group-last-of-type:group-focus:rounded-br-xl",children:n})]})};var ec=a(26067),ed=a(58020),eu=a(82263);let ep=e=>{let{actions:t}=e,{t:a,i18n:n}=(0,L.Bd)("base"),i=(0,w.C$)(z.A("selectedLanguage")),l=(0,r.useMemo)(()=>i||n.languages.find(e=>e in ec.IV)||ec.GG,[n.languages,i]);return(0,s.jsx)(V,{heading:a("Language","Language"),children:t.map(e=>{var t;return(0,s.jsx)(B,{...e,children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full min-w-0",children:[(0,s.jsx)(ed.A,{className:"w-4 h-4 flex-shrink-0"}),(0,s.jsx)("span",{className:"text-secondary whitespace-nowrap truncate",children:(0,s.jsx)(L.x6,{t:a,ns:"base",i18nKey:"Change to",defaults:"Change to <primary>{{name}}</primary>",values:{name:e.name},components:{primary:(0,s.jsx)("span",{className:"text-primary"})}})})]}),l===e.value?(0,s.jsx)(eu.A,{className:"w-4 h-4 text-secondary"}):(0,s.jsx)("span",{className:"text-secondary whitespace-nowrap",children:null==(t=ec.IB[e.value])?void 0:t.nativeName})]})},e.value)})})};var ex=a(68746);let em=e=>{let{actions:t}=e,{t:a}=(0,L.Bd)("base"),n=(0,i.aP)(z.A("activeModelId"));return(0,s.jsx)(V,{heading:a("Models","Models"),children:t.map(e=>(0,s.jsx)(B,{...e,children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,s.jsx)(ex.A,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-secondary whitespace-nowrap truncate",children:(0,s.jsx)(L.x6,{ns:"base",i18nKey:"Switch to",defaults:"Switch to <primary>{{name}}</primary>",values:{name:e.name},components:{primary:(0,s.jsx)("span",{className:"text-primary"})}})})]}),n===e.value&&(0,s.jsx)(eu.A,{className:"w-4 h-4 text-secondary"})]})},e.value))})};var eh=a(64389),eg=a(86639),ef=a(13511),ev=a(74933);function ej(e){let{isCopied:t,setIsCopied:a,lastMessageId:n,conversationId:i,onShareLinkChange:l,onShareLinkCopy:o}=e,{t:c}=(0,L.Bd)("base"),{mutate:d,data:u,isPending:p,isIdle:x,isError:m}=(0,ef.n_)({mutationKey:["share-conversation",i,n],mutationFn:()=>eh.chatApi.chatShareConversation({conversationId:i,body:{responseId:n}}),onSuccess:e=>{let{shareLinkId:t}=e;t&&l(t)}});(0,r.useEffect)(()=>{x&&d()},[]),(0,r.useEffect)(()=>()=>{a(!1),l(null)},[]);let h=u?window.location.origin+"/share/"+u.shareLinkId:null;return(0,s.jsxs)("div",{className:"flex flex-col gap-6 py-12",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 items-center",children:[(0,s.jsx)("div",{className:"text-lg text-center",children:c("Share this conversation","Share this conversation")}),(0,s.jsx)("div",{className:"text-secondary text-center",children:c("Share this conversation.description","This conversation will be visible to anyone with the shared link.")})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-6 w-[min(100%,460px)] mx-auto",children:[p&&!m||h&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"relative border border-border-l1 rounded-2xl py-1",children:[(0,s.jsx)(ev.p,{type:"text",value:h||"".concat(c("Loading","Loading"),"..."),disabled:!0,className:"flex-1 w-full rounded-xl pl-3 pr-24 py-5 text-sm text-primary border-none shadow-none"}),p?(0,s.jsx)("div",{className:"absolute inset-y-0 end-0 pr-2 flex items-center",children:(0,s.jsx)(R.y,{size:"xs"})}):(0,s.jsx)("div",{className:"absolute inset-y-0 end-0 pr-1 flex items-center",children:(0,s.jsx)(D.$n,{variant:"ghostSecondary",onClick:o,className:"text-primary",autoFocus:!0,children:t?c("Copied!","Copied!"):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(J.Td,{className:"size-4"}),c("Copy","Copy")]})})})]}),(0,s.jsx)("div",{className:"!w-fit mx-auto",children:(0,s.jsx)("a",{href:p?void 0:"https://twitter.com/intent/tweet?url=".concat(encodeURIComponent(h)),target:p?void 0:"_blank",rel:p?void 0:"noopener noreferrer",children:(0,s.jsxs)(D.$n,{variant:"filled",className:"w-60 sm:min-w-24",disabled:p,children:[c("Share on","Share on"),(0,s.jsx)(eg.A,{size:14})]})})})]}),m&&(0,s.jsx)("div",{className:"text-red-500",children:c("Failed to share conversation","Failed to share conversation")})]})]})}var eb=a(88119);let ey=e=>{let{actions:t}=e,{t:a}=(0,L.Bd)("base"),{theme:n}=(0,P.D)();return(0,s.jsx)(V,{heading:a("Theme","Theme"),children:t.map(e=>(0,s.jsx)(B,{...e,children:(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2 w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[Object.keys(eb.zG).includes(e.value)&&eb.zG[e.value]&&r.createElement(eb.zG[e.value].icon,{size:16,className:"text-subtle flex-shrink-0 h-4 w-4"}),(0,s.jsx)("span",{className:"text-secondary whitespace-nowrap truncate",children:(0,s.jsx)(L.x6,{t:a,ns:"base",i18nKey:"Switch to",defaults:"Switch to <primary>{{name}}</primary>",values:{name:e.name},components:{primary:(0,s.jsx)("span",{className:"text-primary"})}})})]}),n===e.value&&(0,s.jsx)(eu.A,{className:"w-4 h-4 text-secondary"})]})},e.value))})};var ew=a(95366),eC=a.n(ew);let ek=(e,t)=>t.length?e.filter(e=>Math.max(eC()("string"==typeof e.name?e.name:e.value,t),e.keywords?e.keywords.reduce((e,a)=>{let s=eC()(a,t);return s>e?s:e},0):0)>.3):e,eN=e=>{let{searchQuery:t}=e,{t:a}=(0,L.Bd)("base"),s=(0,i.aP)(z.A("conversationId")),n=(0,r.useMemo)(()=>{let e=[];return s&&e.push({name:a("Share","Share"),value:"share",keywords:["share","link","x"],icon:J.li,onTrigger:()=>{let{addPage:e}=O.H0.getState();e({id:"share",isSearchEnabled:!1,searchQuery:""})}}),e},[s,a]);return{actions:(0,r.useMemo)(()=>ek(n,t),[n,t])}};var eS=a(30590),eI=a(23823),e_=a(12824),eA=a(2376),eM=a(18585),eP=a(5790);let eE=e=>{let{searchQuery:t,onClose:a}=e,{t:n}=(0,L.Bd)("base"),l=(0,O.H0)(z.A("addPage")),c=(0,O.H0)(z.A("onSearchQueryChange")),{routeToConversation:d,isChatPage:u}=(0,o.o)(),{theme:p}=(0,P.D)(),{user:m}=(0,T.wV)(),{modelById:h}=(0,x.GB)(),g=(0,E.useRouter)(),f=(0,i.aP)(z.A("activeModelId")),v=(0,i.aP)(z.A("reasoningMode")),j=(0,i.aP)(z.A("setReasoningMode")),b=(0,i.aP)(z.A("conversationId")),k=(0,i.aP)(z.A("isDeepSearchRateLimited")),N=(0,i.aP)(z.A("isThinkingRateLimited")),S=(0,w.C$)(z.A("setIsIncognito")),I=(0,w.C$)(z.A("isIncognito")),_=(0,y.w)(e=>b?e.byId[b]:void 0),{client:A}=(0,C.useStatsigClient)(),M=(0,eP.iV)(z.A("toggleOpen")),D=(0,eP.iV)(z.A("open")),H=(0,r.useMemo)(()=>{if(_&&(0,eA.sS)(_.personaId))return(0,eM.pL)(_.personaId,n)},[_,n]),R=(0,r.useMemo)(()=>null==h?void 0:h[f],[f,h]),B=(0,r.useMemo)(()=>{var e;return null==R||null==(e=R.tags)?void 0:e.includes("deepsearch")},[R]),K=(0,r.useMemo)(()=>{var e;return null==R||null==(e=R.tags)?void 0:e.includes("always_show_deepsearch")},[R]),V=(0,r.useMemo)(()=>{var e;return null==R||null==(e=R.tags)?void 0:e.includes("think")},[R]),F=(0,r.useMemo)(()=>{var e;return null==R||null==(e=R.tags)?void 0:e.includes("always_show_think")},[R]),{isThinkDisabled:U,isDeepsearchDisabled:Z,isThinkSelected:G,isDeepsearchSelected:$}=(0,x.QG)(R),W=(0,r.useMemo)(()=>!(!R||Z||H&&H.hideDeepSearch||!B&&!K||k||K&&!B),[R,Z,B,K,H,k]),X=(0,r.useMemo)(()=>!(!R||U||H&&H.hideThinking||!V&&!F||N||F&&!V),[R,U,V,F,H,N]),Y=(0,r.useCallback)(()=>{c(""),S(!1),d(void 0),a()},[a]),Q=(0,r.useCallback)(()=>{c(""),S(!0),d(void 0),a()},[a]),q=(0,r.useMemo)(()=>{let e=[];return m||e.push({name:n("Sign in","Sign in"),value:"sign-in",icon:eS.A,keywords:["enter","sign","in","login"],onTrigger:()=>{A.logEvent("sign_in_redirect",void 0,{location:"command-menu"}),g.push("/sign-in"),a()}}),b||!u?(e.push({name:n("Create New Chat","Create New Chat"),value:"new-chat",icon:J.cJ,keywords:["new","start","conversation"],onTrigger:Y}),m&&e.push({name:n("Create New Private Chat","Create New Private Chat"),value:"new-private-chat",icon:J.FE,keywords:["new","start","conversation","incognito","private"],onTrigger:Q})):I?e.push({name:n("Create New Chat","Create New Chat"),value:"new-chat",icon:J.cJ,keywords:["new","start","conversation"],onTrigger:Y}):m&&e.push({name:n("Create New Private Chat","Create New Private Chat"),value:"new-private-chat",icon:J.FE,keywords:["new","start","conversation","incognito","private"],onTrigger:Q}),b&&m&&e.push({name:n("command-menu.move-to-workspace.label","Move conversation to project"),value:"move-to-workspace",icon:J.XR,keywords:["workspace","move"],onTrigger:()=>l({id:"move-to-workspace",isSearchEnabled:!0,searchQuery:"",searchPlaceholder:n("command-menu.move-to-workspace.placeholder","Find project...")})}),e.push({name:n("Switch Model","Switch Model"),value:"switch-model",icon:ex.A,keywords:["switch","model"],onTrigger:()=>l({id:"switch-model",isSearchEnabled:!0,searchQuery:"",searchPlaceholder:n("Search models...","Search models...")})},{name:n("Switch Theme","Switch Theme"),value:"switch-theme",icon:p&&Object.keys(eb.zG).includes(p)?eb.zG[p].icon:eI.A,keywords:["switch","theme"],onTrigger:()=>l({id:"switch-theme",isSearchEnabled:!0,searchQuery:"",searchPlaceholder:n("Search themes...","Search themes...")})}),X&&(e.push({name:G?(0,s.jsx)(L.x6,{ns:"base",i18nKey:"Disable Tool",defaults:"Disable <primary>{{name}}</primary>",values:{name:n("Think","Think")},components:{primary:(0,s.jsx)("span",{className:"font-medium"})}}):(0,s.jsx)(L.x6,{ns:"base",i18nKey:"Enable Tool",defaults:"Enable <primary>{{name}}</primary>",values:{name:n("Think","Think")},components:{primary:(0,s.jsx)("span",{className:"font-medium"})}}),value:"think",icon:J.xm,keywords:[n("Think","Think"),"think","tool","mode","reason"].concat(G?[n("Disable","Disable")]:[n("Enable","Enable")]),onTrigger:()=>{let e="think"==v?"none":"think";A.logEvent("switch_reasoning_mode",e),j(e),a()}}),W&&e.push({name:$?(0,s.jsx)(L.x6,{ns:"base",i18nKey:"Disable Tool",defaults:"Disable <primary>{{name}}</primary>",values:{name:n("DeepSearch","DeepSearch")},components:{primary:(0,s.jsx)("span",{className:"font-medium"})}}):(0,s.jsx)(L.x6,{ns:"base",i18nKey:"Enable Tool",defaults:"Enable <primary>{{name}}</primary>",values:{name:n("DeepSearch","DeepSearch")},components:{primary:(0,s.jsx)("span",{className:"font-medium"})}}),value:"deepsearch",icon:J.A,keywords:[n("DeepSearch","DeepSearch"),"deepsearch","search","research","tool","mode","reason"].concat($?[n("Disable","Disable")]:[n("Enable","Enable")]),onTrigger:()=>{let e="deepsearch"==v?"none":"deepsearch";A.logEvent("switch_reasoning_mode",e),j(e),a()}}),e.push({name:n("Change Language","Change Language"),value:"change-language",icon:ed.A,keywords:["change","language","locale"],onTrigger:()=>{l({id:"change-language",isSearchEnabled:!0,searchQuery:"",searchPlaceholder:n("Search languages...","Search languages...")})}}),D||e.push({name:n("Settings","Settings"),value:"settings",icon:J.DP,keywords:["settings","preferences"],onTrigger:()=>{M(),a()}}),m&&e.push({name:n("Sign out","Sign out"),value:"sign-out",icon:e_.A,keywords:["exit","sign","out","logout"],onTrigger:()=>{g.push("/sign-out"),a()}})),e},[b,Y,Q,m,I,t,W,X,G,$,p,v,D,M]);return{actions:(0,r.useMemo)(()=>ek(q,t),[q,t])}},ez=e=>{let{searchQuery:t,onLanguageChange:a}=e,s=(0,r.useMemo)(()=>ec.O4.map(e=>({name:ec.IB[e].name,value:e,keywords:[ec.IB[e].nativeName,ec.IB[e].name],icon:ed.A,onTrigger:()=>{a(e)}})),[a]);return{actions:(0,r.useMemo)(()=>ek(s,t),[s,t])}};var eL=a(3683),eT=a(40945),eD=a(48589),eH=a(5862),eR=a(20014),eO=a(82646);let eB=e=>{let{searchQuery:t,onModelSwitch:a}=e,{models:s}=(0,x.GB)(),n=(0,r.useMemo)(()=>s.filter(e=>!!e.name).map(e=>({name:e.name,type:"action",value:e.modelId,icon:eO.dNu,onTrigger:()=>{a(e.modelId)}})),[s,a]);return{actions:(0,r.useMemo)(()=>ek(n,t),[n,t])}},eK=e=>{let{searchQuery:t,onThemeSwitch:a}=e,{t:s}=(0,L.Bd)("base"),n=(0,r.useMemo)(()=>{let e={light:s("Light","Light"),dark:s("Dark","Dark"),system:s("System","System")};return Object.entries(eb.zG).map(t=>{let[s,{icon:n}]=t;return{name:e[s],value:s,icon:n,onTrigger:()=>{a(s)}}})},[s,a]);return{actions:(0,r.useMemo)(()=>ek(n,t),[n,t])}},eV=e=>{let{searchQuery:t,onSelect:a}=e,n=(0,eL._)(),i=(0,r.useMemo)(()=>n.map(e=>{var t,n;let r=null!=(t=e.name)?t:"",i=null!=(n=e.workspaceId)?n:"";return{name:r,type:"action",value:i,keywords:[r],icon:()=>(0,s.jsx)(eT.Oh,{icon:e.icon}),onTrigger:()=>{i&&a(i)}}}),[n,a]);return{actions:(0,r.useMemo)(()=>ek(i,t),[i,t])}},eF=e=>{let{actions:t}=e,{t:a}=(0,L.Bd)("base");return(0,s.jsx)(V,{heading:a("command-menu-section.workspace","Project"),children:t.map(e=>(0,s.jsx)(B,{...e},e.value))})};function eU(e){let{trigger:t}=e,{t:a,i18n:K}=(0,L.Bd)("base"),F=(0,d.h)(),Z={today:a("Today","Today"),yesterday:a("Yesterday","Yesterday"),"last-7-days":a("Last 7 Days","Last 7 Days"),"this-year":a("This Year","This Year"),older:a("Older","Older")},G=(0,r.useRef)(null),{client:$}=(0,C.useStatsigClient)(),{routeToConversation:W,signInWithReturnTo:X}=(0,o.o)(),Y=(0,T.wV)().user,Q=(0,E.useRouter)(),{commandPrefix:q}=(0,m.c)(),J=(0,h.K)(),{push:ee}=(0,j.wK)(),et=(0,O.H0)(z.A("open")),ea=(0,O.H0)(z.A("selectedItem")),es=(0,O.H0)(z.A("pages")),en=(0,O.H0)(z.A("goBack")),er=(0,i.aP)(z.A("lastMessageId")),el=(0,i.aP)(z.A("conversationId")),ec=(0,i.aP)(z.A("activeModelId")),ed=(0,i.aP)(z.A("reasoningMode")),eu=(0,x.$E)(),ex=(0,w.C$)(e=>e.userSettings.preferences.showConversationPreviews),eg=(0,p.Di)(),[ev,eb]=(0,r.useState)(null),[ew,eC]=(0,r.useState)(null),[eS,eI]=(0,r.useState)(""),[e_,eM]=(0,r.useState)(null),[eP,eO]=(0,r.useState)(!1),eU=(0,r.useMemo)(()=>es[es.length-1]||null,[es]),eZ=(0,r.useMemo)(()=>Y&&"root"===eU.id&&!eg,[Y,eU.id,eg]),eG=(0,r.useMemo)(()=>eZ&&ex,[ex,eZ]),e$=(0,r.useMemo)(()=>eU.searchQuery.trim(),[eU.searchQuery]),eW=(0,r.useMemo)(()=>eP||eU.isSearchEnabled&&!!e$,[eP,eU.isSearchEnabled,e$]),{groupedConversations:eX,results:eY,refetch:eQ,loadMoreRef:eq,historyContainerRef:eJ,isLoading:e0,isFetching:e1,isError:e2}=function(e){let{query:t}=e,a=(0,T.wV)().user,s=(0,eD.o)(t,200),n=(0,ef.jE)(),i=(0,h.K)(),l=(0,r.useRef)(null),o=(0,r.useRef)(null),[c,d]=(0,r.useState)(!1),[u,p]=(0,r.useState)(!1),x=(0,r.useCallback)(async e=>{let{pageParam:t}=e;if(!a)return{conversationResults:[],nextPageToken:void 0};try{var n,r,l;let e=await eh.chatApi.chatListConversations({searchQuery:s||void 0,pageToken:"string"==typeof t?t:void 0,pageSize:"60"});return{conversationResults:(null==(n=e.textSearchMatches)?void 0:n.length)?null==(r=e.textSearchMatches)?void 0:r.map(e=>{var t;return{...e,conversation:{...e.conversation,personaId:(0,eA._c)(null==(t=e.conversation)?void 0:t.systemPromptName),isNew:!1,state:"closed"}}}):(null==(l=e.conversations)?void 0:l.map(e=>({conversation:{...e,personaId:(0,eA._c)(e.systemPromptName),isNew:!1,state:"closed"}})))||[],nextPageToken:e.nextPageToken,textSearchMatches:e.textSearchMatches||[]}}catch(e){throw i("use-search-conversations",e),e}},[s,a,i]),{data:m,fetchNextPage:g,hasNextPage:v,isFetchingNextPage:j,isFetching:b,isError:w,isLoading:C,refetch:k}=(0,ef.qu)({queryKey:["conversations",s,null==a?void 0:a.userId],queryFn:x,initialPageParam:void 0,getNextPageParam:e=>e.nextPageToken,enabled:!!a,staleTime:6e5,refetchOnWindowFocus:!0}),N=(0,r.useMemo)(()=>{let e=(null==m?void 0:m.pages.flatMap(e=>e.conversationResults))||[],t=s?e:e.sort((e,t)=>new Date(t.conversation.modifyTime).getTime()-new Date(e.conversation.modifyTime).getTime());return eR.A(e=>e.conversation.conversationId,t)},[null==m?void 0:m.pages,s]),S=(0,r.useMemo)(()=>{let e=eH.YL.map(e=>{let{key:t}=e;return{timeRange:t,conversations:[]}});return N.forEach(t=>{let{conversation:a}=t,s=(0,eH.JU)(a.modifyTime);if(s){let t=e.find(e=>e.timeRange===s);t&&t.conversations.push(a)}}),e.filter(e=>e.conversations.length>0)},[N]);return(0,r.useEffect)(()=>{let e=y.w.subscribe(e=>e.byId,(e,t)=>{let a=!1;Object.values(e).forEach(e=>{let s=t[e.conversationId];(s||e.temporary)&&(e.temporary||(null==s?void 0:s.modifyTime)===e.modifyTime&&(null==s?void 0:s.title)===e.title&&(null==s?void 0:s.starred)===e.starred)||(a=!0)}),Object.values(t).forEach(t=>{e[t.conversationId]||(a=!0)}),a&&n.invalidateQueries({queryKey:["conversations"]}).catch(e=>(0,f.vV)("conversation-store-update",e))});return()=>e()},[n]),(0,r.useEffect)(()=>{if(!(null==l?void 0:l.current)||!(null==o?void 0:o.current))return;let e=new IntersectionObserver(e=>{let[t]=e;d(t.isIntersecting)},{root:o.current,rootMargin:"300px 0px 300px 0px",threshold:.1});return e.observe(l.current),()=>{l.current&&e.unobserve(l.current)}},[null==l?void 0:l.current,null==o?void 0:o.current]),(0,r.useLayoutEffect)(()=>{c&&v&&!j&&a&&!u&&(p(!0),g().catch(e=>(0,f.vV)("intersection-load-more",e)))},[c,v,j,g,a,u]),(0,r.useEffect)(()=>{if(u){let e=setTimeout(()=>{p(!1)},300);return()=>clearTimeout(e)}},[u]),{results:N,refetch:k,loadMoreRef:l,historyContainerRef:o,groupedConversations:S,isLoading:C,isFetching:b,isError:w}}({query:e$}),{actions:e3}=eE({searchQuery:e$,onClose:()=>tf(!1)}),{actions:e4}=eN({searchQuery:e$}),e6=(0,r.useCallback)(e=>{$.logEvent("switch_model",e,{location:"comand-menu"});let{setActiveModelId:t}=i.aP.getState();t(e);let{closeMenu:a}=O.H0.getState();a()},[$]),{actions:e5}=eB({searchQuery:e$,onModelSwitch:e6}),{mutate:e8,error:e7}=(0,g.tX)();(0,h.Y)("command-menu:addToWorkspace",e7);let{actions:e9}=function(e){let{searchQuery:t,onWorkspaceSelected:a,hasCurrentConversation:n}=e,i=(0,eL._)();return(0,r.useMemo)(()=>n?{actions:ek(i.map(e=>({name:e.name,value:"workspace-"+e.workspaceId,icon:t=>{let{size:a}=t;return(0,s.jsx)(eT.Oh,{icon:e.icon,size:a})},onTrigger:()=>{var t;null==a||a(null!=(t=e.workspaceId)?t:"")}})),t)}:{actions:[]},[n,i,t,a])}({searchQuery:e$,onWorkspaceSelected:(0,r.useCallback)(e=>{let{closeMenu:t}=O.H0.getState();t(),el&&(e8({conversationId:el,workspaceId:e}),$.logEvent("add_conversation_to_workspace",void 0,{location:"comand-menu"}))},[e8,el,$]),hasCurrentConversation:!!el}),{setTheme:te}=(0,P.D)(),tt=(0,r.useCallback)(e=>{te(e);let{closeMenu:t}=O.H0.getState();t()},[te]),{actions:ta}=eK({searchQuery:e$,onThemeSwitch:tt}),ts=(0,r.useCallback)(e=>{K.changeLanguage(e).then(()=>{let{setSelectedLanguage:t}=w.C$.getState();t(e)}).catch(e=>(0,f.vV)("cmdk-language-change",e));let{closeMenu:t}=O.H0.getState();t()},[K]),{actions:tn}=ez({searchQuery:e$,onLanguageChange:ts}),{actions:tr}=eV({searchQuery:e$,onSelect:(0,r.useCallback)(e=>{let{closeMenu:t}=O.H0.getState();t(),ee({page:"workspace",workspaceId:e,tab:"attachments"})},[ee])}),ti=(0,r.useMemo)(()=>ea?ea.type:null,[ea]),tl=(0,r.useMemo)(()=>ea?"home-action"===ea.type?e3.find(e=>e.value===ea.homeActionId)||null:"item-action"===ea.type&&e4.find(e=>e.value===ea.itemActionId)||null:null,[e3,e4,ea]),to=(0,r.useMemo)(()=>e3[0]||null,[e3]),tc=(0,r.useCallback)(e=>{eO(e)},[]),td=(0,r.useCallback)(e=>{let{fetchSetPreference:t}=w.C$.getState();t("showConversationPreviews",e).catch((0,f.HX)("command-menu:handleShowConversationPreviewsChange"))},[]),tu=(0,r.useCallback)(e=>{let{setSelectedItem:t}=O.H0.getState();ev||ew||t(e)},[ev,ew]),[tp,tx]=(0,r.useState)(""),tm=tp?(0,O.kw)(tp):void 0,th=(0,r.useCallback)(e=>{let t=(0,O.kw)(e),{setSelectedItem:a}=O.H0.getState();a(t)},[]);(0,c.s)(tp,th,100);let tg=(0,r.useCallback)(e=>{let{onSearchQueryChange:t}=O.H0.getState();t(e),eb(null),eC(null),eO(!1)},[]),tf=(0,r.useCallback)(e=>{let{goBack:t,openMenu:a}=O.H0.getState();if(e)a();else{if(ev||ew){eb(null),eC(null),eI("");return}eO(!1),t()}},[ev,ew]),tv=(0,r.useCallback)(e=>{var t;let a=eY.find(t=>t.conversation.conversationId===e);eI((null==a||null==(t=a.conversation)?void 0:t.title)||""),eb(e)},[eY]),[tj,tb]=(0,r.useState)(!1),ty=(0,r.useCallback)(()=>{let e=e_?window.location.origin+"/share/"+e_:null;e&&(tb(!0),(0,v.g)(e,a("Copied share link to clipboard.","Copied share link to clipboard.")),setTimeout(()=>tb(!1),1e3),$.logEvent("clicked-share-copy",e,{location:"share-form",conversationId:el||"",responseId:er||"",shareUrl:e}))},[e_,el,er]),tw=(0,r.useCallback)(e=>{var t;let a,s=Array.from((null==(t=G.current)?void 0:t.querySelectorAll("[cmdk-item][data-value]:not([hidden])"))||[]);if(0===s.length)return;let n=ea?(0,O.kX)(ea):void 0,r=s.findIndex(e=>e.getAttribute("data-value")===n&&"true"===e.getAttribute("data-selected"));if(!G.current)return;a=-1!==r&&ea?"PageUp"===e?Math.max(0,r-8):Math.min(s.length-1,r+8):"PageDown"===e?0:s.length-1;let i=s[a];if(!i)return;let l=i.getAttribute("data-value"),o=i.getAttribute("data-type");l&&o&&(tu((0,O.P1)(o,l)),i.scrollIntoView({behavior:"instant",block:"PageUp"===e?"start":"end"}))},[ea,tu,G]),tC=(0,r.useCallback)(e=>{if(ev||ew)return;W(e,!1,!0);let t=y.w.getState().byId[e];$.logEvent("select_conversation",e,{conversationCreateTime:(null==t?void 0:t.createTime)||"",location:"command-menu"}),tf(!1)},[ev,ew,W,$,tf]),tk=(0,r.useCallback)(async e=>{var t;if(ev!==e)return;let a=eS.trim();if(""===a)return;let s=eY.find(t=>t.conversation.conversationId===e);$.logEvent("update_conversation",e,{location:"search-dialog"}),eb(null);let{fetchUpdateConversation:n}=y.w.getState();await n(e,{title:a,starred:null==s||null==(t=s.conversation)?void 0:t.starred}).catch(e=>{J("command-menu:handleEditSave",e)}),await eQ()},[eY,J,ev,eS,eQ,$]),tN=(0,r.useCallback)(async e=>{var t;let a=eY.find(t=>t.conversation.conversationId===e);$.logEvent("favorite_conversation",e,{value:(null==a?void 0:a.conversation.starred)?"true":"false",location:"search-dialog"});let{fetchUpdateConversation:s}=y.w.getState();await s(e,{starred:!(null==a||null==(t=a.conversation)?void 0:t.starred)}).catch(e=>{J("command-menu:handleToggleFavorite",e)}),await eQ()},[eY,J,eQ,$]),tS=(0,r.useCallback)(async e=>{if(ew!==e)return;$.logEvent("delete_conversation",e,{location:"search-dialog"}),el===ew&&W(),eC(null);let{fetchSoftDeleteConversation:t}=y.w.getState();await t(e).catch(e=>{J("command-menu:handleDeleteConfirm",e)}),await eQ()},[ew,J]),tI=(0,r.useCallback)(e=>{if(e.stopPropagation(),"Tab"===e.key&&e.preventDefault(),"PageUp"===e.key||"PageDown"===e.key){e.preventDefault(),tw(e.key);return}if("Enter"===e.key&&e$&&!e0&&0===eY.length&&"root"===eU.id&&0===e5.length&&0===ta.length&&0===tn.length&&0===tr.length&&0===e3.length&&0===e4.length){if(e.preventDefault(),!Y&&(!F.ENABLE_ANON_USERS||eu.includes(ec))){$.logEvent("sign_in","chat-new",{location:"chat-new"}),X(e$,ed);return}let{establishNewConversation:t}=i.aP.getState();t({message:e$,enableRetries:F.ENABLE_AUTO_STREAM_RETRY,ff:F}).then(()=>{tf(!1)}).catch(e=>{J("command-menu:handleKeyDown",e)});return}if(ew&&"Enter"===e.key)return e.preventDefault(),tS(ew);if("share"===eU.id&&"Enter"===e.key)return e.preventDefault(),ty();if(!(ev||ew)&&(null==ea?void 0:ea.type)==="conversation"){if("e"===e.key.toLowerCase()&&e.shiftKey&&(e.metaKey||e.ctrlKey)){e.preventDefault(),tv(ea.conversationId);return}else if("d"===e.key.toLowerCase()&&e.shiftKey&&(e.metaKey||e.ctrlKey)){e.preventDefault(),eC(ea.conversationId);return}}if(("Backspace"===e.key&&!e$||"k"===e.key.toLowerCase()&&(e.metaKey||e.ctrlKey&&e.shiftKey))&&(e.preventDefault(),tf(!1)),eZ&&"p"===e.key.toLowerCase()&&(e.metaKey||e.ctrlKey)&&e.shiftKey&&(e.preventDefault(),td(!ex)),"Enter"===e.key&&(null==ea?void 0:ea.type)==="conversation")if(e.metaKey||e.ctrlKey)window.open("/chat/".concat(ea.conversationId),"_blank");else{let{fetchGetConversation:e}=y.w.getState();e(ea.conversationId).then(e=>tC(e.conversationId)).catch((0,f.HX)("command-menu:handleConversationSelect"))}},[e$,e0,eY.length,eU.id,e5.length,ta.length,tn.length,tr.length,e3.length,e4.length,ew,ev,ea,eZ,tw,Y,eu,ec,$,X,ed,tf,J,tS,ty,tv,td,ex,tC,F]),t_=(0,r.useCallback)(()=>{eb(null),eC(null),eI("")},[]),tA=(0,r.useCallback)(()=>{$.logEvent("sign_in_redirect",void 0,{location:"command-menu"}),Q.push("/sign-in")},[Q,$]);(0,u.v)(l.VP,()=>{$.logEvent("opened_command_menu",void 0,{location:"command-menu:hotkey"}),tf(!et)},[et,tf]),(0,u.v)(l._1,()=>{eZ&&(et?td(!ex):(tf(!0),td(!0)))},[ex,td,tf,et,eZ]);let tM=(0,r.useMemo)(()=>ea?(0,O.Jo)(ea):"",[ea]);return(0,s.jsx)(H.R,{open:et,setOpen:tf,trigger:t,contentClassName:(0,b.cn)("bg-background rounded-3xl transition-all duration-150 ease-in-out outline-none w-full md:w-5/6 lg:w-3/5 max-w-3xl flex flex-col",{"rounded-b-none":eg},{"md:w-[calc(100dvw-32px)] lg:w-5/6 max-w-[1600px]":eG}),headerClassName:"sr-only",titleClassName:"sr-only",title:a("Command Menu","Command Menu"),children:(0,s.jsxs)(n.uB,{ref:G,label:"Command Menu",loop:!0,shouldFilter:!1,value:tM,defaultValue:null==to?void 0:to.value,onKeyDown:tI,onValueChange:tx,className:(0,b.cn)("flex flex-col w-full focus-visible:outline-none"),children:[(0,s.jsx)("div",{className:"flex items-center gap-3 px-5 border-b border-border h-14",children:(0,s.jsxs)(A.N,{mode:"popLayout",children:["root"!==eU.id&&(0,s.jsx)(M.P.div,{layout:!0,initial:{opacity:0,translateX:-10},animate:{opacity:1,translateX:0},exit:{opacity:0,translateX:-10},transition:{duration:.15},className:"flex items-center w-8 h-8 justify-center rounded-full text-fg-secondary hover:text-fg-primary hover:bg-button-ghost-hover transition-colors -ml-3",children:(0,s.jsx)(k.Oj5,{size:24,onClick:en})},"back-arrow"),eU.isSearchEnabled&&(0,s.jsx)(M.P.div,{className:"flex items-center w-full gap-2",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.uB.Input,{ref:e=>{ev||null==e||e.focus()},placeholder:eU.searchPlaceholder||"".concat(a("Search","Search"),"..."),value:eU.searchQuery,className:"flex-grow w-full bg-transparent placeholder:text-fg-secondary focus-visible:outline-none",onValueChange:tg}),(0,s.jsx)(A.N,{mode:"wait",children:e1&&"root"===eU.id?(0,s.jsx)(M.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"flex-shrink-0",children:(0,s.jsx)(R.y,{size:"sm"})},"spinner"):(0,s.jsx)(M.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"flex-shrink-0",children:(0,s.jsx)(N.A,{className:"size-5 text-fg-secondary"})},"search-icon")})]})})]})}),(0,s.jsx)(n.uB.List,{onPointerDown:e=>e.stopPropagation(),onPointerMove:e=>e.stopPropagation(),onPointerUp:e=>e.stopPropagation(),children:(0,s.jsxs)(M.P.div,{initial:{height:eg?"calc(90dvh - 64px)":eG?"80dvh":"min(460px, calc(100dvh - 56px - 48px - 32px))"},animate:{height:eg?"calc(90dvh-64px)":eG?"80dvh":"min(460px, calc(100dvh - 56px - 48px - 32px))"},transition:{duration:.15,ease:"easeInOut"},className:"w-full relative",children:[Y&&eU.isSearchEnabled&&(0,s.jsx)(n.uB.Empty,{className:"flex absolute inset-0 bg-background z-10 pt-24 md:pt-0 md:pb-32 flex-col items-center justify-center text-center grow",children:(0,s.jsx)(A.N,{mode:"wait",children:e2&&"root"===eU.id?(0,s.jsxs)(M.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"text-fg-secondary flex items-center gap-3",children:[(0,s.jsx)(S.A,{}),a("Error Loading Conversations","Error Loading Conversations")]},"error"):e0&&"root"===eU.id?(0,s.jsx)(M.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"text-fg-secondary flex items-center gap-3 animate-pulse",children:a("Loading Conversations","Loading Conversations")},"loading"):(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(M.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"text-fg-secondary",children:[(0,s.jsx)("div",{className:"text-fg-secondary",children:a("No results found.","No results found.")}),e$.length>0&&"root"===eU.id&&(0,s.jsxs)("div",{className:"hidden mt-4 md:block",children:[(0,s.jsx)("div",{className:"text-fg-secondary",children:a("Press enter to start new chat with:","Press enter to start new chat with:")}),(0,s.jsx)("div",{className:"text-fg-primary whitespace-nowrap truncate max-w-[400px]",children:e$})]})]},"no-results")})})}),"root"===eU.id?(0,s.jsxs)("div",{className:(0,b.cn)("grid h-full relative",{"grid-cols-2 xl:grid-cols-5":eG}),children:[(0,s.jsxs)("div",{className:(0,b.cn)("col-span-1 xl:col-span-2 h-full overflow-auto space-y-3 p-3",eG&&"border-r border-border"),style:{scrollPaddingBlock:"1rem"},ref:eJ,children:[eW?(0,s.jsxs)(s.Fragment,{children:[(!!e3.length||!!e4.length)&&(0,s.jsxs)(V,{heading:(0,s.jsxs)("div",{className:"flex justify-between gap-3 items-center",children:[(0,s.jsx)("div",{children:a("Actions","Actions")}),!e$&&eU.isSearchEnabled&&(0,s.jsx)("div",{className:"text-xs hover:text-primary transition-colors cursor-pointer",onClick:()=>tc(!1),children:a("Show Less","Show Less")})]}),children:[e3.map(e=>(0,s.jsx)(B,{...e},e.value)),e4.map(e=>(0,s.jsx)(B,{...e},e.value))]}),e$.length>0&&e5.length>0&&(0,s.jsx)(em,{actions:e5}),e$.length>0&&ta.length>0&&(0,s.jsx)(ey,{actions:ta}),e$.length>0&&tn.length>0&&(0,s.jsx)(ep,{actions:tn}),e$.length>0&&tr.length>0&&(0,s.jsx)(eF,{actions:tr}),e$.length>0&&e9.length>0&&(0,s.jsx)(eF,{actions:e9})]}):(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(V,{heading:(0,s.jsxs)("div",{className:"flex justify-between gap-3 items-center",children:[(0,s.jsx)("div",{children:a("Actions","Actions")}),(0,s.jsx)("div",{className:"text-xs hover:text-primary transition-colors cursor-pointer",onClick:()=>tc(!0),children:a("Show All","Show All")})]}),children:(0,s.jsx)(B,{...to},to.value)})}),Y?eY.length>0?(0,s.jsxs)(s.Fragment,{children:[e$?(0,s.jsx)(V,{heading:a("History","History"),children:null==eY?void 0:eY.map(e=>{let{conversation:t,matchedWords:a,matchType:n,highlight:r}=e;return(0,s.jsx)(U,{conversation:t,matchedWords:a,matchType:n,highlight:ex?void 0:r,isSelected:(null==tm?void 0:tm.type)==="conversation"&&tm.conversationId==tm.conversationId,isEditing:ev===t.conversationId,isDeleting:ew===t.conversationId,newTitle:eS,onNewTitleChange:eI,onSelect:tC,onEditStart:tv,onDeleteStart:eC,onToggleFavorite:tN,onEditSave:tk,onDeleteConfirm:tS,onCancel:t_},t.conversationId)})}):eX.map(e=>{var t;return(0,s.jsx)(V,{heading:Z[e.timeRange],children:null==(t=e.conversations)?void 0:t.map(e=>(0,s.jsx)(U,{conversation:e,isSelected:(null==tm?void 0:tm.type)==="conversation"&&tm.conversationId===e.conversationId,isEditing:ev===e.conversationId,isDeleting:ew===e.conversationId,newTitle:eS,onNewTitleChange:eI,onSelect:tC,onEditStart:tv,onDeleteStart:eC,onToggleFavorite:tN,onEditSave:tk,onDeleteConfirm:tS,onCancel:t_},e.conversationId))},e.timeRange)}),(0,s.jsx)("div",{ref:eq,className:"h-[1px] flex justify-center !m-0 !p-0"})]}):!e$&&(0,s.jsx)(V,{heading:a("History","History"),children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center py-12 text-center grow md:py-24",children:(0,s.jsx)(A.N,{mode:"wait",children:e2?(0,s.jsxs)(M.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"text-secondary flex items-center gap-3",children:[(0,s.jsx)(S.A,{}),a("Error Loading Conversations","Error Loading Conversations")]},"error"):e0?(0,s.jsx)(M.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"text-secondary flex items-center gap-3 animate-pulse",children:a("Loading Conversations","Loading Conversations")},"loading"):(0,s.jsx)(M.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},className:"text-secondary",children:a("History is empty","History is empty")},"empty")})})}):(0,s.jsx)(V,{heading:a("History","History"),children:(0,s.jsx)("div",{className:"flex flex-col items-center justify-center py-12 text-center grow md:py-24",children:(0,s.jsx)(D.$n,{variant:"outline",onClick:tA,children:a("Sign in to see your history","Sign in to see your history")})})})]}),eG&&(0,s.jsx)(ei,{conversationResults:eY})]}):(0,s.jsxs)("div",{className:(0,b.cn)("h-full p-3 overflow-auto"),style:{scrollPaddingBlock:"1rem"},children:["share"===eU.id&&el&&er&&(0,s.jsx)(ej,{isCopied:tj,setIsCopied:tb,conversationId:el,lastMessageId:er,onShareLinkChange:eM,onShareLinkCopy:ty}),"switch-model"===eU.id&&e5.length>0&&(0,s.jsx)(em,{actions:e5}),"switch-theme"===eU.id&&ta.length>0&&(0,s.jsx)(ey,{actions:ta}),"change-language"===eU.id&&tn.length>0&&(0,s.jsx)(ep,{actions:tn}),"workspace"===eU.id&&tr.length>0&&(0,s.jsx)(eF,{actions:tr}),"move-to-workspace"===eU.id&&e9.length>0&&(0,s.jsx)(eF,{actions:e9})]})]})}),!eg&&(0,s.jsxs)("div",{className:(0,b.cn)("flex items-center justify-end w-full h-12 gap-2 px-2 py-1 border-t border-border-l1",eZ&&"justify-between"),children:[eZ&&(0,s.jsx)(D.gx,{"aria-label":ex?a("Hide Conversation Previews","Hide Conversation Previews"):a("Show Conversation Previews","Show Conversation Previews"),tooltipContent:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{children:ex?a("Hide Conversation Previews","Hide Conversation Previews"):a("Show Conversation Previews","Show Conversation Previews")}),(0,s.jsx)("span",{className:"text-secondary border border-card px-1.5 rounded-md -mr-1.5",children:"".concat(q,"  P")})]}),tooltipContentProps:{side:"bottom"},tooltipProps:{delayDuration:500},variant:"ghost",size:"iconSm",rounded:!0,className:"transition-colors text-secondary hover:text-primary",onClick:()=>td(!ex),children:ex?(0,s.jsx)(I.A,{size:16}):(0,s.jsx)(_.A,{size:16})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[ti&&["home-action","item-action"].includes(ti)&&tl&&(0,s.jsx)(eo,{label:tl.name,shortcut:"",variant:"default",onTrigger:tl.onTrigger}),(null==ea?void 0:ea.type)==="model"&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(eo,{label:a("Switch","Switch"),shortcut:"",variant:"default",onTrigger:()=>{e6(ea.modelId)}})}),(null==ea?void 0:ea.type)==="theme"&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(eo,{label:a("Switch","Switch"),shortcut:"",variant:"default",onTrigger:()=>{tt(ea.themeId)}})}),(null==ea?void 0:ea.type)==="language"&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(eo,{label:a("Change","Change"),shortcut:"",variant:"default",onTrigger:()=>{ts(ea.languageId)}})}),(null==ea?void 0:ea.type)==="conversation"&&(0,s.jsx)(s.Fragment,{children:ev?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eo,{label:a("Cancel","Cancel"),shortcut:"Esc",variant:"default",onTrigger:()=>{eb(null),eI("")}}),(0,s.jsx)(eo,{label:a("Confirm","Confirm"),shortcut:"",variant:"default",onTrigger:()=>tk(ev)})]}):ew?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eo,{label:a("Cancel","Cancel"),shortcut:"Esc",variant:"default",onTrigger:()=>{eC(null)}}),(0,s.jsx)(eo,{label:a("Delete","Delete"),shortcut:"",variant:"destructive",onTrigger:()=>tS(ew)})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eo,{label:a("Go","Go"),shortcut:"",variant:"default",onTrigger:()=>tC(ea.conversationId)}),(0,s.jsx)(eo,{label:a("Edit","Edit"),shortcut:"".concat(q,"  E"),variant:"default",onTrigger:()=>{tv(ea.conversationId)}}),(0,s.jsx)(eo,{label:a("Delete","Delete"),shortcut:"".concat(q,"  D"),variant:"default",onTrigger:()=>{eC(ea.conversationId)}})]})}),"share"===eU.id&&e_&&(0,s.jsx)(eo,{label:a("Copy","Copy"),shortcut:"",variant:"default",onTrigger:ty})]})]})]})})}},83638:(e,t,a)=>{a.d(t,{B:()=>n});var s=a(88382);function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{threshold:.1},a=(0,s.useRef)(null);return(0,s.useEffect)(()=>{let s=new IntersectionObserver(t=>{t[0].isIntersecting&&e()},t);return a.current&&s.observe(a.current),()=>{a.current&&s.unobserve(a.current)}},[e,t]),a}},88119:(e,t,a)=>{a.d(t,{M:()=>h,Uk:()=>m,zG:()=>x});var s=a(79342),n=a(56691),r=a(61884),i=a(61312),l=a(40251),o=a(56297),c=a(73227),d=a(23823),u=a(16506);a(88382);var p=a(65146);let x={light:{icon:o.A,label:"Light"},dark:{icon:c.A,label:"Dark"},system:{icon:d.A,label:"System"}};function m(){let{t:e}=(0,p.Bd)("base"),{setTheme:t,theme:a}=(0,u.D)(),o={light:e("Light","Light"),dark:e("Dark","Dark"),system:e("System","System")};return(0,s.jsx)("div",{className:"w-full px-1 pt-1 pb-1",children:(0,s.jsx)("div",{className:"flex items-stretch w-full gap-2 justify-stretch",children:Object.entries(x).map(e=>{let[c,{icon:d}]=e;return(0,s.jsxs)(r.m_,{disableHoverableContent:!0,children:[(0,s.jsx)(l.k$,{asChild:!0,children:(0,s.jsx)(n.$n,{className:(0,i.cn)("w-full rounded-lg",{"bg-button-ghost-hover":a===c}),size:"icon",variant:"ghost",onClick:()=>t(c),value:c,children:(0,s.jsx)(d,{size:16})})}),(0,s.jsx)(r.ZI,{side:"bottom",children:(0,s.jsx)("p",{children:o[c]})})]},c)})})})}function h(){let{t:e}=(0,p.Bd)("base"),{setTheme:t,theme:a}=(0,u.D)(),r={light:e("Light","Light"),dark:e("Dark","Dark"),system:e("System","System")};return(0,s.jsx)("div",{className:"w-full px-1 pb-1",children:(0,s.jsx)("div",{className:"flex items-stretch w-full gap-2 justify-stretch",children:Object.entries(x).map(e=>{let[l,{icon:o}]=e;return(0,s.jsxs)(n.$n,{className:(0,i.cn)(a===l&&"bg-button-ghost-hover","w-full rounded-2xl flex-col p-3 group","ring-1 ring-inset ring-toggle-border hover:ring-card-border-focus hover:bg-card-hover text-primary"),variant:"none",size:"none",onClick:()=>t(l),value:l,children:[(0,s.jsx)(o,{className:(0,i.cn)("group-hover:text-primary",a===l?"text-primary":"text-secondary"),size:20}),(0,s.jsx)("p",{children:r[l]})]},l)})})})}},88844:(e,t,a)=>{a.d(t,{w:()=>o});var s=a(79342),n=a(61312),r=a(84969),i=a(33846),l=a(88382);function o(e){let{children:t,isVisible:a,minWidth:o,maxWidth:c,initialWidth:d,className:u}=e,[p,x]=(0,l.useState)(!1),[m,h]=(0,l.useState)(d);(0,l.useRef)(m).current=m;let g=(0,l.useRef)(null),f=(0,l.useRef)(document.body.clientWidth);(0,l.useEffect)(()=>{h(d)},[d]);let v=(0,l.useCallback)(e=>{e.preventDefault(),x(!0)},[]),j=(0,l.useCallback)(()=>{x(!1)},[]),b=(0,l.useCallback)(e=>{p&&g.current&&h(Math.max(o,Math.min(c,document.body.clientWidth-e.clientX)))},[p,o,c]),y=(0,l.useCallback)(()=>{h(Math.max(o,Math.min(c,d/f.current*document.body.clientWidth)))},[o,c,d]);return(0,l.useEffect)(()=>(window.addEventListener("mousemove",b),()=>window.removeEventListener("mousemove",b)),[b]),(0,l.useEffect)(()=>(window.addEventListener("mouseup",j),()=>window.removeEventListener("mouseup",j)),[j]),(0,l.useEffect)(()=>(window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)),[y]),(0,s.jsx)(r.N,{children:a&&(0,s.jsx)(i.P.div,{initial:{x:m,opacity:0,width:0},animate:{x:0,opacity:1,width:m},exit:{x:m,opacity:0,width:0},transition:p?{duration:0}:{type:"ease",ease:"easeInOut",duration:.3},className:(0,n.cn)("h-dvh flex-shrink-0",u),children:(0,s.jsxs)("div",{ref:g,className:"relative h-full w-full",children:[(0,s.jsx)("div",{className:(0,n.cn)("absolute start-0 top-0 bottom-0 w-2 cursor-col-resize border-l border-input-border hover:bg-card-hover z-50",p&&"bg-card-hover"),onMouseDown:v}),(0,s.jsxs)("div",{className:"h-full p-0",children:[t,p&&(0,s.jsx)("div",{className:"absolute inset-0 bg-transparent z-50"})]})]})})})}},91102:(e,t,a)=>{a.d(t,{c:()=>i});var s=a(88382);function n(e){return/(Macintosh)|(MacIntel)|(MacPPC)|(Mac68K)/i.test(e)}function r(){let{userAgent:e}=window.navigator;return/(iPhone)|(iPad)|(iPod)/i.test(e)||n(e)&&"ontouchend"in document?"ios":n(e)?"macos":/(Win32)|(Win64)|(Windows)|(WinCE)/i.test(e)?"windows":/Android/i.test(e)?"android":/Linux/i.test(e)?"linux":"undetermined"}function i(){let[e,t]=(0,s.useState)("undetermined");(0,s.useEffect)(()=>{t(r)},[]);let a=function(e){switch(e){case"macos":return"";case"windows":case"linux":return"Ctrl+";default:return null}}(e);return{os:e,commandPrefix:a}}},92207:(e,t,a)=>{a.d(t,{H0:()=>c,Jo:()=>r,P1:()=>l,kX:()=>n,kw:()=>i});var s=a(65258);function n(e){switch(e.type){case"conversation":return e.conversationId;case"home-action":return e.homeActionId;case"item-action":return e.itemActionId;case"model":return e.modelId;case"theme":return e.themeId;case"language":return e.languageId;case"move-to-workspace":return e.workspaceId;case"action":return e.value}}function r(e){return"".concat(e.type,":").concat(n(e))}function i(e){if(!e)return;let[t,a]=e.split(":");return l(t,a)}function l(e,t){switch(e){case"conversation":return{type:e,conversationId:t};case"home-action":return{type:e,homeActionId:t};case"item-action":return{type:e,itemActionId:t};case"model":return{type:e,modelId:t};case"theme":return{type:e,themeId:t};case"language":return{type:e,languageId:t};case"move-to-workspace":return{type:e,workspaceId:t};case"action":return{type:e,value:t};default:throw Error("Unknown selection type: ".concat(e))}}class o{constructor(e,t){this.set=e,this.get=t,this.open=!1,this.selectedItem=void 0,this.pages=[{id:"root",isSearchEnabled:!0,searchQuery:""}],this.onSearchQueryChange=e=>{let t=this.get().pages[this.get().pages.length-1];this.set({pages:[...this.get().pages.slice(0,-1),{...t,searchQuery:e}]})},this.openMenu=()=>{this.set({open:!0})},this.goBack=()=>{if(1===this.get().pages.length){this.onSearchQueryChange(""),this.set({open:!1}),this.setSelectedItem(void 0);return}this.setSelectedItem(void 0),this.set({pages:this.get().pages.slice(0,-1)})},this.closeMenu=()=>{this.set({open:!1,selectedItem:void 0,pages:[{...this.get().pages[0],searchQuery:""}]})},this.setSelectedItem=(0,s.kp)(this.set,"selectedItem"),this.addPage=e=>{this.setSelectedItem(void 0),this.set({pages:[...this.get().pages,e]})}}}let c=(0,s.y$)(o,"useCommandMenuStore")},92618:(e,t,a)=>{a.d(t,{A:()=>g,M:()=>j});var s=a(79342),n=a(56691),r=a(69648),i=a(16454),l=a(24429),o=a(17703),c=a(61312),d=a(64389),u=a(57402),p=a(1031),x=a(88382),m=a(65146),h=a(82646);function g(){let{t:e}=(0,m.Bd)("settings"),{isSuperGrokUser:t,data:a}=(0,l.Q2)();return(0,s.jsxs)("div",{className:"flex flex-col w-full h-full",children:[(0,s.jsxs)("div",{className:"px-3",children:[(0,s.jsx)("h1",{className:"font-semibold text-md",children:e("SuperGrok","SuperGrok")}),(0,s.jsx)("p",{className:(0,c.cn)("text-sm text-fg-secondary font-medium mb-4"),children:t?e("Your plan includes:","Your plan includes:"):e("Subscribe to SuperGrok to get:","Subscribe to SuperGrok to get:")}),(0,s.jsxs)("ul",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("li",{className:"flex items-center gap-2 ",children:[(0,s.jsx)(h.pry,{className:"text-fg-secondary",height:14,width:14}),(0,s.jsx)("span",{className:"text-sm",children:e("Everything in free","Everything in free")})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2 ",children:[(0,s.jsx)(h.pry,{className:"text-fg-secondary",height:14,width:14}),(0,s.jsx)("span",{className:"text-sm",children:e("Larger model context window","Larger model context window")})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2 ",children:[(0,s.jsx)(h.pry,{className:"text-fg-secondary",height:14,width:14}),(0,s.jsx)("span",{className:"text-sm",children:e("More queries for Grok 3","More queries for Grok 3")})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2 ",children:[(0,s.jsx)(h.pry,{className:"text-fg-secondary",height:14,width:14}),(0,s.jsx)("span",{className:"text-sm",children:e("More queries for Image Generation","More queries for Image Generation")})]}),(0,s.jsxs)("li",{className:"flex items-center gap-2 ",children:[(0,s.jsx)(h.pry,{className:"text-fg-secondary"}),(0,s.jsx)("span",{className:"text-sm",children:e("Opportunities to try new features early!","Opportunities to try new features early!")})]})]})]}),(0,s.jsx)(f,{subscriptions:null==a?void 0:a.subscriptions})]})}function f(e){let{subscriptions:t}=e,{t:a}=(0,m.Bd)("settings"),n=(0,x.useMemo)(()=>null==t?[]:t.filter(e=>!e.enterprise&&"SUBSCRIPTION_STATUS_ACTIVE"===e.status),[t]),l=n[0];return null==t?null:l?1===n.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.w,{orientation:"horizontal",className:"my-6"}),(0,s.jsx)(v,{subscription:l,labelOverride:a("Manage your subscription","Manage your subscription")})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.w,{orientation:"horizontal",className:"my-6"}),n.map((e,t)=>(0,s.jsx)(v,{subscription:e},t))]}):(0,s.jsx)(i._,{className:"mt-auto"})}function v(e){let{labelOverride:t,subscription:a}=e,{t:r}=(0,m.Bd)("settings"),[i,l]=(0,x.useState)(!1);if(a.stripe)return(0,s.jsxs)(n.$n,{className:"text-sm",variant:"outline",size:"pill",disabled:i,onClick:()=>{l(!0),d.$W.subscriptionsCreateBillingPortalSession({body:{returnUrl:window.location.href}}).then(e=>{window.open(e.url,"_blank")}).catch((0,o.HX)("settings-billing:manage-subscription")).finally(()=>{l(!1)})},children:[null!=t?t:r("Manage your subscription (Stripe)","Manage your subscription (Stripe)"),i?(0,s.jsx)(u.A,{height:16,width:16,className:"text-neutral-400 animate-spin !duration-1000"}):(0,s.jsx)(p.A,{height:16,width:16,className:"text-neutral-400"})]});if(a.x){let e=j(a);return(0,s.jsx)(n.$n,{variant:"outline",size:"pill",className:"text-sm",children:(0,s.jsxs)("a",{href:e,target:"_blank",className:"flex items-center gap-2",children:[null!=t?t:r("Manage your subscription (X)","Manage your subscription (\uD835\uDD4F)"),(0,s.jsx)(p.A,{height:16,width:16,className:"text-neutral-400"})]})})}if(a.apple){let e=j(a);return(0,s.jsx)(n.$n,{variant:"outline",size:"pill",className:"text-sm",children:(0,s.jsxs)("a",{href:e,target:"_blank",className:"flex items-center gap-2",children:[null!=t?t:r("Manage your subscription (Apple)","Manage your subscription (Apple)"),(0,s.jsx)(p.A,{height:16,width:16,className:"text-neutral-400"})]})})}if(a.google){let e=j(a);return(0,s.jsx)(n.$n,{variant:"outline",size:"pill",className:"text-sm",children:(0,s.jsxs)("a",{href:e,target:"_blank",className:"flex items-center gap-2",children:[null!=t?t:r("Manage your subscription (Google)","Manage your subscription (Google)"),(0,s.jsx)(p.A,{height:16,width:16,className:"text-neutral-400"})]})})}return null}function j(e){return e.x?"https://x.com/settings/subscription":e.apple?"https://apps.apple.com/account/subscriptions":e.google?"https://play.google.com/store/account/subscriptions?sku=grok.pro&package=ai.x.grok":void 0}},97225:(e,t,a)=>{a.d(t,{Bx:()=>M,CG:()=>L,CP:()=>B,Cn:()=>D,FX:()=>R,G:()=>K,Gh:()=>z,SidebarProvider:()=>A,Uj:()=>O,Yv:()=>T,Zr:()=>j,b:()=>w,cL:()=>_,hV:()=>C,jy:()=>N,vd:()=>S,vu:()=>b,wZ:()=>H,x2:()=>P,y$:()=>y});var s=a(79342),n=a(7287),r=a(88382),i=a(65146),l=a(56691),o=a(74933),c=a(69648),d=a(80226),u=a(61884),p=a(41320),x=a(80354),m=a(61312),h=a(72359),g=a(84618),f=a(84969),v=a(33846);let j="h-[36px]",b="w-[2rem]",y="ps-[.75rem]",w="h-[2.5rem]",C="mx-[.125rem]",k="mx-1",N="p-[0.375rem]",S="start-[.5rem]",I=r.createContext(null);function _(){let e=r.useContext(I);if(!e)throw Error("useSidebar must be used within a SidebarProvider.");return e}let A=r.forwardRef((e,t)=>{let{defaultOpen:a=!0,open:n,onOpenChange:i,className:l,style:o,children:c,...d}=e,x=(0,p.Di)(0),[g,f]=r.useState(!1),[v,j]=(0,h.Mj)("sidebarOpen",a),b=null!=n?n:v,y=r.useCallback(e=>{if(i)return null==i?void 0:i("function"==typeof e?e(b):e);j(e)},[i,j,b]),w=r.useCallback(()=>x?f(e=>!e):y(e=>!e),[x,y,f]),C=b?"expanded":"collapsed",k=r.useMemo(()=>({state:C,open:b,setOpen:y,isMobile:x,openMobile:g,setOpenMobile:f,toggleSidebar:w,contentWidthClass:"w-[calc(100%-var(--sidebar-width))]"}),[C,b,y,x,g,f,w]);return(0,s.jsx)(I.Provider,{value:k,children:(0,s.jsx)(u.Bc,{delayDuration:0,children:(0,s.jsx)("div",{style:{"--sidebar-width":"16rem","--sidebar-width-icon":"3.5rem",...o},className:(0,m.cn)("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",l),ref:t,...d,children:c})})})});A.displayName="SidebarProvider";let M=r.forwardRef((e,t)=>{let{side:a="left",variant:n="sidebar",collapsible:r="offcanvas",className:l,children:o,...c}=e,{state:d,openMobile:u,setOpenMobile:x,toggleSidebar:h}=_(),g=(0,p.Di)(),{t:v}=(0,i.Bd)("base");return"none"===r?(0,s.jsx)(s.Fragment,{children:(0,s.jsx)("div",{className:(0,m.cn)("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",l),ref:t,...c,children:o})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.N,{children:g&&"expanded"===d&&(0,s.jsx)(E,{onClick:h})}),(0,s.jsx)("div",{ref:t,className:"group peer md:block text-sidebar-foreground z-[40]","data-state":d,"data-collapsible":"collapsed"===d?r:"","data-variant":n,"data-side":a,children:(0,s.jsx)("div",{className:(0,m.cn)("duration-200 inset-y-0 z-10 h-svh w-[--sidebar-width] box-content transition-[left,right,width] ease-linear md:flex","floating"===n?"absolute":"block","floating"===n||"inset"===n?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]","left"===a?"start-0 group-data-[collapsible=offcanvas]:start-[calc(var(--sidebar-width)*-1)]":"end-0 group-data-[collapsible=offcanvas]:end-[calc(var(--sidebar-width)*-1)]",l),...c,children:(0,s.jsx)("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-xl",children:o})})})]})});M.displayName="Sidebar";let P=r.forwardRef((e,t)=>{let{className:a,onClick:n,iconSize:o=20,...c}=e,{toggleSidebar:d,open:u}=_(),{t:p}=(0,i.Bd)("base"),x=(0,r.useCallback)(e=>{null==n||n(e),d()},[d]);return(0,s.jsx)("div",{className:(0,m.cn)(u?"cursor-w-resize":"cursor-e-resize","grow"),onClick:x,children:(0,s.jsxs)(l.$n,{ref:t,"data-sidebar":"trigger",variant:"ghostSecondary",size:"icon",rounded:!0,className:(0,m.cn)(a),...c,children:[(0,s.jsx)(g.A,{className:(0,m.cn)(u&&"rotate-180","transition-transform duration-200"),size:o}),(0,s.jsx)("span",{className:"sr-only",children:p("Toggle Sidebar","Toggle Sidebar")})]})})});P.displayName="SidebarTrigger",r.forwardRef((e,t)=>{let{className:a,...n}=e,{toggleSidebar:r}=_();return(0,s.jsx)("button",{ref:t,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:(0,m.cn)("absolute top-0 left-0 h-full",a),style:{width:"var(--sidebar-width-icon)"}})}).displayName="SidebarRail";let E=e=>{let{className:t,onClick:a}=e;return(0,s.jsx)(v.P.div,{className:(0,m.cn)("fixed inset-0 z-[30] bg-overlay",t),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:a},"sidebar-overlay")};E.displayName="SidebarOverlay",r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("main",{ref:t,className:(0,m.cn)("relative flex min-h-svh flex-1 flex-col bg-background","peer-data-[variant=inset]:min-h-[calc(100svh-theme(spacing.4))] md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",a),...n})}).displayName="SidebarInset",r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(o.p,{ref:t,"data-sidebar":"input",className:(0,m.cn)("h-8 w-full bg-background shadow-none focus-visible:ring-1 focus-visible:ring-sidebar-ring",a),...n})}).displayName="SidebarInput";let z=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"header",className:(0,m.cn)("flex flex-col gap-2",a),...n})});z.displayName="SidebarHeader";let L=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"footer",className:(0,m.cn)("flex flex-col gap-2 mt-auto",a),...n})});L.displayName="SidebarFooter",r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)(c.w,{ref:t,"data-sidebar":"separator",className:(0,m.cn)("mx-2 w-auto bg-sidebar-border",a),...n})}).displayName="SidebarSeparator";let T=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"content",className:(0,m.cn)("flex min-h-0 flex-col overflow-auto group-data-[collapsible=icon]:overflow-hidden grow",a),...n})});T.displayName="SidebarContent";let D=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"group",className:(0,m.cn)("relative flex w-full min-w-0 flex-col","px-1.5","py-[2px]","shrink-0","transition-[width,transform,opacity] duration-200",a),...n})});D.displayName="SidebarGroup",r.forwardRef((e,t)=>{let{className:a,asChild:r=!1,...i}=e,l=r?n.DX:"div";return(0,s.jsx)(l,{ref:t,"data-sidebar":"group-label",className:(0,m.cn)("duration-200 flex h-8 shrink-0 items-center rounded-xl px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opa] ease-linear focus-visible:ring-1  [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",a),...i})}).displayName="SidebarGroupLabel",r.forwardRef((e,t)=>{let{className:a,asChild:r=!1,...i}=e,l=r?n.DX:"button";return(0,s.jsx)(l,{ref:t,"data-sidebar":"group-action",className:(0,m.cn)("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-xl p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-1  [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",a),...i})}).displayName="SidebarGroupAction",r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"group-content",className:(0,m.cn)("w-full text-sm",a),...n})}).displayName="SidebarGroupContent";let H=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("ul",{ref:t,"data-sidebar":"menu",className:(0,m.cn)("flex w-full min-w-0 flex-col cursor-default",a),onClick:x.Y,...n})});H.displayName="SidebarMenu";let R=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("li",{ref:t,"data-sidebar":"menu-item",className:(0,m.cn)("group/menu-item relative whitespace-nowrap font-semibold",k,a),...n})});R.displayName="SidebarMenuItem";let O=r.forwardRef((e,t)=>{let{asChild:a=!1,isActive:r=!1,allowActive:i=!0,tooltip:l,highlighted:o=!1,className:c,heightClassName:d=j,safeArea:p=!1,...x}=e,h=a?n.DX:"button",{isMobile:g,state:f}=_(),v="collapsed"===f,b=(0,s.jsx)(h,{ref:t,"data-sidebar":"menu-button","data-active":r,tabIndex:-1,className:(0,m.cn)("peer/menu-button flex items-center gap-2 overflow-hidden rounded-xl text-left","text-sm outline-none ring-sidebar-ring transition-[width,height,padding] focus-visible:ring-1","group-has-[[data-sidebar=menu-action]]/menu-item:pr-8","[&>span:last-child]:truncate [&>svg]:shrink-0","hover:bg-button-ghost-hover hover:text-primary","text-sm",p&&v&&'before:content-[""] before:absolute before:-inset-x-2.5 before:-inset-y-0.5 before:rounded-xl',d,o?"bg-button-ghost-hover border-border-l1":"border-transparent","hover:bg-button-ghost-hover","data-[state=open]:hover:bg-button-ghost-hover",i&&"active:bg-button-ghost-active",i&&"data-[active=true]:bg-button-ghost-active","aria-expanded:bg-button-ghost-hover",c),...x});return l?("string"==typeof l&&(l={children:l}),(0,s.jsxs)(u.m_,{children:[(0,s.jsx)(u.k$,{asChild:!0,children:b}),(0,s.jsx)(u.ZI,{side:"right",align:"center",hidden:!v||g,container:document.getElementById("tooltip-portal"),...l})]})):b});O.displayName="SidebarMenuButton",r.forwardRef((e,t)=>{let{className:a,asChild:r=!1,showOnHover:i=!1,...l}=e,o=r?n.DX:"button";return(0,s.jsx)(o,{ref:t,"data-sidebar":"menu-action",className:(0,m.cn)("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-xl p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-1 peer-hover/menu-button:text-sidebar-accent-foreground  [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",i&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",a),...l})}).displayName="SidebarMenuAction",r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"menu-badge",className:(0,m.cn)("absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-xl px-1 text-xs font-medium tabular-nums text-sidebar-foreground select-none pointer-events-none","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",a),...n})}).displayName="SidebarMenuBadge",r.forwardRef((e,t)=>{let{className:a,showIcon:n=!1,...i}=e,l=r.useMemo(()=>"".concat(Math.floor(40*Math.random())+50,"%"),[]);return(0,s.jsxs)("div",{ref:t,"data-sidebar":"menu-skeleton",className:(0,m.cn)("rounded-xl h-8 flex gap-2 px-2 items-center",a),...i,children:[n&&(0,s.jsx)(d.E,{className:"rounded-xl size-4","data-sidebar":"menu-skeleton-icon"}),(0,s.jsx)(d.E,{className:"h-4 flex-1 max-w-[--skeleton-width]","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":l}})]})}).displayName="SidebarMenuSkeleton",r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("ul",{ref:t,"data-sidebar":"menu-sub",className:(0,m.cn)("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",a),...n})}).displayName="SidebarMenuSub",r.forwardRef((e,t)=>{let{...a}=e;return(0,s.jsx)("li",{ref:t,...a})}).displayName="SidebarMenuSubItem",r.forwardRef((e,t)=>{let{asChild:a=!1,size:r="md",isActive:i,className:l,...o}=e,c=a?n.DX:"a";return(0,s.jsx)(c,{ref:t,"data-sidebar":"menu-sub-button","data-size":r,"data-active":i,className:(0,m.cn)("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-xl px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-1 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate  [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground","sm"===r&&"text-xs","md"===r&&"text-sm","group-data-[collapsible=icon]:hidden",l),...o})}).displayName="SidebarMenuSubButton";let B=r.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,"data-sidebar":"icon",className:(0,m.cn)("size-6","flex items-center justify-center shrink-0",a),...n})});function K(e){let{children:t,onClickIndent:a}=e;return(0,s.jsxs)("div",{className:(0,m.cn)("flex flex-row mt-1 ",k),children:[(0,s.jsx)("div",{className:"cursor-pointer ms-[8px] me-[2px] py-1",onClick:a,children:(0,s.jsx)("div",{className:"border-l border-border-l1 h-full ms-[10px] me-[4px]"})}),(0,s.jsx)("div",{className:"flex flex-col gap-1 w-full min-w-0",children:t})]})}B.displayName="SidebarIcon"},99667:(e,t,a)=>{a.d(t,{q:()=>x});var s=a(79342),n=a(56691),r=a(5663),i=a(75500),l=a(33231),o=a(61312),c=a(40938),d=a(88382),u=a(65146),p=a(63174);function x(e){let{value:t,onChange:a,isDirty:x,placeholder:m,onSave:h,onReset:g,disabled:f,textareaId:v,minRows:j=4,maxRows:b=8,autoFocus:y}=e,w=(0,d.useRef)(null),{t:C}=(0,u.Bd)("settings"),k=(0,d.useCallback)(e=>{a(e.target.value)},[a]),N=(0,d.useRef)(t);N.current=t;let S=(0,d.useCallback)(()=>{h(N.current)},[h]);(0,l.v)(r.Bq,()=>{S()},[S]);let I=(0,d.useCallback)(()=>{g()},[g]);(0,d.useEffect)(()=>{w.current&&!f&&y&&w.current.focus()},[y,f]);let _=(0,i.h)(),A=(0,d.useMemo)(()=>Number(_.MAX_CUSTOM_INSTRUCTIONS_LENGTH.value.maxLength),[_]),M=(0,d.useMemo)(()=>t.length>A,[t,A]),P=(0,d.useMemo)(()=>{let e=Number(_.MAX_CUSTOM_INSTRUCTIONS_LENGTH.value.maxLength);return!!e&&t.length>Math.floor(.8*e)},[t,_]);return(0,s.jsxs)("div",{className:"relative flex flex-col gap-3",children:[(0,s.jsx)("div",{className:(0,o.cn)("w-full transition ease-in-out rounded-xl","border border-border-l2",f&&"opacity-50"),children:(0,s.jsx)(p.A,{ref:w,className:(0,o.cn)("w-full p-3 text-sm align-bottom bg-transparent focus:outline-none text-primary rounded-xl"),value:t,onChange:k,placeholder:m,style:{resize:"none"},minRows:j,maxRows:b,disabled:f,id:v})}),(0,s.jsxs)("div",{className:"flex flex-row justify-between gap-2 px-0 min-h-10",children:[(0,s.jsxs)("div",{className:(0,o.cn)("flex flex-row items-center gap-1 text-xs px-3 w-full",M?"text-fg-danger":P?"text-secondary opacity-100":"opacity-0"),children:[(0,s.jsxs)("span",{children:[t.length," / ",A]}),M&&(0,s.jsx)("span",{className:"flex flex-row items-center gap-1",children:(0,s.jsx)(c.A,{className:"size-4 shrink-0"})})]}),(0,s.jsxs)("div",{className:(0,o.cn)("flex flex-row justify-end gap-2",f&&"hidden"),children:[(0,s.jsx)(n.$n,{variant:"outline",size:"md",disabled:!x,onClick:I,children:C("Discard","Discard")}),(0,s.jsx)(n.$n,{variant:"primary",size:"md",disabled:!x,onClick:S,children:C("Save","Save")})]})]})]})}}}]);